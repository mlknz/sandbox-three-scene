!function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return t[r].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){t.exports=n(1)},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=n(2),a=r(o),u=n(36),s=r(u),c=n(39),l=function t(){function e(){var t=Math.floor(r.clientWidth*u),e=Math.floor(r.clientHeight*u);r.width===t&&r.height===e||(r.width=t,r.height=e,o.setSize(r.clientWidth,r.clientHeight,!1),l.resize(t,e))}function n(){e(),l.update(d.getDelta()),f.update(),requestAnimationFrame(n)}if(i(this,t),!c())return void(document.body.innerHTML="Unable to initialize WebGL. Your browser may not support it.");var r=document.getElementById("canvas"),o=new THREE.WebGLRenderer({antialias:!0,alpha:!1,canvas:r}),u=window.devicePixelRatio||1;o.setPixelRatio(u);var l=new a.default(o);this.appViewer=l;var f=new s.default(o),d=new THREE.Clock;n()};window.app=new l},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=n(3),u=r(a),s=n(5),c=r(s),l=n(27),f=r(l),d=n(29),p=r(d),h=n(32),v=r(h),m=function(){function t(e){i(this,t),this.renderer=e,this.renderer.setClearColor(u.default.renderer.clearColor,u.default.renderer.clearAlpha),this.renderer.setPixelRatio(u.default.renderer.devicePixelRatio);var n=this.renderer.getContext(),r=n.canvas.clientWidth/n.canvas.clientHeight;this.sceneManager=new c.default,this.camera=new THREE.PerspectiveCamera(60,r,u.default.camera.near,u.default.camera.far),this.sceneReady=!1,document.addEventListener("sceneReady",this.onSceneReady.bind(this))}return o(t,[{key:"onSceneReady",value:function(){this.sceneReady=!0,this.controls=new f.default(this.camera,this.renderer.domElement),this.controls.resetCameraOrbit();var t=this.sceneManager.scene.getObjectByName("grass_instancedMesh");this.grass=new p.default(t);var e=this.sceneManager.scene.getObjectByName("water");this.water=new v.default(e)}},{key:"update",value:function(t){this.sceneReady&&(u.default.time+=t,this.controls.update(t),this.grass.update(u.default.time),this.water.update(u.default.time),this.renderer.render(this.sceneManager.scene,this.camera))}},{key:"resize",value:function(t,e){var n=t/e;this.camera.aspect!==n&&(this.camera.aspect=n,this.camera.updateProjectionMatrix())}},{key:"dispose",value:function(){this.controls.dispose()}}]),t}();e.default=m},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(4)(),i={isDesktop:r.desktop(),isDebug:"debug"===window.location.hash.substr(1),useDDSTextures:!0,usePVRTextures:!0,time:0,renderer:{clearColor:1315876,clearAlpha:!0,devicePixelRatio:window.devicePixelRatio||1},camera:{cameraPos:[-8.3,2.5,-2],cameraIntroTargetPos:[-81,30,-0],near:.1,far:1600},controls:{minDistance:1,maxDistance:500,rotateSpeed:.18},grass:{swayFrequency:{value:1},swayAmplitude:{value:.2},vertexSwayAmplitude:{value:.1},vertexSwayAmplitudeNormal:{value:.25}},water:{opacity:{value:.9},speed:{value:1.5},scale:{value:.5},detail1:{value:.25},detail2:{value:.25},detail3:{value:1},normalMap:{value:null},normalMaps:[]}};e.default=i},function(t,e,n){var r,i;!function(e){"use strict";var n=function(t,e){function n(e){return t.indexOf(e)!==-1}function r(t){var e;return e=new RegExp(t,"i"),s.className.match(e)}function i(t){r(t)||(s.className+=" "+t)}function o(t){r(t)&&(s.className=s.className.replace(t,""))}function a(e){var n=t.match(e);return n&&n.length>1&&n[1]||""}var u={},s=e||window.document.documentElement;t=(t||window.navigator.userAgent).toLowerCase(),u.ios=function(){return u.iphone()||u.ipod()||u.ipad()},u.iphone=function(){return n("iphone")},u.ipod=function(){return n("ipod")},u.ipad=function(){return n("ipad")},u.android=function(){return n("android")},u.androidPhone=function(){return u.android()&&n("mobile")},u.androidTablet=function(){return u.android()&&!n("mobile")},u.blackberry=function(){return n("blackberry")||n("bb10")||n("rim")},u.blackberryPhone=function(){return u.blackberry()&&!n("tablet")},u.blackberryTablet=function(){return u.blackberry()&&n("tablet")},u.windows=function(){return n("windows")},u.windowsPhone=function(){return u.windows()&&n("phone")},u.windowsTablet=function(){return u.windows()&&n("touch")&&!u.windowsPhone()},u.fxos=function(){return(n("(mobile;")||n("(tablet;"))&&n("; rv:")},u.fxosPhone=function(){return u.fxos()&&n("mobile")},u.fxosTablet=function(){return u.fxos()&&n("tablet")},u.meego=function(){return n("meego")},u.cordova=function(){return window.cordova&&"file:"===location.protocol},u.nodeWebkit=function(){return"object"==typeof window.process},u.bada=function(){return n("bada")},u.mobile=function(){return u.androidPhone()||u.iphone()||u.ipod()||u.windowsPhone()||u.blackberryPhone()||u.fxosPhone()||u.meego()},u.tablet=function(){return u.ipad()||u.androidTablet()||u.blackberryTablet()||u.windowsTablet()||u.fxosTablet()},u.desktop=function(){return!u.tablet()&&!u.mobile()},u.portrait=function(){return window.innerHeight/window.innerWidth>1},u.landscape=function(){return window.innerHeight/window.innerWidth<1},u.standAlone=function(){return window.navigator.standalone===!0},u.addClasses=function(){u._hasAddClasses||(u._hasAddClasses=!0,u.ios()?u.ipad()?i("ios ipad tablet"):u.iphone()?i("ios iphone mobile"):u.ipod()&&i("ios ipod mobile"):i(u.android()?u.androidTablet()?"android tablet":"android mobile":u.blackberry()?u.blackberryTablet()?"blackberry tablet":"blackberry mobile":u.windows()?u.windowsTablet()?"windows tablet":u.windowsPhone()?"windows mobile":"desktop":u.fxos()?u.fxosTablet()?"fxos tablet":"fxos mobile":u.meego()?"meego mobile":u.nodeWebkit()?"node-webkit":"desktop"),u.cordova()&&i("cordova"),u.standAlone()&&i("standalone"))};var c="";return u.ios()?(c=a(/os (\d+([_\s]\d+)*) like mac os x/i),c=c.replace(/[_\s]/g,".")):u.android()?c=a(/android[ \/-](\d+(\.\d+)*)/i):u.windowsPhone()?c=a(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i):u.blackberry()?c=a(/rim\stablet\sos\s(\d+(\.\d+)*)/i):u.bada()&&(c=a(/bada\/(\d+(\.\d+)*)/i)),c&&(u.osversion=c),u.addOrientationClasses=function(){if(!u.hasOrientationListener){u.hasOrientationListener=!0;var t=function(){return u.landscape()?(o("portrait"),i("landscape")):(o("landscape"),i("portrait"))},e="onorientationchange"in window?"orientationchange":"resize";window.addEventListener?window.addEventListener(e,t,!1):window.attachEvent?window.attachEvent(e,t):window[e]=t,t()}},u};"undefined"!=typeof t&&t.exports?t.exports=n:(r=[],i=function(){return n}.apply(e,r),!(void 0!==i&&(t.exports=i)))}(this)},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(6),s=r(u),c=n(17),l=r(c),f=n(18),d=r(f),p=n(19),h=r(p),v=n(23),m=r(v),g=n(3),_=r(g),y=new Event("sceneReady"),x=function(){function t(){o(this,t),this.scene=new THREE.Scene,this.assetsLoader=new s.default(this.scene),this.materialDecorator=new h.default(d.default),this.batcher=new m.default(this.scene,this.materialDecorator),document.addEventListener("assetsLoaded",this.onAssetsLoaded.bind(this)),this.assetsLoader.loadAssets(l.default.assets)}return a(t,[{key:"onAssetsLoaded",value:function(){this.createSceneFromDescription(this.scene),this.scene.updateMatrixWorld(),this.materialDecorator.rewriteSingleMaterials(this.scene,this.assetsLoader.assets.textures),_.default.water&&_.default.water.normalMaps&&this.assetsLoader.assets.textures&&_.default.water.normalMaps.push(this.assetsLoader.assets.textures.waterTex,this.assetsLoader.assets.textures.waterTex2),this.batcher.batchSameGeomIdUndecoratedMeshes({batchMeshesWithChildren:!0,excludeIfNameContains:[]}),document.dispatchEvent(y)}},{key:"createSceneFromDescription",value:function(t){this.addChildrenFromDescription(t,l.default.model.children)}},{key:"addChildrenFromDescription",value:function(t,e){var n=this,r=void 0;e.forEach(function(e){r=n.createObjectFromDescription(e),t.add(r),e.children&&e.children.length>0&&n.addChildrenFromDescription(r,e.children)})}},{key:"createObjectFromDescription",value:function(t){var e=null,n=null,r="Object3D";t.object&&t.object.type?r=t.object.type:t.type&&(r=t.type),t.object&&t.object.args?n=t.object.args:t.args&&(n=t.args);for(var o in n)n.hasOwnProperty(o)&&n[o].type&&"asset/texture"===n[o].type&&(n[o]=this.assetsLoader.assets.textures[n[o].name]);if("asset/json"===r)e=this.assetsLoader.assets.objects[t.name];else if("Mesh"===r||t.object&&t.object.geometry){var a=this.createObjectFromDescription(t.object.geometry),u=null;t.object.material&&(u=this.createObjectFromDescription(t.object.material)),e=new THREE.Mesh(a,u)}else e=n instanceof Array?new(Function.prototype.bind.apply(THREE[r],[null].concat(i(n)))):new THREE[r](n);return e||(e=new THREE.Object3D),t.properties&&this.addObjectProperties(e,t.properties),e}},{key:"addObjectProperties",value:function(t,e){var n=void 0,r=void 0;for(n in e)if(e.hasOwnProperty(n))if(e[n]instanceof Object){t[n]||(t[n]={});for(r in e[n])e[n].hasOwnProperty(r)&&(t[n][r]=e[n][r])}else t[n]=e[n]}}]),t}();e.default=x},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=n(3),u=r(a),s=n(7),c=new Event("assetsLoaded");window.THREE=window.THREE||THREE,n(15),n(16);var l=0,f=0,d=function(){function t(e){i(this,t),this.scene=e,this.assets={objects:{},textures:{}},this.objectLoader=new THREE.ObjectLoader,this.textureLoader=new THREE.TextureLoader,this.useDDS=!u.default.isIOS&&u.default.useDDSTextures,this.usePVR=u.default.isIOS&&u.default.usePVRTextures,this.DDSLoader=new THREE.DDSLoader,this.PVRLoader=new THREE.PVRLoader}return o(t,[{key:"loadAssets",value:function(t){var e=this,n=[],r=void 0,i=void 0,o=void 0,a=void 0,u=void 0;this.initProgressBar(),t.forEach(function(t){switch(t.type){case"json":i=t.path,a=e.objectLoader,u=e.assets.objects,o=t.name;break;case"texture":if(i=t.path,a=e.textureLoader,u=e.assets.textures,o=t.name,t.path instanceof Array)for(var s=0;s<t.path.length;s++){if(i=t.path[s],e.useDDS&&t.path[s].includes(".dds")){a=e.DDSLoader;break}if(e.usePVR&&t.path[s].includes(".pvr")){a=e.PVRLoader;break}}break;default:throw new Error("unknow asset type in sceneDescription: "+t.type)}r=e.loadEntry(i,u,o,a),n.push(r)}),Promise.all(n).then(function(){e.loadingFinished()})}},{key:"loadEntry",value:function(t,e,n,r){var i=this;return new Promise(function(o,a){r.load(t,function(t){e[n]=t,o()},function(t){u.default.isDebug&&console.log(t.loaded/t.total*100+"% loaded"),i.updateProgressBar(t.loaded,t.total,n)},function(t){console.log("error while loading model",t),a(t)})})}},{key:"initProgressBar",value:function(){this.progress=-1,this.assetsSizes={};var t=document.getElementById("progressBar");this.progressbar=new s.Line(t,{from:{color:"#557788"},to:{color:"#224455"},easing:"easeInOut",duration:1400,svgStyle:{display:"block",width:"100%",height:"100%",boxSizing:"border-box",borderRadius:"37px"},text:{value:"loading",style:{color:"#000",position:"absolute",left:"50%",top:"50%",padding:0,margin:0,fontWeight:"bold",fontSize:"6vh",transform:{prefix:!0,value:"translate(-50%, -50%)"}}},step:function(t,e){e.path.setAttribute("stroke",t.color)}})}},{key:"loadingFinished",value:function(){var t=document.getElementById("loadingScreen");t.className="loadingScreen-hidden",setTimeout(function(){t.style.display="none"},700),document.dispatchEvent(c)}},{key:"updateProgressBar",value:function(t,e,n){if(!this.assetsSizes[n]&&!isNaN(e)&&e>0&&(this.assetsSizes[n]={},this.assetsSizes[n].loaded=t,this.assetsSizes[n].size=e),this.assetsSizes[n]&&!isNaN(e)&&!isNaN(t)){l=0,f=0,this.assetsSizes[n].loaded=t;for(var r in this.assetsSizes)this.assetsSizes.hasOwnProperty(r)&&(l+=this.assetsSizes[r].loaded,f+=this.assetsSizes[r].size);this.progress=Math.max(l/f,this.progress),this.progressbar.set(this.progress)}}}]),t}();e.default=d},function(t,e,n){t.exports={Line:n(8),Circle:n(13),SemiCircle:n(14),Path:n(10),Shape:n(9),utils:n(12)}},function(t,e,n){var r=n(9),i=n(12),o=function(t,e){this._pathTemplate="M 0,{center} L 100,{center}",r.apply(this,arguments)};o.prototype=new r,o.prototype.constructor=o,o.prototype._initializeSvg=function(t,e){t.setAttribute("viewBox","0 0 100 "+e.strokeWidth),t.setAttribute("preserveAspectRatio","none")},o.prototype._pathString=function(t){return i.render(this._pathTemplate,{center:t.strokeWidth/2})},o.prototype._trailString=function(t){return this._pathString(t)},t.exports=o},function(t,e,n){var r=n(10),i=n(12),o="Object is destroyed",a=function t(e,n){if(!(this instanceof t))throw new Error("Constructor was called without new keyword");if(0!==arguments.length){this._opts=i.extend({color:"#555",strokeWidth:1,trailColor:null,trailWidth:null,fill:null,text:{style:{color:null,position:"absolute",left:"50%",top:"50%",padding:0,margin:0,transform:{prefix:!0,value:"translate(-50%, -50%)"}},autoStyleContainer:!0,alignToBottom:!0,value:null,className:"progressbar-text"},svgStyle:{display:"block",width:"100%"},warnings:!1},n,!0),i.isObject(n)&&void 0!==n.svgStyle&&(this._opts.svgStyle=n.svgStyle),i.isObject(n)&&i.isObject(n.text)&&void 0!==n.text.style&&(this._opts.text.style=n.text.style);var o,a=this._createSvgView(this._opts);if(o=i.isString(e)?document.querySelector(e):e,!o)throw new Error("Container does not exist: "+e);this._container=o,this._container.appendChild(a.svg),this._opts.warnings&&this._warnContainerAspectRatio(this._container),this._opts.svgStyle&&i.setStyles(a.svg,this._opts.svgStyle),this.svg=a.svg,this.path=a.path,this.trail=a.trail,this.text=null;var u=i.extend({attachment:void 0,shape:this},this._opts);this._progressPath=new r(a.path,u),i.isObject(this._opts.text)&&null!==this._opts.text.value&&this.setText(this._opts.text.value)}};a.prototype.animate=function(t,e,n){if(null===this._progressPath)throw new Error(o);this._progressPath.animate(t,e,n)},a.prototype.stop=function(){if(null===this._progressPath)throw new Error(o);void 0!==this._progressPath&&this._progressPath.stop()},a.prototype.destroy=function(){if(null===this._progressPath)throw new Error(o);this.stop(),this.svg.parentNode.removeChild(this.svg),this.svg=null,this.path=null,this.trail=null,this._progressPath=null,null!==this.text&&(this.text.parentNode.removeChild(this.text),this.text=null)},a.prototype.set=function(t){if(null===this._progressPath)throw new Error(o);this._progressPath.set(t)},a.prototype.value=function(){if(null===this._progressPath)throw new Error(o);return void 0===this._progressPath?0:this._progressPath.value()},a.prototype.setText=function(t){if(null===this._progressPath)throw new Error(o);null===this.text&&(this.text=this._createTextContainer(this._opts,this._container),this._container.appendChild(this.text)),i.isObject(t)?(i.removeChildren(this.text),this.text.appendChild(t)):this.text.innerHTML=t},a.prototype._createSvgView=function(t){var e=document.createElementNS("http://www.w3.org/2000/svg","svg");this._initializeSvg(e,t);var n=null;(t.trailColor||t.trailWidth)&&(n=this._createTrail(t),e.appendChild(n));var r=this._createPath(t);return e.appendChild(r),{svg:e,path:r,trail:n}},a.prototype._initializeSvg=function(t,e){t.setAttribute("viewBox","0 0 100 100")},a.prototype._createPath=function(t){var e=this._pathString(t);return this._createPathElement(e,t)},a.prototype._createTrail=function(t){var e=this._trailString(t),n=i.extend({},t);return n.trailColor||(n.trailColor="#eee"),n.trailWidth||(n.trailWidth=n.strokeWidth),n.color=n.trailColor,n.strokeWidth=n.trailWidth,n.fill=null,this._createPathElement(e,n)},a.prototype._createPathElement=function(t,e){var n=document.createElementNS("http://www.w3.org/2000/svg","path");return n.setAttribute("d",t),n.setAttribute("stroke",e.color),n.setAttribute("stroke-width",e.strokeWidth),e.fill?n.setAttribute("fill",e.fill):n.setAttribute("fill-opacity","0"),n},a.prototype._createTextContainer=function(t,e){var n=document.createElement("div");n.className=t.text.className;var r=t.text.style;return r&&(t.text.autoStyleContainer&&(e.style.position="relative"),i.setStyles(n,r),r.color||(n.style.color=t.color)),this._initializeTextContainer(t,e,n),n},a.prototype._initializeTextContainer=function(t,e,n){},a.prototype._pathString=function(t){throw new Error("Override this function for each progress bar")},a.prototype._trailString=function(t){throw new Error("Override this function for each progress bar")},a.prototype._warnContainerAspectRatio=function(t){if(this.containerAspectRatio){var e=window.getComputedStyle(t,null),n=parseFloat(e.getPropertyValue("width"),10),r=parseFloat(e.getPropertyValue("height"),10);i.floatEquals(this.containerAspectRatio,n/r)||(console.warn("Incorrect aspect ratio of container","#"+t.id,"detected:",e.getPropertyValue("width")+"(width)","/",e.getPropertyValue("height")+"(height)","=",n/r),console.warn("Aspect ratio of should be",this.containerAspectRatio))}},t.exports=a},function(t,e,n){var r=n(11),i=n(12),o={easeIn:"easeInCubic",easeOut:"easeOutCubic",easeInOut:"easeInOutCubic"},a=function t(e,n){if(!(this instanceof t))throw new Error("Constructor was called without new keyword");n=i.extend({duration:800,easing:"linear",from:{},to:{},step:function(){}},n);var r;r=i.isString(e)?document.querySelector(e):e,this.path=r,this._opts=n,this._tweenable=null;var o=this.path.getTotalLength();this.path.style.strokeDasharray=o+" "+o,this.set(0)};a.prototype.value=function(){var t=this._getComputedDashOffset(),e=this.path.getTotalLength(),n=1-t/e;return parseFloat(n.toFixed(6),10)},a.prototype.set=function(t){this.stop(),this.path.style.strokeDashoffset=this._progressToOffset(t);var e=this._opts.step;if(i.isFunction(e)){var n=this._easing(this._opts.easing),r=this._calculateTo(t,n),o=this._opts.shape||this;e(r,o,this._opts.attachment)}},a.prototype.stop=function(){this._stopTween(),this.path.style.strokeDashoffset=this._getComputedDashOffset()},a.prototype.animate=function(t,e,n){e=e||{},i.isFunction(e)&&(n=e,e={});var o=i.extend({},e),a=i.extend({},this._opts);e=i.extend(a,e);var u=this._easing(e.easing),s=this._resolveFromAndTo(t,u,o);this.stop(),this.path.getBoundingClientRect();var c=this._getComputedDashOffset(),l=this._progressToOffset(t),f=this;this._tweenable=new r,this._tweenable.tween({from:i.extend({offset:c},s.from),to:i.extend({offset:l},s.to),duration:e.duration,easing:u,step:function(t){f.path.style.strokeDashoffset=t.offset;var n=e.shape||f;e.step(t,n,e.attachment)},finish:function(t){i.isFunction(n)&&n()}})},a.prototype._getComputedDashOffset=function(){var t=window.getComputedStyle(this.path,null);return parseFloat(t.getPropertyValue("stroke-dashoffset"),10)},a.prototype._progressToOffset=function(t){var e=this.path.getTotalLength();return e-t*e},a.prototype._resolveFromAndTo=function(t,e,n){return n.from&&n.to?{from:n.from,to:n.to}:{from:this._calculateFrom(e),to:this._calculateTo(t,e)}},a.prototype._calculateFrom=function(t){return r.interpolate(this._opts.from,this._opts.to,this.value(),t)},a.prototype._calculateTo=function(t,e){return r.interpolate(this._opts.from,this._opts.to,t,e)},a.prototype._stopTween=function(){null!==this._tweenable&&(this._tweenable.stop(),this._tweenable=null)},a.prototype._easing=function(t){return o.hasOwnProperty(t)?o[t]:t},t.exports=a},function(t,e,n){(function(){var e=this||Function("return this")(),n=function(){"use strict";function n(){}function r(t,e){var n;for(n in t)Object.hasOwnProperty.call(t,n)&&e(n)}function i(t,e){return r(e,function(n){t[n]=e[n]}),t}function o(t,e){r(e,function(n){"undefined"==typeof t[n]&&(t[n]=e[n])})}function a(t,e,n,r,i,o,a){var s,c,l,f=t<o?0:(t-o)/i;for(s in e)e.hasOwnProperty(s)&&(c=a[s],l="function"==typeof c?c:d[c],e[s]=u(n[s],r[s],l,f));return e}function u(t,e,n,r){return t+(e-t)*n(r)}function s(t,e){var n=f.prototype.filter,i=t._filterArgs;r(n,function(r){"undefined"!=typeof n[r][e]&&n[r][e].apply(t,i)})}function c(t,e,n,r,i,o,u,c,l,f,d){y=e+n+r,x=Math.min(d||_(),y),w=x>=y,b=r-(y-x),t.isPlaying()&&(w?(l(u,t._attachment,b),t.stop(!0)):(t._scheduleId=f(t._timeoutHandler,m),s(t,"beforeTween"),x<e+n?a(1,i,o,u,1,1,c):a(x,i,o,u,r,e+n,c),s(t,"afterTween"),l(i,t._attachment,b)))}function l(t,e){var n={},i=typeof e;return"string"===i||"function"===i?r(t,function(t){n[t]=e}):r(t,function(t){n[t]||(n[t]=e[t]||h)}),n}function f(t,e){this._currentState=t||{},this._configured=!1,this._scheduleFunction=p,"undefined"!=typeof e&&this.setConfig(e)}var d,p,h="linear",v=500,m=1e3/60,g=Date.now?Date.now:function(){return+new Date},_="undefined"!=typeof SHIFTY_DEBUG_NOW?SHIFTY_DEBUG_NOW:g;p="undefined"!=typeof window?window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||window.mozCancelRequestAnimationFrame&&window.mozRequestAnimationFrame||setTimeout:setTimeout;var y,x,w,b;return f.prototype.tween=function(t){return this._isTweening?this:(void 0===t&&this._configured||this.setConfig(t),this._timestamp=_(),this._start(this.get(),this._attachment),this.resume())},f.prototype.setConfig=function(t){t=t||{},this._configured=!0,this._attachment=t.attachment,this._pausedAtTime=null,this._scheduleId=null,this._delay=t.delay||0,this._start=t.start||n,this._step=t.step||n,this._finish=t.finish||n,this._duration=t.duration||v,this._currentState=i({},t.from||this.get()),this._originalState=this.get(),this._targetState=i({},t.to||this.get());var e=this;this._timeoutHandler=function(){c(e,e._timestamp,e._delay,e._duration,e._currentState,e._originalState,e._targetState,e._easing,e._step,e._scheduleFunction)};var r=this._currentState,a=this._targetState;return o(a,r),this._easing=l(r,t.easing||h),this._filterArgs=[r,this._originalState,a,this._easing],s(this,"tweenCreated"),this},f.prototype.get=function(){return i({},this._currentState)},f.prototype.set=function(t){this._currentState=t},f.prototype.pause=function(){return this._pausedAtTime=_(),this._isPaused=!0,this},f.prototype.resume=function(){return this._isPaused&&(this._timestamp+=_()-this._pausedAtTime),this._isPaused=!1,this._isTweening=!0,this._timeoutHandler(),this},f.prototype.seek=function(t){t=Math.max(t,0);var e=_();return this._timestamp+t===0?this:(this._timestamp=e-t,this.isPlaying()||(this._isTweening=!0,this._isPaused=!1,c(this,this._timestamp,this._delay,this._duration,this._currentState,this._originalState,this._targetState,this._easing,this._step,this._scheduleFunction,e),this.pause()),this)},f.prototype.stop=function(t){return this._isTweening=!1,this._isPaused=!1,this._timeoutHandler=n,(e.cancelAnimationFrame||e.webkitCancelAnimationFrame||e.oCancelAnimationFrame||e.msCancelAnimationFrame||e.mozCancelRequestAnimationFrame||e.clearTimeout)(this._scheduleId),t&&(s(this,"beforeTween"),a(1,this._currentState,this._originalState,this._targetState,1,0,this._easing),s(this,"afterTween"),s(this,"afterTweenEnd"),this._finish.call(this,this._currentState,this._attachment)),this},f.prototype.isPlaying=function(){return this._isTweening&&!this._isPaused},f.prototype.setScheduleFunction=function(t){this._scheduleFunction=t},f.prototype.dispose=function(){var t;for(t in this)this.hasOwnProperty(t)&&delete this[t]},f.prototype.filter={},f.prototype.formula={linear:function(t){return t}},d=f.prototype.formula,i(f,{now:_,each:r,tweenProps:a,tweenProp:u,applyFilter:s,shallowCopy:i,defaults:o,composeEasingObject:l}),"function"==typeof SHIFTY_DEBUG_NOW&&(e.timeoutHandler=c),t.exports=f,f}();!function(){n.shallowCopy(n.prototype.formula,{easeInQuad:function(t){return Math.pow(t,2)},easeOutQuad:function(t){return-(Math.pow(t-1,2)-1)},easeInOutQuad:function(t){return(t/=.5)<1?.5*Math.pow(t,2):-.5*((t-=2)*t-2)},easeInCubic:function(t){return Math.pow(t,3)},easeOutCubic:function(t){return Math.pow(t-1,3)+1},easeInOutCubic:function(t){return(t/=.5)<1?.5*Math.pow(t,3):.5*(Math.pow(t-2,3)+2)},easeInQuart:function(t){return Math.pow(t,4)},easeOutQuart:function(t){return-(Math.pow(t-1,4)-1)},easeInOutQuart:function(t){return(t/=.5)<1?.5*Math.pow(t,4):-.5*((t-=2)*Math.pow(t,3)-2)},easeInQuint:function(t){return Math.pow(t,5)},easeOutQuint:function(t){return Math.pow(t-1,5)+1},easeInOutQuint:function(t){return(t/=.5)<1?.5*Math.pow(t,5):.5*(Math.pow(t-2,5)+2)},easeInSine:function(t){return-Math.cos(t*(Math.PI/2))+1},easeOutSine:function(t){return Math.sin(t*(Math.PI/2))},easeInOutSine:function(t){return-.5*(Math.cos(Math.PI*t)-1)},easeInExpo:function(t){return 0===t?0:Math.pow(2,10*(t-1))},easeOutExpo:function(t){return 1===t?1:-Math.pow(2,-10*t)+1},easeInOutExpo:function(t){return 0===t?0:1===t?1:(t/=.5)<1?.5*Math.pow(2,10*(t-1)):.5*(-Math.pow(2,-10*--t)+2)},easeInCirc:function(t){return-(Math.sqrt(1-t*t)-1)},easeOutCirc:function(t){return Math.sqrt(1-Math.pow(t-1,2))},easeInOutCirc:function(t){return(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},easeOutBounce:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInBack:function(t){var e=1.70158;return t*t*((e+1)*t-e)},easeOutBack:function(t){var e=1.70158;return(t-=1)*t*((e+1)*t+e)+1},easeInOutBack:function(t){var e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},elastic:function(t){return-1*Math.pow(4,-8*t)*Math.sin((6*t-1)*(2*Math.PI)/2)+1},swingFromTo:function(t){var e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},swingFrom:function(t){var e=1.70158;return t*t*((e+1)*t-e)},swingTo:function(t){var e=1.70158;return(t-=1)*t*((e+1)*t+e)+1},bounce:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},bouncePast:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?2-(7.5625*(t-=1.5/2.75)*t+.75):t<2.5/2.75?2-(7.5625*(t-=2.25/2.75)*t+.9375):2-(7.5625*(t-=2.625/2.75)*t+.984375)},easeFromTo:function(t){return(t/=.5)<1?.5*Math.pow(t,4):-.5*((t-=2)*Math.pow(t,3)-2)},easeFrom:function(t){return Math.pow(t,4)},easeTo:function(t){return Math.pow(t,.25)}})}(),function(){function t(t,e,n,r,i,o){function a(t){return((p*t+h)*t+v)*t}function u(t){return((m*t+g)*t+_)*t}function s(t){return(3*p*t+2*h)*t+v}function c(t){return 1/(200*t)}function l(t,e){return u(d(t,e))}function f(t){return t>=0?t:0-t}function d(t,e){var n,r,i,o,u,c;for(i=t,c=0;c<8;c++){if(o=a(i)-t,f(o)<e)return i;if(u=s(i),f(u)<1e-6)break;i-=o/u}if(n=0,r=1,i=t,i<n)return n;if(i>r)return r;for(;n<r;){if(o=a(i),f(o-t)<e)return i;t>o?n=i:r=i,i=.5*(r-n)+n}return i}var p=0,h=0,v=0,m=0,g=0,_=0;return v=3*e,h=3*(r-e)-v,p=1-v-h,_=3*n,g=3*(i-n)-_,m=1-_-g,l(t,c(o))}function e(e,n,r,i){return function(o){return t(o,e,n,r,i,1)}}n.setBezierFunction=function(t,r,i,o,a){var u=e(r,i,o,a);return u.displayName=t,u.x1=r,u.y1=i,u.x2=o,u.y2=a,n.prototype.formula[t]=u},n.unsetBezierFunction=function(t){delete n.prototype.formula[t]}}(),function(){function t(t,e,r,i,o,a){return n.tweenProps(i,e,t,r,1,a,o)}var e=new n;e._filterArgs=[],n.interpolate=function(r,i,o,a,u){var s=n.shallowCopy({},r),c=u||0,l=n.composeEasingObject(r,a||"linear");e.set({});var f=e._filterArgs;f.length=0,f[0]=s,f[1]=r,f[2]=i,f[3]=l,n.applyFilter(e,"tweenCreated"),n.applyFilter(e,"beforeTween");var d=t(r,s,i,o,l,c);return n.applyFilter(e,"afterTween"),d}}(),function(t){function e(t,e){var n,r=[],i=t.length;for(n=0;n<i;n++)r.push("_"+e+"_"+n);return r}function n(t){var e=t.match(w);return e?(1===e.length||t.charAt(0).match(x))&&e.unshift(""):e=["",""],e.join(T)}function r(e){t.each(e,function(t){var n=e[t];"string"==typeof n&&n.match(M)&&(e[t]=i(n))})}function i(t){return s(M,t,o)}function o(t){var e=a(t);return"rgb("+e[0]+","+e[1]+","+e[2]+")"}function a(t){return t=t.replace(/#/,""),3===t.length&&(t=t.split(""),t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]),P[0]=u(t.substr(0,2)),P[1]=u(t.substr(2,2)),P[2]=u(t.substr(4,2)),P}function u(t){return parseInt(t,16)}function s(t,e,n){var r=e.match(t),i=e.replace(t,T);if(r)for(var o,a=r.length,u=0;u<a;u++)o=r.shift(),i=i.replace(T,n(o));return i}function c(t){return s(E,t,l)}function l(t){for(var e=t.match(b),n=e.length,r=t.match(S)[0],i=0;i<n;i++)r+=parseInt(e[i],10)+",";return r=r.slice(0,-1)+")"}function f(r){var i={};return t.each(r,function(t){var o=r[t];if("string"==typeof o){var a=g(o);i[t]={formatString:n(o),chunkNames:e(a,t)}}}),i}function d(e,n){t.each(n,function(t){for(var r=e[t],i=g(r),o=i.length,a=0;a<o;a++)e[n[t].chunkNames[a]]=+i[a];delete e[t]})}function p(e,n){t.each(n,function(t){var r=e[t],i=h(e,n[t].chunkNames),o=v(i,n[t].chunkNames);r=m(n[t].formatString,o),e[t]=c(r)})}function h(t,e){for(var n,r={},i=e.length,o=0;o<i;o++)n=e[o],r[n]=t[n],delete t[n];return r}function v(t,e){L.length=0;for(var n=e.length,r=0;r<n;r++)L.push(t[e[r]]);return L}function m(t,e){for(var n=t,r=e.length,i=0;i<r;i++)n=n.replace(T,+e[i].toFixed(4));return n}function g(t){return t.match(b)}function _(e,n){t.each(n,function(t){var r,i=n[t],o=i.chunkNames,a=o.length,u=e[t];if("string"==typeof u){var s=u.split(" "),c=s[s.length-1];for(r=0;r<a;r++)e[o[r]]=s[r]||c}else for(r=0;r<a;r++)e[o[r]]=u;delete e[t]})}function y(e,n){t.each(n,function(t){var r=n[t],i=r.chunkNames,o=i.length,a=e[i[0]],u=typeof a;if("string"===u){for(var s="",c=0;c<o;c++)s+=" "+e[i[c]],delete e[i[c]];e[t]=s.substr(1)}else e[t]=a})}var x=/(\d|\-|\.)/,w=/([^\-0-9\.]+)/g,b=/[0-9.\-]+/g,E=new RegExp("rgb\\("+b.source+/,\s*/.source+b.source+/,\s*/.source+b.source+"\\)","g"),S=/^.*\(/,M=/#([0-9]|[a-f]){3,6}/gi,T="VAL",P=[],L=[];t.prototype.filter.token={tweenCreated:function(t,e,n,i){r(t),r(e),r(n),this._tokenData=f(t)},beforeTween:function(t,e,n,r){_(r,this._tokenData),d(t,this._tokenData),d(e,this._tokenData),d(n,this._tokenData)},afterTween:function(t,e,n,r){p(t,this._tokenData),p(e,this._tokenData),p(n,this._tokenData),y(r,this._tokenData)}}}(n)}).call(null)},function(t,e){function n(t,e,r){t=t||{},e=e||{},r=r||!1;for(var i in e)if(e.hasOwnProperty(i)){var o=t[i],a=e[i];r&&l(o)&&l(a)?t[i]=n(o,a,r):t[i]=a}return t}function r(t,e){var n=t;for(var r in e)if(e.hasOwnProperty(r)){var i=e[r],o="\\{"+r+"\\}",a=new RegExp(o,"g");n=n.replace(a,i)}return n}function i(t,e,n){for(var r=t.style,i=0;i<h.length;++i){var o=h[i];r[o+a(e)]=n}r[e]=n}function o(t,e){f(e,function(e,n){null!==e&&void 0!==e&&(l(e)&&e.prefix===!0?i(t,n,e.value):t.style[n]=e)})}function a(t){return t.charAt(0).toUpperCase()+t.slice(1)}function u(t){return"string"==typeof t||t instanceof String}function s(t){return"function"==typeof t}function c(t){return"[object Array]"===Object.prototype.toString.call(t)}function l(t){if(c(t))return!1;var e=typeof t;return"object"===e&&!!t}function f(t,e){for(var n in t)if(t.hasOwnProperty(n)){var r=t[n];e(r,n);
}}function d(t,e){return Math.abs(t-e)<v}function p(t){for(;t.firstChild;)t.removeChild(t.firstChild)}var h="Webkit Moz O ms".split(" "),v=.001;t.exports={extend:n,render:r,setStyle:i,setStyles:o,capitalize:a,isString:u,isFunction:s,isObject:l,forEachObject:f,floatEquals:d,removeChildren:p}},function(t,e,n){var r=n(9),i=n(12),o=function(t,e){this._pathTemplate="M 50,50 m 0,-{radius} a {radius},{radius} 0 1 1 0,{2radius} a {radius},{radius} 0 1 1 0,-{2radius}",this.containerAspectRatio=1,r.apply(this,arguments)};o.prototype=new r,o.prototype.constructor=o,o.prototype._pathString=function(t){var e=t.strokeWidth;t.trailWidth&&t.trailWidth>t.strokeWidth&&(e=t.trailWidth);var n=50-e/2;return i.render(this._pathTemplate,{radius:n,"2radius":2*n})},o.prototype._trailString=function(t){return this._pathString(t)},t.exports=o},function(t,e,n){var r=n(9),i=n(13),o=n(12),a=function(t,e){this._pathTemplate="M 50,50 m -{radius},0 a {radius},{radius} 0 1 1 {2radius},0",this.containerAspectRatio=2,r.apply(this,arguments)};a.prototype=new r,a.prototype.constructor=a,a.prototype._initializeSvg=function(t,e){t.setAttribute("viewBox","0 0 100 50")},a.prototype._initializeTextContainer=function(t,e,n){t.text.style&&(n.style.top="auto",n.style.bottom="0",t.text.alignToBottom?o.setStyle(n,"transform","translate(-50%, 0)"):o.setStyle(n,"transform","translate(-50%, 50%)"))},a.prototype._pathString=i.prototype._pathString,a.prototype._trailString=i.prototype._trailString,t.exports=a},function(t,e){THREE.DDSLoader=function(){this._parser=THREE.DDSLoader.parse},THREE.DDSLoader.prototype=Object.create(THREE.CompressedTextureLoader.prototype),THREE.DDSLoader.prototype.constructor=THREE.DDSLoader,THREE.DDSLoader.parse=function(t,e){function n(t){return t.charCodeAt(0)+(t.charCodeAt(1)<<8)+(t.charCodeAt(2)<<16)+(t.charCodeAt(3)<<24)}function r(t){return String.fromCharCode(255&t,t>>8&255,t>>16&255,t>>24&255)}function i(t,e,n,r){for(var i=n*r*4,o=new Uint8Array(t,e,i),a=new Uint8Array(i),u=0,s=0,c=0;c<r;c++)for(var l=0;l<n;l++){var f=o[s];s++;var d=o[s];s++;var p=o[s];s++;var h=o[s];s++,a[u]=p,u++,a[u]=d,u++,a[u]=f,u++,a[u]=h,u++}return a}var o={mipmaps:[],width:0,height:0,format:null,mipmapCount:1},a=542327876,u=131072,s=512,c=1024,l=2048,f=4096,d=8192,p=16384,h=32768,v=4,m=n("DXT1"),g=n("DXT3"),_=n("DXT5"),y=n("ETC1"),x=31,w=0,b=1,E=2,S=3,M=4,T=7,P=20,L=21,R=22,A=23,D=24,C=25,O=26,I=28,N=new Int32Array(t,0,x);if(N[w]!==a)return console.error("THREE.DDSLoader.parse: Invalid magic number in DDS header."),o;if(!N[P]&v)return console.error("THREE.DDSLoader.parse: Unsupported format, must contain a FourCC code."),o;var U,H=N[L],z=!1;switch(H){case m:U=8,o.format=THREE.RGB_S3TC_DXT1_Format;break;case g:U=16,o.format=THREE.RGBA_S3TC_DXT3_Format;break;case _:U=16,o.format=THREE.RGBA_S3TC_DXT5_Format;break;case y:U=8,o.format=THREE.RGB_ETC1_Format;break;default:if(!(32===N[R]&&16711680&N[A]&&65280&N[D]&&255&N[C]&&4278190080&N[O]))return console.error("THREE.DDSLoader.parse: Unsupported FourCC code ",r(H)),o;z=!0,U=64,o.format=THREE.RGBAFormat}o.mipmapCount=1,N[E]&u&&e!==!1&&(o.mipmapCount=Math.max(1,N[T]));var k=N[I];if(o.isCubemap=!!(k&s),o.isCubemap&&(!(k&c)||!(k&l)||!(k&f)||!(k&d)||!(k&p)||!(k&h)))return console.error("THREE.DDSLoader.parse: Incomplete cubemap faces"),o;o.width=N[M],o.height=N[S];for(var V=N[b]+4,F=o.isCubemap?6:1,j=0;j<F;j++)for(var G=o.width,B=o.height,W=0;W<o.mipmapCount;W++){if(z)var X=i(t,V,G,B),Y=X.length;else var Y=Math.max(4,G)/4*Math.max(4,B)/4*U,X=new Uint8Array(t,V,Y);var q={data:X,width:G,height:B};o.mipmaps.push(q),V+=Y,G=Math.max(G>>1,1),B=Math.max(B>>1,1)}return o}},function(t,e){THREE.PVRLoader=function(t){this.manager=void 0!==t?t:THREE.DefaultLoadingManager,this._parser=THREE.PVRLoader.parse},THREE.PVRLoader.prototype=Object.create(THREE.CompressedTextureLoader.prototype),THREE.PVRLoader.prototype.constructor=THREE.PVRLoader,THREE.PVRLoader.parse=function(t,e){var n=13,r=new Uint32Array(t,0,n),i={buffer:t,header:r,loadMipmaps:e};if(55727696===r[0])return THREE.PVRLoader._parseV3(i);if(559044176===r[11])return THREE.PVRLoader._parseV2(i);throw new Error("[THREE.PVRLoader] Unknown PVR format")},THREE.PVRLoader._parseV3=function(t){var e,n,r=t.header,i=r[12],o=r[2],a=r[6],u=r[7],s=(r[9],r[10]),c=r[11];switch(o){case 0:e=2,n=THREE.RGB_PVRTC_2BPPV1_Format;break;case 1:e=2,n=THREE.RGBA_PVRTC_2BPPV1_Format;break;case 2:e=4,n=THREE.RGB_PVRTC_4BPPV1_Format;break;case 3:e=4,n=THREE.RGBA_PVRTC_4BPPV1_Format;break;default:throw new Error("pvrtc - unsupported PVR format "+o)}return t.dataPtr=52+i,t.bpp=e,t.format=n,t.width=u,t.height=a,t.numSurfaces=s,t.numMipmaps=c,t.isCubemap=6===s,THREE.PVRLoader._extract(t)},THREE.PVRLoader._parseV2=function(t){var e,n,r=t.header,i=r[0],o=r[1],a=r[2],u=r[3],s=r[4],e=(r[5],r[6]),c=(r[7],r[8],r[9],r[10]),l=(r[11],r[12]),f=255,d=24,p=25,h=s&f,v=c>0;if(h===p)n=v?THREE.RGBA_PVRTC_4BPPV1_Format:THREE.RGB_PVRTC_4BPPV1_Format,e=4;else{if(h!==d)throw new Error("pvrtc - unknown format "+h);n=v?THREE.RGBA_PVRTC_2BPPV1_Format:THREE.RGB_PVRTC_2BPPV1_Format,e=2}return t.dataPtr=i,t.bpp=e,t.format=n,t.width=a,t.height=o,t.numSurfaces=l,t.numMipmaps=u+1,t.isCubemap=6===l,THREE.PVRLoader._extract(t)},THREE.PVRLoader._extract=function(t){var e={mipmaps:[],width:t.width,height:t.height,format:t.format,mipmapCount:t.numMipmaps,isCubemap:t.isCubemap},n=t.buffer,r=t.dataPtr,i=t.bpp,o=t.numSurfaces,a=0,u=0,s=0,c=0,l=0,f=0;2===i?(s=8,c=4):(s=4,c=4),u=s*c*i/8,e.mipmaps.length=t.numMipmaps*o;for(var d=0;d<t.numMipmaps;){var p=t.width>>d,h=t.height>>d;l=p/s,f=h/c,l<2&&(l=2),f<2&&(f=2),a=l*f*u;for(var v=0;v<o;v++){var m=new Uint8Array(n,r,a),g={data:m,width:p,height:h};e.mipmaps[v*t.numMipmaps+d]=g,r+=a}d++}return e}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={assets:[{name:"test_scene",type:"json",path:"assets/test_scene.json"},{name:"grassTex",type:"texture",path:"assets/textures/grass.png"},{name:"groundTex",type:"texture",path:"assets/textures/ground.jpg"},{name:"waterTex",type:"texture",path:"assets/textures/water_normal.jpg"},{name:"waterTex2",type:"texture",path:"assets/textures/water_normal.png"}],model:{children:[{type:"asset/json",name:"test_scene",properties:{name:"Scene"}},{object:{type:"AmbientLight",args:11184810},properties:{name:"ambientLight"}},{object:{type:"DirectionalLight",args:16777215},properties:{name:"directLight",position:{x:-30,y:20,z:10}}},{object:{type:"DirectionalLight",args:8947848},properties:{name:"directLight2",position:{x:30,y:-30,z:-5}}}]}};e.default=n},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={grass_instanced:{map:"grassTex",color:16777215},ground:{map:"groundTex",color:16777215}};e.default=n},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=n(20),a=n(21),u=n(22),s=function(){function t(e){r(this,t),this.materialsDescription=e||{},this.materialsCache=[]}return i(t,[{key:"rewriteSingleMaterials",value:function(t,e){var n=this;this.textures=e,t.traverse(function(t){if(t instanceof THREE.Mesh&&!t.name.includes("_instanced"))if(t.material instanceof THREE.MultiMaterial)for(var e=0;e<t.material.materials.length;e++)t.material.materials[e]=n.rewriteSingleMaterial(t.material.materials[e],o,a);else t.material=n.rewriteSingleMaterial(t.material,o,a)})}},{key:"rewriteInstancedMaterial",value:function(t){var e=null;if(t instanceof THREE.MultiMaterial){for(var n=0;n<t.materials.length;n++)t.materials[n]=this.rewriteSingleMaterial(t.materials[n],u,a,!0);e=t}else e=this.rewriteSingleMaterial(t,u,a,!0);return e}},{key:"rewriteCustomMaterial",value:function(t,e,n){var r=null;if(t instanceof THREE.MultiMaterial){for(var i=0;i<t.materials.length;i++)t.materials[i]=this.rewriteSingleMaterial(t.materials[i],e,n,!0);r=t}else r=this.rewriteSingleMaterial(t,e,n,!0);return r}},{key:"rewriteSingleMaterial",value:function(t,e,n,r,i){for(var o=t.name+(r&&!t.name.includes("_instanced")?"_instanced":""),a=0;a<this.materialsCache.length;a++)if(!i&&o===this.materialsCache[a].name)return this.materialsCache[a];var u=THREE.UniformsUtils.clone(THREE.ShaderLib.standard.uniforms);u.map.value=t.map,u.lightMap.value=t.lightMap,u.bumpMap.value=t.bumpMap instanceof THREE.Texture?t.bumpMap:null,u.normalMap.value=t.normalMap instanceof THREE.Texture?t.normalMap:null,u.diffuse.value=t.color?t.color:new THREE.Color(16777215),u.roughnessMap.value=null,u.roughness.value=t.roughness||.6,u.metalness.value=t.metalness||.1,u.ssaoMap={type:"t",value:null},u.ssaoMapIntensity={type:"f",value:1.01},u.screenResolution={type:"v2",value:new THREE.Vector2(window.innerWidth,window.innerHeight)};var s=this.materialsDescription[o];s&&this._writeUniformsFromMaterialDescription(u,s);var c=this._getMaterialDefines(u),l=c+e,f=c+n,d=new THREE.RawShaderMaterial({uniforms:u,lights:!0,transparent:u.opacity.value<1||t.transparent,side:t.side,vertexShader:l,fragmentShader:f});return d.name=o,this.materialsCache.push(d),d}},{key:"_writeUniformsFromMaterialDescription",value:function(t,e){t.map.value=this.textures[e.map]||t.map.value,t.normalMap.value=this.textures[e.normalMap]||t.normalMap.value,t.bumpMap.value=this.textures[e.bumpMap]||t.bumpMap.value,t.roughnessMap.value=this.textures[e.roughnessMap]||t.roughnessMap.value,t.diffuse.value=e.color?new THREE.Color(e.color):t.diffuse.value,t.roughness.value=e.roughness||t.roughness.value,t.metalness.value=e.metalness||t.metalness.value,t.opacity.value=e.opacity||1,e.repeat&&(t.offsetRepeat.value.set(0,0,e.repeat[0],e.repeat[1]),t.map.value.wrapS=t.map.value.wrapT=THREE.RepeatWrapping,t.map.value.repeat.set(e.repeat[0],e.repeat[1]),t.normalMap&&t.normalMap.value&&(t.normalMap.value.wrapS=t.normalMap.value.wrapT=THREE.RepeatWrapping,t.normalMap.value.repeat.set(e.repeat[0],e.repeat[1])),t.bumpMap&&t.bumpMap.value&&(t.bumpMap.value.wrapS=t.bumpMap.value.wrapT=THREE.RepeatWrapping,t.bumpMap.value.repeat.set(e.repeat[0],e.repeat[1])),t.roughnessMap&&t.roughnessMap.value&&(t.roughnessMap.value.wrapS=t.roughnessMap.value.wrapT=THREE.RepeatWrapping,t.roughnessMap.value.repeat.set(e.repeat[0],e.repeat[1]))),e.offset&&(t.offsetRepeat.value.x=e.offset[0],t.offsetRepeat.value.y=e.offset[1])}},{key:"_getMaterialDefines",value:function(t){var e="";return t.map.value&&(e+="#define USE_MAP 1\n"),t.lightMap.value&&(e+="#define USE_LIGHTMAP 1\n"),t.bumpMap.value&&(e+="#define USE_BUMPMAP 1\n"),t.normalMap.value&&(e+="#define USE_NORMALMAP 1\n"),t.roughnessMap.value&&(e+="#define USE_ROUGHNESSMAP 1\n"),e}}]),t}();e.default=s},function(t,e){t.exports="#define SHADER_NAME ShaderMaterial\n#define VERTEX_TEXTURES\n#define GAMMA_FACTOR 2\n#define MAX_BONES 251\nuniform mat4 modelMatrix;\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform mat4 viewMatrix;\nuniform mat3 normalMatrix;\nuniform vec3 cameraPosition;\nattribute vec3 position;\nattribute vec3 normal;\nattribute vec2 uv;\n#ifdef USE_COLOR\n\tattribute vec3 color;\n#endif\n\n#ifdef IS_FOLIAGE\nvarying float vDepth;\n#endif\n#ifdef USE_MORPHTARGETS\n\tattribute vec3 morphTarget0;\n\tattribute vec3 morphTarget1;\n\tattribute vec3 morphTarget2;\n\tattribute vec3 morphTarget3;\n\t#ifdef USE_MORPHNORMALS\n\t\tattribute vec3 morphNormal0;\n\t\tattribute vec3 morphNormal1;\n\t\tattribute vec3 morphNormal2;\n\t\tattribute vec3 morphNormal3;\n\t#else\n\t\tattribute vec3 morphTarget4;\n\t\tattribute vec3 morphTarget5;\n\t\tattribute vec3 morphTarget6;\n\t\tattribute vec3 morphTarget7;\n\t#endif\n#endif\n#ifdef USE_SKINNING\n\tattribute vec4 skinIndex;\n\tattribute vec4 skinWeight;\n#endif\n\n#define STANDARD\n\n#define GAMMA_FACTOR 2\n\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#define PI 3.14159\n#define PI2 6.28318\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\n\n#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n\tuniform vec4 offsetRepeat;\n#endif\n\n#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n#endif\n\n#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif\n\n#if defined( USE_ENVMAP ) && ! defined( USE_BUMPMAP ) && ! defined( USE_NORMALMAP ) && ! defined( PHONG ) && ! defined( STANDARD )\n\tvarying vec3 vReflect;\n\tuniform float refractionRatio;\n#endif\n\n#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif\n#ifdef USE_MORPHTARGETS\n\t#ifndef USE_MORPHNORMALS\n\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif\n#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform sampler2D boneTexture;\n\t\tuniform int boneTextureWidth;\n\t\tuniform int boneTextureHeight;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureWidth ) );\n\t\t\tfloat y = floor( j / float( boneTextureWidth ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureWidth );\n\t\t\tfloat dy = 1.0 / float( boneTextureHeight );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneGlobalMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneGlobalMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif\n\n#ifdef USE_SHADOWMAP\n\n\t#if NUM_DIR_LIGHTS > 0\n\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\n\t#endif\n\n\t#if NUM_SPOT_LIGHTS > 0\n\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\n\t#endif\n\n\t#if NUM_POINT_LIGHTS > 0\n\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\n\t#endif\n\n#endif\n\n#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif\n#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n\tuniform float logDepthBufFC;\n#endif\n\nvoid main() {\n\t#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvUv = uv * offsetRepeat.zw + offsetRepeat.xy;\n#endif\n\t#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = uv2;\n#endif\n\t#ifdef USE_COLOR\n\tvColor.xyz = color.xyz;\n#endif\n\nvec3 objectNormal = vec3( normal );\n\n#ifdef USE_MORPHNORMALS\n\tobjectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n\tobjectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n\tobjectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n\tobjectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n#endif\n\n#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif\n#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n#endif\n\n#ifdef FLIP_SIDED\n\tobjectNormal = -objectNormal;\n#endif\nvec3 transformedNormal = normalMatrix * objectNormal;\n\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\nvec3 transformed = vec3( position );\n\n#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normal * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\n#endif\n\n#ifdef USE_MORPHTARGETS\n\ttransformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n\ttransformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n\ttransformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n\ttransformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\ttransformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n\ttransformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n\ttransformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n\ttransformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\t#endif\n#endif\n\n#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\tskinned  = bindMatrixInverse * skinned;\n#endif\n\n#ifdef USE_SKINNING\n\tvec4 mvPosition = modelViewMatrix * skinned;\n#else\n\tvec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\n#endif\ngl_Position = projectionMatrix * mvPosition;\n\n#ifdef USE_LOGDEPTHBUF\n\tgl_Position.z = log2(max( EPSILON, gl_Position.w + 1.0 )) * logDepthBufFC;\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t#else\n\t\tgl_Position.z = (gl_Position.z - 1.0) * gl_Position.w;\n\t#endif\n#endif\n\n\tvViewPosition = - mvPosition.xyz;\n#if defined( USE_ENVMAP ) || defined( PHONG ) || defined( STANDARD ) || defined( LAMBERT ) || defined ( USE_SHADOWMAP )\n\t#ifdef USE_SKINNING\n\t\tvec4 worldPosition = modelMatrix * skinned;\n\t#else\n\t\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\n\t#endif\n#endif\n\n#if defined( USE_ENVMAP ) && ! defined( USE_BUMPMAP ) && ! defined( USE_NORMALMAP ) && ! defined( PHONG ) && ! defined( STANDARD )\n\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t#ifdef ENVMAP_MODE_REFLECTION\n\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t#else\n\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t#endif\n#endif\n\n#ifdef USE_SHADOWMAP\n    #if NUM_DIR_LIGHTS > 0\n    \tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n    \t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\n    \t}\n\t#endif\n\n\t#if NUM_SPOT_LIGHTS > 0\n    \tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n    \t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\n    \t}\n\t#endif\n\n\t#if NUM_POINT_LIGHTS > 0\n    \tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n    \t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\n    \t}\n\t#endif\n#endif\n}\n"},function(t,e){t.exports="#extension GL_OES_standard_derivatives : enable\n\nprecision highp float;\n\n#define SHADER_NAME ShaderMaterial\n#define GAMMA_FACTOR 2\nuniform mat4 viewMatrix;\nuniform vec3 cameraPosition;\n#define TONE_MAPPING\n#define saturate(a) clamp( a, 0.0, 1.0 )\nuniform float toneMappingExposure;\nuniform float toneMappingWhitePoint;\nvec3 LinearToneMapping( vec3 color ) {\n  return toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n  color *= toneMappingExposure;\n  return saturate( color / ( vec3( 1.0 ) + color ) );\n}\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\nvec3 Uncharted2ToneMapping( vec3 color ) {\n  color *= toneMappingExposure;\n  return saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n  color *= toneMappingExposure;\n  color = max( vec3( 0.0 ), color - 0.004 );\n  return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\n\nvec3 toneMapping( vec3 color ) { return LinearToneMapping( color ); }\n\nvec4 LinearToLinear( in vec4 value ) {\n  return value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n  return vec4( pow( value.xyz, vec3( gammaFactor ) ), value.w );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n  return vec4( pow( value.xyz, vec3( 1.0 / gammaFactor ) ), value.w );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n  return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n  return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n  return vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n  float maxComponent = max( max( value.r, value.g ), value.b );\n  float fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n  return vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n  return vec4( value.xyz * value.w * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n  float maxRGB = max( value.x, max( value.g, value.b ) );\n  float M      = clamp( maxRGB / maxRange, 0.0, 1.0 );\n  M            = ceil( M * 255.0 ) / 255.0;\n  return vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n    return vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n    float maxRGB = max( value.x, max( value.g, value.b ) );\n    float D      = max( maxRange / maxRGB, 1.0 );\n    D            = min( floor( D ) / 255.0, 1.0 );\n    return vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n  vec3 Xp_Y_XYZp = value.rgb * cLogLuvM;\n  Xp_Y_XYZp = max(Xp_Y_XYZp, vec3(1e-6, 1e-6, 1e-6));\n  vec4 vResult;\n  vResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n  float Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n  vResult.w = fract(Le);\n  vResult.z = (Le - (floor(vResult.w*255.0))/255.0)/255.0;\n  return vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n  float Le = value.z * 255.0 + value.w;\n  vec3 Xp_Y_XYZp;\n  Xp_Y_XYZp.y = exp2((Le - 127.0) / 2.0);\n  Xp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n  Xp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n  vec3 vRGB = Xp_Y_XYZp.rgb * cLogLuvInverseM;\n  return vec4( max(vRGB, 0.0), 1.0 );\n}\n\nvec4 mapTexelToLinear( vec4 value ) { return LinearToLinear( value ); }\nvec4 envMapTexelToLinear( vec4 value ) { return LinearToLinear( value ); }\nvec4 emissiveMapTexelToLinear( vec4 value ) { return LinearToLinear( value ); }\nvec4 linearToOutputTexel( vec4 value ) { return LinearToLinear( value ); }\n\n#define STANDARD\n\n#define GAMMA_FACTOR 2\n\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\nuniform float envMapIntensity;\nvarying vec3 vViewPosition;\n#ifdef IS_FOLIAGE\nvarying float vDepth;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#define PI 3.14159\n#define PI2 6.28318\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\n\n#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif\n\n#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n#endif\n#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif\n\n#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif\n#if defined( USE_SSAOMAP )\n    uniform highp sampler2D ssaoMap;\n    uniform float ssaoMapIntensity;\n    uniform vec2 screenResolution;\n#endif\n#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif\n\n#if defined( USE_ENVMAP ) || defined( STANDARD )\n\tuniform float reflectivity;\n\tuniform float envMapIntenstiy;\n#endif\n#ifdef USE_ENVMAP\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\tuniform float flipEnvMap;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( STANDARD )\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif\n\n#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif\nbool testLightInRange( const in float lightDistance, const in float cutoffDistance ) {\n\treturn any( bvec2( cutoffDistance == 0.0, lightDistance < cutoffDistance ) );\n}\nfloat punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t\tif( decayExponent > 0.0 ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\t\tfloat maxDistanceCutoffFactor = pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t\treturn distanceFalloff * maxDistanceCutoffFactor;\n#else\n\t\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n#endif\n\t\t}\n\t\treturn 1.0;\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_Smith( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec3 BRDF_Specular_GGX_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 AB = vec2( -1.04, 1.04 ) * a004 + r.zw;\n\treturn specularColor * AB.x + AB.y;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n\n#ifdef ENVMAP_TYPE_CUBE_UV\nconst float cubeUV_textureSize = 1024.0;\nint getFaceFromDirection(vec3 direction) {\n    vec3 absDirection = abs(direction);\n    int face = -1;\n    if( absDirection.x > absDirection.z ) {\n        if(absDirection.x > absDirection.y )\n            face = direction.x > 0.0 ? 0 : 3;\n        else\n            face = direction.y > 0.0 ? 1 : 4;\n    }\n    else {\n        if(absDirection.z > absDirection.y )\n            face = direction.z > 0.0 ? 2 : 5;\n        else\n            face = direction.y > 0.0 ? 1 : 4;\n    }\n    return face;\n}\nconst float cubeUV_maxLods1 = log2(cubeUV_textureSize*0.25) - 1.0;\nconst float cubeUV_rangeClamp = exp2((6.0 - 1.0) * 2.0);\nvec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {\n    float scale = exp2(cubeUV_maxLods1 - roughnessLevel);\n    float dxRoughness = dFdx(roughness);\n    float dyRoughness = dFdy(roughness);\n    vec3 dx = dFdx( vec * scale * dxRoughness );\n    vec3 dy = dFdy( vec * scale * dyRoughness );\n    float d = max( dot( dx, dx ), dot( dy, dy ) );\n    d = clamp(d, 1.0, cubeUV_rangeClamp);\n    float mipLevel = 0.5 * log2(d);\n    return vec2(floor(mipLevel), fract(mipLevel));\n}\nconst float cubeUV_maxLods2 = log2(cubeUV_textureSize*0.25) - 2.0;\nconst float cubeUV_rcpTextureSize = 1.0 / cubeUV_textureSize;\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\n    mipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\n    float a = 16.0 * cubeUV_rcpTextureSize;\n    vec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );\n    vec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;\n    float powScale = exp2_packed.x * exp2_packed.y;\n    float scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\n    float mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\n    bool bRes = mipLevel == 0.0;\n    scale =  bRes && (scale < a) ? a : scale;\n    vec3 r;\n    vec2 offset;\n    int face = getFaceFromDirection(direction);\n    float rcpPowScale = 1.0 / powScale;\n    if( face == 0) {\n        r = vec3(direction.x, -direction.z, direction.y);\n        offset = vec2(0.0+mipOffset,0.75 * rcpPowScale);\n        offset.y = bRes && (offset.y < 2.0*a) ?  a : offset.y;\n    }\n    else if( face == 1) {\n        r = vec3(direction.y, direction.x, direction.z);\n        offset = vec2(scale+mipOffset, 0.75 * rcpPowScale);\n        offset.y = bRes && (offset.y < 2.0*a) ?  a : offset.y;\n    }\n    else if( face == 2) {\n        r = vec3(direction.z, direction.x, direction.y);\n        offset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\n        offset.y = bRes && (offset.y < 2.0*a) ?  a : offset.y;\n    }\n    else if( face == 3) {\n        r = vec3(direction.x, direction.z, direction.y);\n        offset = vec2(0.0+mipOffset,0.5 * rcpPowScale);\n        offset.y = bRes && (offset.y < 2.0*a) ?  0.0 : offset.y;\n    }\n    else if( face == 4) {\n        r = vec3(direction.y, direction.x, -direction.z);\n        offset = vec2(scale+mipOffset, 0.5 * rcpPowScale);\n        offset.y = bRes && (offset.y < 2.0*a) ?  0.0 : offset.y;\n    }\n    else {\n        r = vec3(direction.z, -direction.x, direction.y);\n        offset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\n        offset.y = bRes && (offset.y < 2.0*a) ?  0.0 : offset.y;\n    }\n    r = normalize(r);\n    float texelOffset = 0.5 * cubeUV_rcpTextureSize;\n    vec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\n    vec2 base = offset + vec2( texelOffset );\n    return base + s * ( scale - 2.0 * texelOffset );\n}\nconst float cubeUV_maxLods3 = log2(cubeUV_textureSize*0.25) - 3.0;\nvec4 textureCubeUV(vec3 reflectedDirection, float roughness ) {\n    float roughnessVal = roughness* cubeUV_maxLods3;\n    float r1 = floor(roughnessVal);\n    float r2 = r1 + 1.0;\n    float t = fract(roughnessVal);\n    vec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);\n    float s = mipInfo.y;\n    float level0 = mipInfo.x;\n    float level1 = level0 + 1.0;\n    level1 = level1 > 5.0 ? 5.0 : level1;\n    level0 += min( floor( s + 0.5 ), 5.0 );\n    vec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);\n    vec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));\n    vec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);\n    vec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));\n    vec4 result = mix(color10, color20, t);\n    return vec4(result.rgb, 1.0);\n}\n#endif\n\nuniform vec3 ambientLightColor;\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\n\t}\n\n#endif\n\n\n#if NUM_POINT_LIGHTS > 0\n\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\n\t// directLight is an out parameter as having it as a return value caused compiler errors on some devices\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\n\t\tfloat lightDistance = length( lVector );\n\n\t\tif ( testLightInRange( lightDistance, pointLight.distance ) ) {\n\n\t\t\tdirectLight.color = pointLight.color;\n\t\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\n\t\t\tdirectLight.visible = true;\n\n\t\t} else {\n\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\n\t\t}\n\n\t}\n\n#endif\n\n\n#if NUM_SPOT_LIGHTS > 0\n\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\n\t// directLight is an out parameter as having it as a return value caused compiler errors on some devices\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\n\t\tif ( all( bvec2( angleCos > spotLight.coneCos, testLightInRange( lightDistance, spotLight.distance ) ) ) ) {\n\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\n\t\t\tdirectLight.visible = true;\n\n\t\t} else {\n\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\n\t\t}\n\n\t}\n\n#endif\n\n\n#if NUM_HEMI_LIGHTS > 0\n\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\n\t\t\tirradiance *= PI;\n\n\t\t#endif\n\n\t\treturn irradiance;\n\n\t}\n\n#endif\n#if defined( USE_ENVMAP ) && defined( STANDARD )\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tfloat flipNormal = ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t#else\n\t\t\tfloat flipNormal = 1.0;\n\t\t#endif\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = flipNormal * vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryVec = flipNormal * vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( queryVec, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar - 0.79248 - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in GeometricContext geometry, const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -geometry.viewDir, geometry.normal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -geometry.viewDir, geometry.normal, refractionRatio );\n\t\t#endif\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tfloat flipNormal = ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t#else\n\t\t\tfloat flipNormal = 1.0;\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryReflectVec = flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\tvec4 envMapColor = textureCubeUV(queryReflectVec, BlinnExponentToGGXRoughness(blinnShininessExponent));\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\t\tvec2 sampleUV;\n\t\t\tsampleUV.y = saturate( flipNormal * reflectVec.y * 0.5 + 0.5 );\n\t\t\tsampleUV.x = atan( flipNormal * reflectVec.z, flipNormal * reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n\t\t\t#endif\n\t\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\t\tvec3 reflectView = flipNormal * normalize((viewMatrix * vec4( reflectVec, 0.0 )).xyz + vec3(0.0,0.0,1.0));\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#endif\n\t\t#endif\n\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif\n\nstruct StandardMaterial {\n\tvec3\tdiffuseColor;\n\tfloat\tspecularRoughness;\n\tvec3\tspecularColor;\n};\nvoid RE_Direct_Standard( const in IncidentLight directLight, const in GeometricContext geometry, const in StandardMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );\n}\nvoid RE_IndirectDiffuse_Standard( const in vec3 irradiance, const in GeometricContext geometry, const in StandardMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Standard( const in vec3 radiance, const in GeometricContext geometry, const in StandardMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectSpecular += radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Standard\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Standard\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Standard\n#define Material_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.specularRoughness )\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}\n\n#ifdef USE_SHADOWMAP\n    #if NUM_DIR_LIGHTS > 0\n        uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHTS ];\n        varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n    #endif\n\n    #if NUM_SPOT_LIGHTS > 0\n        uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHTS ];\n        varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n    #endif\n\n    #if NUM_POINT_LIGHTS > 0\n        uniform sampler2D pointShadowMap[ NUM_POINT_LIGHTS ];\n        varying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n    #endif\n\n\tfloat unpackDepth( const in vec4 rgba_depth ) {\n\t\tconst vec4 bit_shift = vec4( 1.0 / ( 256.0 * 256.0 * 256.0 ), 1.0 / ( 256.0 * 256.0 ), 1.0 / 256.0, 1.0 );\n\t\treturn dot( rgba_depth, bit_shift );\n\t}\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackDepth( texture2D( depths, uv ) ) );\n\t}\n\tfloat texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\n\t\tconst vec2 offset = vec2( 0.0, 1.0 );\n\t\tvec2 texelSize = vec2( 1.0 ) / size;\n\t\tvec2 centroidUV = floor( uv * size + 0.5 ) / size;\n\t\tfloat lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\n\t\tfloat lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\n\t\tfloat rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\n\t\tfloat rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\n\t\tvec2 f = fract( uv * size + 0.5 );\n\t\tfloat a = mix( lb, lt, f.y );\n\t\tfloat b = mix( rb, rt, f.y );\n\t\tfloat c = mix( a, b, f.x );\n\t\treturn c;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\treturn (\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn 1.0;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\tfloat dp = ( length( lightToPosition ) - shadowBias ) / 1000.0;\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif\n\n#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = dFdx( surf_pos );\n\t\tvec3 vSigmaY = dFdy( surf_pos );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif\n\n#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 S = normalize( q0 * st1.t - q1 * st0.t );\n\t\tvec3 T = normalize( -q0 * st1.s + q1 * st0.s );\n\t\tvec3 N = normalize( surf_norm );\n\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\tmapN.xy = normalScale * mapN.xy;\n\t\tmat3 tsn = mat3( S, T, N );\n\t\treturn normalize( tsn * mapN );\n\t}\n#endif\n\n#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif\n#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif\n#ifdef USE_LOGDEPTHBUF\n\tuniform float logDepthBufFC;\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n#endif\n\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\n \tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\n\tvec3 totalEmissiveRadiance = emissive;\n\t#if defined(USE_LOGDEPTHBUF) && defined(USE_LOGDEPTHBUF_EXT)\n\tgl_FragDepthEXT = log2(vFragDepth) * logDepthBufFC * 0.5;\n#endif\n\t#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif\n\t#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif\n\t#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif\n\n\t#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif\n\n\tfloat specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif\n\tfloat roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.r;\n#endif\n\n\tfloat metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.r;\n#endif\n\n\t#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( -1.0 + 2.0 * float( gl_FrontFacing ) );\n\t#endif\n#endif\n#ifdef USE_NORMALMAP\n\tnormal = perturbNormal2Arb( -vViewPosition, normal );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif\n\n\t#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif\n\nStandardMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\nmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\n\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = normalize( vViewPosition );\nIncidentLight directLight;\n\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\n\tPointLight pointLight;\n\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\n\t\tpointLight = pointLights[ i ];\n\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\n\t}\n\n#endif\n\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\n\tSpotLight spotLight;\n\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\n\t\tspotLight = spotLights[ i ];\n\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\n\t}\n\n#endif\n\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\n\tDirectionalLight directionalLight;\n\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\n\t\tdirectionalLight = directionalLights[ i ];\n\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\n\t}\n\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#ifdef USE_LIGHTMAP\n\t\tvec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n    #if ( NUM_HEMI_LIGHTS > 0 )\n    \t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n    \t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n    \t\t}\n    \t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t \tirradiance += getLightProbeIndirectIrradiance( geometry, 8 );\n\t#endif\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tvec3 radiance = getLightProbeIndirectRadiance( geometry, Material_BlinnShininessExponent( material ), 8 );\n\tRE_IndirectSpecular( radiance, geometry, material, reflectedLight );\n#endif\n\n\t#if defined( USE_AOMAP ) || defined ( USE_SSAOMAP )\n    #ifdef USE_AOMAP\n\t   float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n       reflectedLight.indirectDiffuse *= ambientOcclusion;\n    #endif\n    #ifdef USE_SSAOMAP\n       vec2 screenPos = gl_FragCoord.xy / screenResolution;\n\t   float ambientOcclusion = texture2D( ssaoMap, screenPos ).r * ssaoMapIntensity;\n       reflectedLight.indirectDiffuse *= ambientOcclusion;\n    #endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif\n\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif\n\n\t#if defined( TONE_MAPPING )\n  gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif\n\n\t  gl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t#ifdef USE_FOG\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tfloat depth = gl_FragDepthEXT / gl_FragCoord.w;\n\t#else\n\t\tfloat depth = gl_FragCoord.z / gl_FragCoord.w;\n\t#endif\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * depth * depth * LOG2 ) );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, depth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n\n#endif\n\n// #ifdef USE_MAP\n//     gl_FragColor = texture2D( map, vUv );\n//     #endif\n// gl_FragColor.rgb = texture2D( ssaoMap, gl_FragCoord.xy / screenResolution ).rgb;\n}\n";
},function(t,e){t.exports="#define SHADER_NAME ShaderMaterial\n#define VERTEX_TEXTURES\n#define GAMMA_FACTOR 2\n#define MAX_BONES 251\n#define LEAF_AMPLITUDE 80.\n#define LEAF_PERIOD 1.\n#define TREE_AMPLITUDE 0.015\n#define TREE_PERIOD 0.8\n// uniform mat4 modelMatrix;\n// uniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform mat4 viewMatrix;\nuniform mat3 normalMatrix;\nuniform vec3 cameraPosition;\nuniform float time;\nattribute vec3 position;\nattribute vec3 normal;\nattribute vec2 uv;\n\nattribute vec4 transform1;\nattribute vec4 transform2;\nattribute vec4 transform3;\nvec4 transform4 = vec4(0.0, 0.0, 0.0, 1.0);\n\n#ifdef USE_COLOR\n\tattribute vec3 color;\n#endif\n#ifdef USE_MORPHTARGETS\n\tattribute vec3 morphTarget0;\n\tattribute vec3 morphTarget1;\n\tattribute vec3 morphTarget2;\n\tattribute vec3 morphTarget3;\n\t#ifdef USE_MORPHNORMALS\n\t\tattribute vec3 morphNormal0;\n\t\tattribute vec3 morphNormal1;\n\t\tattribute vec3 morphNormal2;\n\t\tattribute vec3 morphNormal3;\n\t#else\n\t\tattribute vec3 morphTarget4;\n\t\tattribute vec3 morphTarget5;\n\t\tattribute vec3 morphTarget6;\n\t\tattribute vec3 morphTarget7;\n\t#endif\n#endif\n#ifdef USE_SKINNING\n\tattribute vec4 skinIndex;\n\tattribute vec4 skinWeight;\n#endif\n\n#define STANDARD\n\n#define GAMMA_FACTOR 2\n\nvarying vec3 vViewPosition;\n#ifdef IS_FOLIAGE\nvarying float vDepth;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#define PI 3.14159\n#define PI2 6.28318\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\n\n#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n\tuniform vec4 offsetRepeat;\n#endif\n\n#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n#endif\n\n#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif\n\n#if defined( USE_ENVMAP ) && ! defined( USE_BUMPMAP ) && ! defined( USE_NORMALMAP ) && ! defined( PHONG ) && ! defined( STANDARD )\n\tvarying vec3 vReflect;\n\tuniform float refractionRatio;\n#endif\n\n#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif\n#ifdef USE_MORPHTARGETS\n\t#ifndef USE_MORPHNORMALS\n\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif\n#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform sampler2D boneTexture;\n\t\tuniform int boneTextureWidth;\n\t\tuniform int boneTextureHeight;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureWidth ) );\n\t\t\tfloat y = floor( j / float( boneTextureWidth ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureWidth );\n\t\t\tfloat dy = 1.0 / float( boneTextureHeight );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneGlobalMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneGlobalMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif\n\n#ifdef USE_SHADOWMAP\n\n\t#if NUM_DIR_LIGHTS > 0\n\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\n\t#endif\n\n\t#if NUM_SPOT_LIGHTS > 0\n\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\n\t#endif\n\n\t#if NUM_POINT_LIGHTS > 0\n\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\n\t#endif\n\n#endif\n\n#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif\n#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n\tuniform float logDepthBufFC;\n#endif\n\nhighp mat4 transpose(in highp mat4 inMatrix) {\n    highp vec4 i0 = inMatrix[0];\n    highp vec4 i1 = inMatrix[1];\n    highp vec4 i2 = inMatrix[2];\n    highp vec4 i3 = inMatrix[3];\n\n    highp mat4 outMatrix = mat4(\n         vec4(i0.x, i1.x, i2.x, i3.x),\n         vec4(i0.y, i1.y, i2.y, i3.y),\n         vec4(i0.z, i1.z, i2.z, i3.z),\n         vec4(i0.w, i1.w, i2.w, i3.w)\n         );\n\n    return outMatrix;\n}\n\nvoid main() {\n    mat4 modelMatrix = transpose(mat4(transform1, transform2, transform3, transform4));\n    mat4 modelViewMatrix = viewMatrix * modelMatrix;\n\t#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvUv = uv * offsetRepeat.zw + offsetRepeat.xy;\n#endif\n\t#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = uv2;\n#endif\n\t#ifdef USE_COLOR\n\tvColor.xyz = color.xyz;\n#endif\n\nvec3 tr1 = vec3(transform1.x, transform2.x, transform3.x);\nvec3 tr2 = vec3(transform1.y, transform2.y, transform3.y);\nvec3 tr3 = vec3(transform1.z, transform2.z, transform3.z);\n\nvec3 objectNormal = mat3(tr1, tr2, tr3) * vec3( normal );\n\n#ifdef USE_MORPHNORMALS\n\tobjectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n\tobjectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n\tobjectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n\tobjectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n#endif\n\n#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif\n#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n#endif\n\n#ifdef FLIP_SIDED\n\tobjectNormal = -objectNormal;\n#endif\nvec3 transformedNormal = normalMatrix * objectNormal;\n\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\nvec3 transformed = vec3( position );\n\n#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normal * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\n#endif\n\n#ifdef USE_MORPHTARGETS\n\ttransformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n\ttransformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n\ttransformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n\ttransformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\ttransformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n\ttransformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n\ttransformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n\ttransformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\t#endif\n#endif\n\n#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\tskinned  = bindMatrixInverse * skinned;\n#endif\n\n\n#if defined( IS_TREE ) || defined( IS_FOLIAGE )\nfloat randSeed = transform1.w + transform2.w + transform3.w;\nfloat randomVal = fract(sin(randSeed * 12356.332));\ntransformed.x += randomVal * TREE_AMPLITUDE * cos(time * TREE_PERIOD + randomVal * 20.) * transformed.z;\ntransformed.y += randomVal * TREE_AMPLITUDE * sin(time * TREE_PERIOD + randomVal * 20.) * transformed.z;\n#endif\n#ifdef IS_FOLIAGE\ntransformed += LEAF_AMPLITUDE * normal * cos(time * LEAF_PERIOD + randomVal * 7.) * uv.y;\n#endif\n\n#ifdef USE_SKINNING\n\tvec4 mvPosition = modelViewMatrix * skinned;\n#else\n\tvec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\n#endif\ngl_Position = projectionMatrix * mvPosition;\n\n#ifdef USE_LOGDEPTHBUF\n\tgl_Position.z = log2(max( EPSILON, gl_Position.w + 1.0 )) * logDepthBufFC;\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t#else\n\t\tgl_Position.z = (gl_Position.z - 1.0) * gl_Position.w;\n\t#endif\n#endif\n\n\tvViewPosition = - mvPosition.xyz;\n#if defined( USE_ENVMAP ) || defined( PHONG ) || defined( STANDARD ) || defined( LAMBERT ) || defined ( USE_SHADOWMAP )\n\t#ifdef USE_SKINNING\n\t\tvec4 worldPosition = modelMatrix * skinned;\n\t#else\n\t\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\n\t#endif\n#endif\nworldPosition.y += time * 1000.;\n#if defined( USE_ENVMAP ) && ! defined( USE_BUMPMAP ) && ! defined( USE_NORMALMAP ) && ! defined( PHONG ) && ! defined( STANDARD )\n\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t#ifdef ENVMAP_MODE_REFLECTION\n\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t#else\n\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t#endif\n#endif\n\n#ifdef USE_SHADOWMAP\n    #if NUM_DIR_LIGHTS > 0\n    \tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n    \t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\n    \t}\n\t#endif\n\n\t#if NUM_SPOT_LIGHTS > 0\n    \tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n    \t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\n    \t}\n\t#endif\n\n\t#if NUM_POINT_LIGHTS > 0\n    \tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n    \t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\n    \t}\n\t#endif\n#endif\n\n#ifdef IS_FOLIAGE\nvDepth = (gl_Position.z / gl_Position.w) * 0.5 + 0.5;\n#endif\n}\n"},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=n(24),a=function(){function t(e,n){r(this,t),this.materialDecorator=n,this.model=e}return i(t,[{key:"batchSameGeomIdUndecoratedMeshes",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.batchMeshesWithChildren,r=e.excludeIfNameContains,i=this._formSameGeomObjectsArray(this.model,n,r);i.forEach(function(e){e.length>1&&t._prepBatchFromObjectList(t.model,e,n)})}},{key:"_formSameGeomObjectsArray",value:function(t,e,n){var r=[],i=void 0,o=0;return t.traverse(function(t){for(i=!1,o=0;o<n.length;o++)t.name.includes(n[o])&&(i=!0);if(t instanceof THREE.Mesh&&(!n||!i)&&(e||!t.children||0===t.children.length)){var a=!1;for(o=0;o<r.length;o++)if(r[o][0].geometry.uuid===t.geometry.uuid){r[o].push(t),a=!0;break}a||r.push([t])}}),r}},{key:"formBatchFromMeshAndTransforms",value:function(t,e){var n=this.materialDecorator.rewriteInstancedMaterial(t.material),r=t.material;t.material=n;var i=o.buildFromTransforms(e,t,t.name+"_instancedMesh",new THREE.Vector3(0,0,0),1e4,1e4,1e4);return t.material=r,i}},{key:"_prepBatchFromObjectList",value:function(t,e,n){var r=e.slice(),i=e[0],a=this.materialDecorator.rewriteInstancedMaterial(i.material);i.material=a;var u=o.buildInBox(e,i,i.name+"_instancedMesh",new THREE.Vector3(0,0,0),1e4,1e4,1e4);if(t.add(u),n)for(var s=r.length-1;s>=0;s--){var c=r[s];if(c.children||c.children.length>0)for(var l=c.children.length-1;l>=0;l--){var f=c.children[l];c.remove(f),f.matrix.premultiply(c.matrix),f.matrix.decompose(f.position,f.quaternion,f.scale),c.parent.add(f),f.matrixWorldNeedsUpdate=!0}c.parent.remove(c),r[s]=null}else for(var d=r.length-1;d>=0;d--)r[d].parent.remove(r[d]),r[d]=null}},{key:"propagateTransforms",value:function(t,e){for(var n={transformArray1:[],transformArray2:[],transformArray3:[]},r=new THREE.Matrix4,i=new THREE.Matrix4,o=e.transformArray1,a=e.transformArray2,u=e.transformArray3,s=0;s<o.length;s+=4){r.set(o[s],o[s+1],o[s+2],o[s+3],a[s],a[s+1],a[s+2],a[s+3],u[s],u[s+1],u[s+2],u[s+3],0,0,0,1);for(var c=0;c<t.length;c++)i.multiplyMatrices(r,t[c].matrixWorld),n.transformArray1.push(i.elements[0],i.elements[4],i.elements[8],i.elements[12]),n.transformArray2.push(i.elements[1],i.elements[5],i.elements[9],i.elements[13]),n.transformArray3.push(i.elements[2],i.elements[6],i.elements[10],i.elements[14])}return n}},{key:"removeEmptyObjectsFromScene",value:function(){var t=[];this.model.traverse(function(e){"Object3D"!==e.type||e.children&&0!==e.children.length||t.push(e)});for(var e=t.length-1;e>=0;e--)t[e].parent.remove(t[e]),t[e]=null}}]),t}();e.default=a},function(t,e,n){"use strict";function r(t,e,n,r){var i=new THREE.Vector3(-e/2,0,-r/2),o=new THREE.Vector3(e/2,n,r/2);return i.add(t),o.add(t),new THREE.Box3(i,o)}function i(t){var e=new THREE.InstancedBufferGeometry;return e.setIndex(t.geometry.index),u.each(t.geometry.attributes,function(t,n){return e.addAttribute(n,t)}),e.groups=[],t.geometry.groups.forEach(function(t){return e.addGroup(t.start,t.count,t.materialIndex)}),e}function o(t,e,n){for(var r=[],i=new THREE.Vector3,o=0,a=t.length;o<a;o++)t[o].updateMatrixWorld(!0),t[o].getWorldPosition(i),e.containsPoint(i)?r.push(t[o].matrixWorld.elements):n.push(t[o].matrixWorld.elements);return r}function a(t,e,n,r,i){for(var o=[],a=[],u=[],s=0;s<n.length;s++)o.push(n[s][0]),a.push(n[s][1]),u.push(n[s][2]),o.push(n[s][4]),a.push(n[s][5]),u.push(n[s][6]),o.push(n[s][8]),a.push(n[s][9]),u.push(n[s][10]),o.push(n[s][12]),a.push(n[s][13]),u.push(n[s][14]);var c=new THREE.InstancedBufferAttribute(new Float32Array(o),4,1,!1);t.addAttribute("transform1",c);var l=new THREE.InstancedBufferAttribute(new Float32Array(a),4,1,!1);t.addAttribute("transform2",l);var f=new THREE.InstancedBufferAttribute(new Float32Array(u),4,1,!1);t.addAttribute("transform3",f),t.boundingBox=r,t.boundingSphere=r.getBoundingSphere();var d=new THREE.Mesh(t,e);return d.name=i,d}var u=n(25);e.buildInBox=function(t,e,n,u,s,c,l){var f=[],d=r(u,s,c,l),p=i(e),h=o(t,d,f),v=a(p,e.material,h,d,n);return v},e.buildFromTransforms=function(t,e,n,o,a,u,s){var c=r(o,a,u,s),l=i(e),f=new THREE.InstancedBufferAttribute(new Float32Array(t.transformArray1),4,1,!1);l.addAttribute("transform1",f);var d=new THREE.InstancedBufferAttribute(new Float32Array(t.transformArray2),4,1,!1);l.addAttribute("transform2",d);var p=new THREE.InstancedBufferAttribute(new Float32Array(t.transformArray3),4,1,!1);l.addAttribute("transform3",p),l.boundingBox=c,l.boundingSphere=c.getBoundingSphere();var h=new THREE.Mesh(l,e.material);return h.name=n,h},e.addCustomInstanceAttribute=function(t,e,n,r,i,o){for(var a=e.geometry,s=a.attributes.transform1.count,c=i.length/n,l=[],f=0,d=0;f<s;f+=r){d=o?u.random(c-1):d<c?d:0;for(var p=0;p<n;p++)l.push(i[d*n+p]);d++}var h=new THREE.InstancedBufferAttribute(new Float32Array(l),n,r,!1);a.addAttribute(t,h)}},function(t,e,n){var r;(function(t,i){(function(){function o(t,e){return t.set(e[0],e[1]),t}function a(t,e){return t.add(e),t}function u(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function s(t,e,n,r){for(var i=-1,o=null==t?0:t.length;++i<o;){var a=t[i];e(r,a,n(a),t)}return r}function c(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&e(t[n],n,t)!==!1;);return t}function l(t,e){for(var n=null==t?0:t.length;n--&&e(t[n],n,t)!==!1;);return t}function f(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}function d(t,e){for(var n=-1,r=null==t?0:t.length,i=0,o=[];++n<r;){var a=t[n];e(a,n,t)&&(o[i++]=a)}return o}function p(t,e){var n=null==t?0:t.length;return!!n&&S(t,e,0)>-1}function h(t,e,n){for(var r=-1,i=null==t?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}function v(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}function m(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}function g(t,e,n,r){var i=-1,o=null==t?0:t.length;for(r&&o&&(n=t[++i]);++i<o;)n=e(n,t[i],i,t);return n}function _(t,e,n,r){var i=null==t?0:t.length;for(r&&i&&(n=t[--i]);i--;)n=e(n,t[i],i,t);return n}function y(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}function x(t){return t.split("")}function w(t){return t.match(Ge)||[]}function b(t,e,n){var r;return n(t,function(t,n,i){if(e(t,n,i))return r=n,!1}),r}function E(t,e,n,r){for(var i=t.length,o=n+(r?1:-1);r?o--:++o<i;)if(e(t[o],o,t))return o;return-1}function S(t,e,n){return e===e?$(t,e,n):E(t,T,n)}function M(t,e,n,r){for(var i=n-1,o=t.length;++i<o;)if(r(t[i],e))return i;return-1}function T(t){return t!==t}function P(t,e){var n=null==t?0:t.length;return n?C(t,e)/n:Ht}function L(t){return function(e){return null==e?it:e[t]}}function R(t){return function(e){return null==t?it:t[e]}}function A(t,e,n,r,i){return i(t,function(t,i,o){n=r?(r=!1,t):e(n,t,i,o)}),n}function D(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}function C(t,e){for(var n,r=-1,i=t.length;++r<i;){var o=e(t[r]);o!==it&&(n=n===it?o:n+o)}return n}function O(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}function I(t,e){return v(e,function(e){return[e,t[e]]})}function N(t){return function(e){return t(e)}}function U(t,e){return v(e,function(e){return t[e]})}function H(t,e){return t.has(e)}function z(t,e){for(var n=-1,r=t.length;++n<r&&S(e,t[n],0)>-1;);return n}function k(t,e){for(var n=t.length;n--&&S(e,t[n],0)>-1;);return n}function V(t,e){for(var n=t.length,r=0;n--;)t[n]===e&&++r;return r}function F(t){return"\\"+nr[t]}function j(t,e){return null==t?it:t[e]}function G(t){return Yn.test(t)}function B(t){return qn.test(t)}function W(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}function X(t){var e=-1,n=Array(t.size);return t.forEach(function(t,r){n[++e]=[r,t]}),n}function Y(t,e){return function(n){return t(e(n))}}function q(t,e){for(var n=-1,r=t.length,i=0,o=[];++n<r;){var a=t[n];a!==e&&a!==ft||(t[n]=ft,o[i++]=n)}return o}function Z(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n}function K(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=[t,t]}),n}function $(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}function Q(t,e,n){for(var r=n+1;r--;)if(t[r]===e)return r;return r}function J(t){return G(t)?et(t):yr(t)}function tt(t){return G(t)?nt(t):x(t)}function et(t){for(var e=Wn.lastIndex=0;Wn.test(t);)++e;return e}function nt(t){return t.match(Wn)||[]}function rt(t){return t.match(Xn)||[]}var it,ot="4.17.4",at=200,ut="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",st="Expected a function",ct="__lodash_hash_undefined__",lt=500,ft="__lodash_placeholder__",dt=1,pt=2,ht=4,vt=1,mt=2,gt=1,_t=2,yt=4,xt=8,wt=16,bt=32,Et=64,St=128,Mt=256,Tt=512,Pt=30,Lt="...",Rt=800,At=16,Dt=1,Ct=2,Ot=3,It=1/0,Nt=9007199254740991,Ut=1.7976931348623157e308,Ht=NaN,zt=4294967295,kt=zt-1,Vt=zt>>>1,Ft=[["ary",St],["bind",gt],["bindKey",_t],["curry",xt],["curryRight",wt],["flip",Tt],["partial",bt],["partialRight",Et],["rearg",Mt]],jt="[object Arguments]",Gt="[object Array]",Bt="[object AsyncFunction]",Wt="[object Boolean]",Xt="[object Date]",Yt="[object DOMException]",qt="[object Error]",Zt="[object Function]",Kt="[object GeneratorFunction]",$t="[object Map]",Qt="[object Number]",Jt="[object Null]",te="[object Object]",ee="[object Promise]",ne="[object Proxy]",re="[object RegExp]",ie="[object Set]",oe="[object String]",ae="[object Symbol]",ue="[object Undefined]",se="[object WeakMap]",ce="[object WeakSet]",le="[object ArrayBuffer]",fe="[object DataView]",de="[object Float32Array]",pe="[object Float64Array]",he="[object Int8Array]",ve="[object Int16Array]",me="[object Int32Array]",ge="[object Uint8Array]",_e="[object Uint8ClampedArray]",ye="[object Uint16Array]",xe="[object Uint32Array]",we=/\b__p \+= '';/g,be=/\b(__p \+=) '' \+/g,Ee=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Se=/&(?:amp|lt|gt|quot|#39);/g,Me=/[&<>"']/g,Te=RegExp(Se.source),Pe=RegExp(Me.source),Le=/<%-([\s\S]+?)%>/g,Re=/<%([\s\S]+?)%>/g,Ae=/<%=([\s\S]+?)%>/g,De=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ce=/^\w*$/,Oe=/^\./,Ie=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ne=/[\\^$.*+?()[\]{}|]/g,Ue=RegExp(Ne.source),He=/^\s+|\s+$/g,ze=/^\s+/,ke=/\s+$/,Ve=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Fe=/\{\n\/\* \[wrapped with (.+)\] \*/,je=/,? & /,Ge=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Be=/\\(\\)?/g,We=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Xe=/\w*$/,Ye=/^[-+]0x[0-9a-f]+$/i,qe=/^0b[01]+$/i,Ze=/^\[object .+?Constructor\]$/,Ke=/^0o[0-7]+$/i,$e=/^(?:0|[1-9]\d*)$/,Qe=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Je=/($^)/,tn=/['\n\r\u2028\u2029\\]/g,en="\\ud800-\\udfff",nn="\\u0300-\\u036f",rn="\\ufe20-\\ufe2f",on="\\u20d0-\\u20ff",an=nn+rn+on,un="\\u2700-\\u27bf",sn="a-z\\xdf-\\xf6\\xf8-\\xff",cn="\\xac\\xb1\\xd7\\xf7",ln="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",fn="\\u2000-\\u206f",dn=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",pn="A-Z\\xc0-\\xd6\\xd8-\\xde",hn="\\ufe0e\\ufe0f",vn=cn+ln+fn+dn,mn="[']",gn="["+en+"]",_n="["+vn+"]",yn="["+an+"]",xn="\\d+",wn="["+un+"]",bn="["+sn+"]",En="[^"+en+vn+xn+un+sn+pn+"]",Sn="\\ud83c[\\udffb-\\udfff]",Mn="(?:"+yn+"|"+Sn+")",Tn="[^"+en+"]",Pn="(?:\\ud83c[\\udde6-\\uddff]){2}",Ln="[\\ud800-\\udbff][\\udc00-\\udfff]",Rn="["+pn+"]",An="\\u200d",Dn="(?:"+bn+"|"+En+")",Cn="(?:"+Rn+"|"+En+")",On="(?:"+mn+"(?:d|ll|m|re|s|t|ve))?",In="(?:"+mn+"(?:D|LL|M|RE|S|T|VE))?",Nn=Mn+"?",Un="["+hn+"]?",Hn="(?:"+An+"(?:"+[Tn,Pn,Ln].join("|")+")"+Un+Nn+")*",zn="\\d*(?:(?:1st|2nd|3rd|(?![123])\\dth)\\b)",kn="\\d*(?:(?:1ST|2ND|3RD|(?![123])\\dTH)\\b)",Vn=Un+Nn+Hn,Fn="(?:"+[wn,Pn,Ln].join("|")+")"+Vn,jn="(?:"+[Tn+yn+"?",yn,Pn,Ln,gn].join("|")+")",Gn=RegExp(mn,"g"),Bn=RegExp(yn,"g"),Wn=RegExp(Sn+"(?="+Sn+")|"+jn+Vn,"g"),Xn=RegExp([Rn+"?"+bn+"+"+On+"(?="+[_n,Rn,"$"].join("|")+")",Cn+"+"+In+"(?="+[_n,Rn+Dn,"$"].join("|")+")",Rn+"?"+Dn+"+"+On,Rn+"+"+In,kn,zn,xn,Fn].join("|"),"g"),Yn=RegExp("["+An+en+an+hn+"]"),qn=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Zn=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Kn=-1,$n={};$n[de]=$n[pe]=$n[he]=$n[ve]=$n[me]=$n[ge]=$n[_e]=$n[ye]=$n[xe]=!0,$n[jt]=$n[Gt]=$n[le]=$n[Wt]=$n[fe]=$n[Xt]=$n[qt]=$n[Zt]=$n[$t]=$n[Qt]=$n[te]=$n[re]=$n[ie]=$n[oe]=$n[se]=!1;var Qn={};Qn[jt]=Qn[Gt]=Qn[le]=Qn[fe]=Qn[Wt]=Qn[Xt]=Qn[de]=Qn[pe]=Qn[he]=Qn[ve]=Qn[me]=Qn[$t]=Qn[Qt]=Qn[te]=Qn[re]=Qn[ie]=Qn[oe]=Qn[ae]=Qn[ge]=Qn[_e]=Qn[ye]=Qn[xe]=!0,Qn[qt]=Qn[Zt]=Qn[se]=!1;var Jn={"":"A","":"A","":"A","":"A","":"A","":"A","":"a","":"a","":"a","":"a","":"a","":"a","":"C","":"c","":"D","":"d","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"N","":"n","":"O","":"O","":"O","":"O","":"O","":"O","":"o","":"o","":"o","":"o","":"o","":"o","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"Y","":"y","":"y","":"Ae","":"ae","":"Th","":"th","":"ss","":"A","":"A","":"A","":"a","":"a","":"a","":"C","":"C","":"C","":"C","":"c","":"c","":"c","":"c","":"D","":"D","":"d","":"d","":"E","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"e","":"G","":"G","":"G","":"G","":"g","":"g","":"g","":"g","":"H","":"H","":"h","":"h","":"I","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"i","":"J","":"j","":"K","":"k","":"k","":"L","":"L","":"L","":"L","":"L","":"l","":"l","":"l","":"l","":"l","":"N","":"N","":"N","":"N","":"n","":"n","":"n","":"n","":"O","":"O","":"O","":"o","":"o","":"o","":"R","":"R","":"R","":"r","":"r","":"r","":"S","":"S","":"S","":"S","":"s","":"s","":"s","":"s","":"T","":"T","":"T","":"t","":"t","":"t","":"U","":"U","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"u","":"u","":"W","":"w","":"Y","":"y","":"Y","":"Z","":"Z","":"Z","":"z","":"z","":"z","":"IJ","":"ij","":"Oe","":"oe","":"'n","":"s"},tr={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},er={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},nr={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},rr=parseFloat,ir=parseInt,or="object"==typeof t&&t&&t.Object===Object&&t,ar="object"==typeof self&&self&&self.Object===Object&&self,ur=or||ar||Function("return this")(),sr="object"==typeof e&&e&&!e.nodeType&&e,cr=sr&&"object"==typeof i&&i&&!i.nodeType&&i,lr=cr&&cr.exports===sr,fr=lr&&or.process,dr=function(){try{return fr&&fr.binding&&fr.binding("util")}catch(t){}}(),pr=dr&&dr.isArrayBuffer,hr=dr&&dr.isDate,vr=dr&&dr.isMap,mr=dr&&dr.isRegExp,gr=dr&&dr.isSet,_r=dr&&dr.isTypedArray,yr=L("length"),xr=R(Jn),wr=R(tr),br=R(er),Er=function t(e){function n(t){if(cs(t)&&!wd(t)&&!(t instanceof x)){if(t instanceof i)return t;if(xl.call(t,"__wrapped__"))return aa(t)}return new i(t)}function r(){}function i(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=it}function x(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=zt,this.__views__=[]}function R(){var t=new x(this.__wrapped__);return t.__actions__=Vi(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=Vi(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=Vi(this.__views__),t}function $(){if(this.__filtered__){var t=new x(this);t.__dir__=-1,t.__filtered__=!0}else t=this.clone(),t.__dir__*=-1;return t}function et(){var t=this.__wrapped__.value(),e=this.__dir__,n=wd(t),r=e<0,i=n?t.length:0,o=Ao(0,i,this.__views__),a=o.start,u=o.end,s=u-a,c=r?u:a-1,l=this.__iteratees__,f=l.length,d=0,p=Kl(s,this.__takeCount__);if(!n||!r&&i==s&&p==s)return wi(t,this.__actions__);var h=[];t:for(;s--&&d<p;){c+=e;for(var v=-1,m=t[c];++v<f;){var g=l[v],_=g.iteratee,y=g.type,x=_(m);if(y==Ct)m=x;else if(!x){if(y==Dt)continue t;break t}}h[d++]=m}return h}function nt(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Ge(){this.__data__=uf?uf(null):{},this.size=0}function en(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}function nn(t){var e=this.__data__;if(uf){var n=e[t];return n===ct?it:n}return xl.call(e,t)?e[t]:it}function rn(t){var e=this.__data__;return uf?e[t]!==it:xl.call(e,t)}function on(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=uf&&e===it?ct:e,this}function an(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function un(){this.__data__=[],this.size=0}function sn(t){var e=this.__data__,n=On(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():Il.call(e,n,1),--this.size,!0}function cn(t){var e=this.__data__,n=On(e,t);return n<0?it:e[n][1]}function ln(t){return On(this.__data__,t)>-1}function fn(t,e){var n=this.__data__,r=On(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}function dn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function pn(){this.size=0,this.__data__={hash:new nt,map:new(nf||an),string:new nt}}function hn(t){var e=To(this,t).delete(t);return this.size-=e?1:0,e}function vn(t){return To(this,t).get(t)}function mn(t){return To(this,t).has(t)}function gn(t,e){var n=To(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}function _n(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new dn;++e<n;)this.add(t[e])}function yn(t){return this.__data__.set(t,ct),this}function xn(t){return this.__data__.has(t)}function wn(t){var e=this.__data__=new an(t);this.size=e.size}function bn(){this.__data__=new an,this.size=0}function En(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}function Sn(t){return this.__data__.get(t)}function Mn(t){return this.__data__.has(t)}function Tn(t,e){var n=this.__data__;if(n instanceof an){var r=n.__data__;if(!nf||r.length<at-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new dn(r)}return n.set(t,e),this.size=n.size,this}function Pn(t,e){var n=wd(t),r=!n&&xd(t),i=!n&&!r&&Ed(t),o=!n&&!r&&!i&&Ld(t),a=n||r||i||o,u=a?O(t.length,pl):[],s=u.length;for(var c in t)!e&&!xl.call(t,c)||a&&("length"==c||i&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||zo(c,s))||u.push(c);return u}function Ln(t){var e=t.length;return e?t[ni(0,e-1)]:it}function Rn(t,e){return na(Vi(t),kn(e,0,t.length))}function An(t){return na(Vi(t))}function Dn(t,e,n){(n===it||Zu(t[e],n))&&(n!==it||e in t)||Hn(t,e,n)}function Cn(t,e,n){var r=t[e];xl.call(t,e)&&Zu(r,n)&&(n!==it||e in t)||Hn(t,e,n)}function On(t,e){for(var n=t.length;n--;)if(Zu(t[n][0],e))return n;return-1}function In(t,e,n,r){return yf(t,function(t,i,o){e(r,t,n(t),o)}),r}function Nn(t,e){return t&&Fi(e,Bs(e),t)}function Un(t,e){return t&&Fi(e,Ws(e),t)}function Hn(t,e,n){"__proto__"==e&&zl?zl(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function zn(t,e){for(var n=-1,r=e.length,i=al(r),o=null==t;++n<r;)i[n]=o?it:Fs(t,e[n]);return i}function kn(t,e,n){return t===t&&(n!==it&&(t=t<=n?t:n),e!==it&&(t=t>=e?t:e)),t}function Vn(t,e,n,r,i,o){var a,u=e&dt,s=e&pt,l=e&ht;if(n&&(a=i?n(t,r,i,o):n(t)),a!==it)return a;if(!ss(t))return t;var f=wd(t);if(f){if(a=Oo(t),!u)return Vi(t,a);
}else{var d=Df(t),p=d==Zt||d==Kt;if(Ed(t))return Li(t,u);if(d==te||d==jt||p&&!i){if(a=s||p?{}:Io(t),!u)return s?Gi(t,Un(a,t)):ji(t,Nn(a,t))}else{if(!Qn[d])return i?t:{};a=No(t,d,Vn,u)}}o||(o=new wn);var h=o.get(t);if(h)return h;o.set(t,a);var v=l?s?bo:wo:s?Ws:Bs,m=f?it:v(t);return c(m||t,function(r,i){m&&(i=r,r=t[i]),Cn(a,i,Vn(r,e,n,i,t,o))}),a}function Fn(t){var e=Bs(t);return function(n){return jn(n,t,e)}}function jn(t,e,n){var r=n.length;if(null==t)return!r;for(t=fl(t);r--;){var i=n[r],o=e[i],a=t[i];if(a===it&&!(i in t)||!o(a))return!1}return!0}function Wn(t,e,n){if("function"!=typeof t)throw new hl(st);return If(function(){t.apply(it,n)},e)}function Xn(t,e,n,r){var i=-1,o=p,a=!0,u=t.length,s=[],c=e.length;if(!u)return s;n&&(e=v(e,N(n))),r?(o=h,a=!1):e.length>=at&&(o=H,a=!1,e=new _n(e));t:for(;++i<u;){var l=t[i],f=null==n?l:n(l);if(l=r||0!==l?l:0,a&&f===f){for(var d=c;d--;)if(e[d]===f)continue t;s.push(l)}else o(e,f,r)||s.push(l)}return s}function Yn(t,e){var n=!0;return yf(t,function(t,r,i){return n=!!e(t,r,i)}),n}function qn(t,e,n){for(var r=-1,i=t.length;++r<i;){var o=t[r],a=e(o);if(null!=a&&(u===it?a===a&&!xs(a):n(a,u)))var u=a,s=o}return s}function Jn(t,e,n,r){var i=t.length;for(n=Ts(n),n<0&&(n=-n>i?0:i+n),r=r===it||r>i?i:Ts(r),r<0&&(r+=i),r=n>r?0:Ps(r);n<r;)t[n++]=e;return t}function tr(t,e){var n=[];return yf(t,function(t,r,i){e(t,r,i)&&n.push(t)}),n}function er(t,e,n,r,i){var o=-1,a=t.length;for(n||(n=Ho),i||(i=[]);++o<a;){var u=t[o];e>0&&n(u)?e>1?er(u,e-1,n,r,i):m(i,u):r||(i[i.length]=u)}return i}function nr(t,e){return t&&wf(t,e,Bs)}function or(t,e){return t&&bf(t,e,Bs)}function ar(t,e){return d(e,function(e){return os(t[e])})}function sr(t,e){e=Ti(e,t);for(var n=0,r=e.length;null!=t&&n<r;)t=t[ra(e[n++])];return n&&n==r?t:it}function cr(t,e,n){var r=e(t);return wd(t)?r:m(r,n(t))}function fr(t){return null==t?t===it?ue:Jt:Hl&&Hl in fl(t)?Ro(t):Ko(t)}function dr(t,e){return t>e}function yr(t,e){return null!=t&&xl.call(t,e)}function Er(t,e){return null!=t&&e in fl(t)}function Mr(t,e,n){return t>=Kl(e,n)&&t<Zl(e,n)}function Tr(t,e,n){for(var r=n?h:p,i=t[0].length,o=t.length,a=o,u=al(o),s=1/0,c=[];a--;){var l=t[a];a&&e&&(l=v(l,N(e))),s=Kl(l.length,s),u[a]=!n&&(e||i>=120&&l.length>=120)?new _n(a&&l):it}l=t[0];var f=-1,d=u[0];t:for(;++f<i&&c.length<s;){var m=l[f],g=e?e(m):m;if(m=n||0!==m?m:0,!(d?H(d,g):r(c,g,n))){for(a=o;--a;){var _=u[a];if(!(_?H(_,g):r(t[a],g,n)))continue t}d&&d.push(g),c.push(m)}}return c}function Pr(t,e,n,r){return nr(t,function(t,i,o){e(r,n(t),i,o)}),r}function Lr(t,e,n){e=Ti(e,t),t=Qo(t,e);var r=null==t?t:t[ra(Ma(e))];return null==r?it:u(r,t,n)}function Rr(t){return cs(t)&&fr(t)==jt}function Ar(t){return cs(t)&&fr(t)==le}function Dr(t){return cs(t)&&fr(t)==Xt}function Cr(t,e,n,r,i){return t===e||(null==t||null==e||!cs(t)&&!cs(e)?t!==t&&e!==e:Or(t,e,n,r,Cr,i))}function Or(t,e,n,r,i,o){var a=wd(t),u=wd(e),s=a?Gt:Df(t),c=u?Gt:Df(e);s=s==jt?te:s,c=c==jt?te:c;var l=s==te,f=c==te,d=s==c;if(d&&Ed(t)){if(!Ed(e))return!1;a=!0,l=!1}if(d&&!l)return o||(o=new wn),a||Ld(t)?go(t,e,n,r,i,o):_o(t,e,s,n,r,i,o);if(!(n&vt)){var p=l&&xl.call(t,"__wrapped__"),h=f&&xl.call(e,"__wrapped__");if(p||h){var v=p?t.value():t,m=h?e.value():e;return o||(o=new wn),i(v,m,n,r,o)}}return!!d&&(o||(o=new wn),yo(t,e,n,r,i,o))}function Ir(t){return cs(t)&&Df(t)==$t}function Nr(t,e,n,r){var i=n.length,o=i,a=!r;if(null==t)return!o;for(t=fl(t);i--;){var u=n[i];if(a&&u[2]?u[1]!==t[u[0]]:!(u[0]in t))return!1}for(;++i<o;){u=n[i];var s=u[0],c=t[s],l=u[1];if(a&&u[2]){if(c===it&&!(s in t))return!1}else{var f=new wn;if(r)var d=r(c,l,s,t,e,f);if(!(d===it?Cr(l,c,vt|mt,r,f):d))return!1}}return!0}function Ur(t){if(!ss(t)||Go(t))return!1;var e=os(t)?Tl:Ze;return e.test(ia(t))}function Hr(t){return cs(t)&&fr(t)==re}function zr(t){return cs(t)&&Df(t)==ie}function kr(t){return cs(t)&&us(t.length)&&!!$n[fr(t)]}function Vr(t){return"function"==typeof t?t:null==t?Ic:"object"==typeof t?wd(t)?Xr(t[0],t[1]):Wr(t):jc(t)}function Fr(t){if(!Bo(t))return ql(t);var e=[];for(var n in fl(t))xl.call(t,n)&&"constructor"!=n&&e.push(n);return e}function jr(t){if(!ss(t))return Zo(t);var e=Bo(t),n=[];for(var r in t)("constructor"!=r||!e&&xl.call(t,r))&&n.push(r);return n}function Gr(t,e){return t<e}function Br(t,e){var n=-1,r=Ku(t)?al(t.length):[];return yf(t,function(t,i,o){r[++n]=e(t,i,o)}),r}function Wr(t){var e=Po(t);return 1==e.length&&e[0][2]?Xo(e[0][0],e[0][1]):function(n){return n===t||Nr(n,t,e)}}function Xr(t,e){return Vo(t)&&Wo(e)?Xo(ra(t),e):function(n){var r=Fs(n,t);return r===it&&r===e?Gs(n,t):Cr(e,r,vt|mt)}}function Yr(t,e,n,r,i){t!==e&&wf(e,function(o,a){if(ss(o))i||(i=new wn),qr(t,e,a,n,Yr,r,i);else{var u=r?r(t[a],o,a+"",t,e,i):it;u===it&&(u=o),Dn(t,a,u)}},Ws)}function qr(t,e,n,r,i,o,a){var u=t[n],s=e[n],c=a.get(s);if(c)return void Dn(t,n,c);var l=o?o(u,s,n+"",t,e,a):it,f=l===it;if(f){var d=wd(s),p=!d&&Ed(s),h=!d&&!p&&Ld(s);l=s,d||p||h?wd(u)?l=u:$u(u)?l=Vi(u):p?(f=!1,l=Li(s,!0)):h?(f=!1,l=Ni(s,!0)):l=[]:gs(s)||xd(s)?(l=u,xd(u)?l=Rs(u):(!ss(u)||r&&os(u))&&(l=Io(s))):f=!1}f&&(a.set(s,l),i(l,s,r,o,a),a.delete(s)),Dn(t,n,l)}function Zr(t,e){var n=t.length;if(n)return e+=e<0?n:0,zo(e,n)?t[e]:it}function Kr(t,e,n){var r=-1;e=v(e.length?e:[Ic],N(Mo()));var i=Br(t,function(t,n,i){var o=v(e,function(e){return e(t)});return{criteria:o,index:++r,value:t}});return D(i,function(t,e){return Hi(t,e,n)})}function $r(t,e){return Qr(t,e,function(e,n){return Gs(t,n)})}function Qr(t,e,n){for(var r=-1,i=e.length,o={};++r<i;){var a=e[r],u=sr(t,a);n(u,a)&&si(o,Ti(a,t),u)}return o}function Jr(t){return function(e){return sr(e,t)}}function ti(t,e,n,r){var i=r?M:S,o=-1,a=e.length,u=t;for(t===e&&(e=Vi(e)),n&&(u=v(t,N(n)));++o<a;)for(var s=0,c=e[o],l=n?n(c):c;(s=i(u,l,s,r))>-1;)u!==t&&Il.call(u,s,1),Il.call(t,s,1);return t}function ei(t,e){for(var n=t?e.length:0,r=n-1;n--;){var i=e[n];if(n==r||i!==o){var o=i;zo(i)?Il.call(t,i,1):_i(t,i)}}return t}function ni(t,e){return t+Gl(Jl()*(e-t+1))}function ri(t,e,n,r){for(var i=-1,o=Zl(jl((e-t)/(n||1)),0),a=al(o);o--;)a[r?o:++i]=t,t+=n;return a}function ii(t,e){var n="";if(!t||e<1||e>Nt)return n;do e%2&&(n+=t),e=Gl(e/2),e&&(t+=t);while(e);return n}function oi(t,e){return Nf($o(t,e,Ic),t+"")}function ai(t){return Ln(rc(t))}function ui(t,e){var n=rc(t);return na(n,kn(e,0,n.length))}function si(t,e,n,r){if(!ss(t))return t;e=Ti(e,t);for(var i=-1,o=e.length,a=o-1,u=t;null!=u&&++i<o;){var s=ra(e[i]),c=n;if(i!=a){var l=u[s];c=r?r(l,s,u):it,c===it&&(c=ss(l)?l:zo(e[i+1])?[]:{})}Cn(u,s,c),u=u[s]}return t}function ci(t){return na(rc(t))}function li(t,e,n){var r=-1,i=t.length;e<0&&(e=-e>i?0:i+e),n=n>i?i:n,n<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var o=al(i);++r<i;)o[r]=t[r+e];return o}function fi(t,e){var n;return yf(t,function(t,r,i){return n=e(t,r,i),!n}),!!n}function di(t,e,n){var r=0,i=null==t?r:t.length;if("number"==typeof e&&e===e&&i<=Vt){for(;r<i;){var o=r+i>>>1,a=t[o];null!==a&&!xs(a)&&(n?a<=e:a<e)?r=o+1:i=o}return i}return pi(t,e,Ic,n)}function pi(t,e,n,r){e=n(e);for(var i=0,o=null==t?0:t.length,a=e!==e,u=null===e,s=xs(e),c=e===it;i<o;){var l=Gl((i+o)/2),f=n(t[l]),d=f!==it,p=null===f,h=f===f,v=xs(f);if(a)var m=r||h;else m=c?h&&(r||d):u?h&&d&&(r||!p):s?h&&d&&!p&&(r||!v):!p&&!v&&(r?f<=e:f<e);m?i=l+1:o=l}return Kl(o,kt)}function hi(t,e){for(var n=-1,r=t.length,i=0,o=[];++n<r;){var a=t[n],u=e?e(a):a;if(!n||!Zu(u,s)){var s=u;o[i++]=0===a?0:a}}return o}function vi(t){return"number"==typeof t?t:xs(t)?Ht:+t}function mi(t){if("string"==typeof t)return t;if(wd(t))return v(t,mi)+"";if(xs(t))return gf?gf.call(t):"";var e=t+"";return"0"==e&&1/t==-It?"-0":e}function gi(t,e,n){var r=-1,i=p,o=t.length,a=!0,u=[],s=u;if(n)a=!1,i=h;else if(o>=at){var c=e?null:Pf(t);if(c)return Z(c);a=!1,i=H,s=new _n}else s=e?[]:u;t:for(;++r<o;){var l=t[r],f=e?e(l):l;if(l=n||0!==l?l:0,a&&f===f){for(var d=s.length;d--;)if(s[d]===f)continue t;e&&s.push(f),u.push(l)}else i(s,f,n)||(s!==u&&s.push(f),u.push(l))}return u}function _i(t,e){return e=Ti(e,t),t=Qo(t,e),null==t||delete t[ra(Ma(e))]}function yi(t,e,n,r){return si(t,e,n(sr(t,e)),r)}function xi(t,e,n,r){for(var i=t.length,o=r?i:-1;(r?o--:++o<i)&&e(t[o],o,t););return n?li(t,r?0:o,r?o+1:i):li(t,r?o+1:0,r?i:o)}function wi(t,e){var n=t;return n instanceof x&&(n=n.value()),g(e,function(t,e){return e.func.apply(e.thisArg,m([t],e.args))},n)}function bi(t,e,n){var r=t.length;if(r<2)return r?gi(t[0]):[];for(var i=-1,o=al(r);++i<r;)for(var a=t[i],u=-1;++u<r;)u!=i&&(o[i]=Xn(o[i]||a,t[u],e,n));return gi(er(o,1),e,n)}function Ei(t,e,n){for(var r=-1,i=t.length,o=e.length,a={};++r<i;){var u=r<o?e[r]:it;n(a,t[r],u)}return a}function Si(t){return $u(t)?t:[]}function Mi(t){return"function"==typeof t?t:Ic}function Ti(t,e){return wd(t)?t:Vo(t,e)?[t]:Uf(Ds(t))}function Pi(t,e,n){var r=t.length;return n=n===it?r:n,!e&&n>=r?t:li(t,e,n)}function Li(t,e){if(e)return t.slice();var n=t.length,r=Al?Al(n):new t.constructor(n);return t.copy(r),r}function Ri(t){var e=new t.constructor(t.byteLength);return new Rl(e).set(new Rl(t)),e}function Ai(t,e){var n=e?Ri(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}function Di(t,e,n){var r=e?n(X(t),dt):X(t);return g(r,o,new t.constructor)}function Ci(t){var e=new t.constructor(t.source,Xe.exec(t));return e.lastIndex=t.lastIndex,e}function Oi(t,e,n){var r=e?n(Z(t),dt):Z(t);return g(r,a,new t.constructor)}function Ii(t){return mf?fl(mf.call(t)):{}}function Ni(t,e){var n=e?Ri(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function Ui(t,e){if(t!==e){var n=t!==it,r=null===t,i=t===t,o=xs(t),a=e!==it,u=null===e,s=e===e,c=xs(e);if(!u&&!c&&!o&&t>e||o&&a&&s&&!u&&!c||r&&a&&s||!n&&s||!i)return 1;if(!r&&!o&&!c&&t<e||c&&n&&i&&!r&&!o||u&&n&&i||!a&&i||!s)return-1}return 0}function Hi(t,e,n){for(var r=-1,i=t.criteria,o=e.criteria,a=i.length,u=n.length;++r<a;){var s=Ui(i[r],o[r]);if(s){if(r>=u)return s;var c=n[r];return s*("desc"==c?-1:1)}}return t.index-e.index}function zi(t,e,n,r){for(var i=-1,o=t.length,a=n.length,u=-1,s=e.length,c=Zl(o-a,0),l=al(s+c),f=!r;++u<s;)l[u]=e[u];for(;++i<a;)(f||i<o)&&(l[n[i]]=t[i]);for(;c--;)l[u++]=t[i++];return l}function ki(t,e,n,r){for(var i=-1,o=t.length,a=-1,u=n.length,s=-1,c=e.length,l=Zl(o-u,0),f=al(l+c),d=!r;++i<l;)f[i]=t[i];for(var p=i;++s<c;)f[p+s]=e[s];for(;++a<u;)(d||i<o)&&(f[p+n[a]]=t[i++]);return f}function Vi(t,e){var n=-1,r=t.length;for(e||(e=al(r));++n<r;)e[n]=t[n];return e}function Fi(t,e,n,r){var i=!n;n||(n={});for(var o=-1,a=e.length;++o<a;){var u=e[o],s=r?r(n[u],t[u],u,n,t):it;s===it&&(s=t[u]),i?Hn(n,u,s):Cn(n,u,s)}return n}function ji(t,e){return Fi(t,Rf(t),e)}function Gi(t,e){return Fi(t,Af(t),e)}function Bi(t,e){return function(n,r){var i=wd(n)?s:In,o=e?e():{};return i(n,t,Mo(r,2),o)}}function Wi(t){return oi(function(e,n){var r=-1,i=n.length,o=i>1?n[i-1]:it,a=i>2?n[2]:it;for(o=t.length>3&&"function"==typeof o?(i--,o):it,a&&ko(n[0],n[1],a)&&(o=i<3?it:o,i=1),e=fl(e);++r<i;){var u=n[r];u&&t(e,u,r,o)}return e})}function Xi(t,e){return function(n,r){if(null==n)return n;if(!Ku(n))return t(n,r);for(var i=n.length,o=e?i:-1,a=fl(n);(e?o--:++o<i)&&r(a[o],o,a)!==!1;);return n}}function Yi(t){return function(e,n,r){for(var i=-1,o=fl(e),a=r(e),u=a.length;u--;){var s=a[t?u:++i];if(n(o[s],s,o)===!1)break}return e}}function qi(t,e,n){function r(){var e=this&&this!==ur&&this instanceof r?o:t;return e.apply(i?n:this,arguments)}var i=e&gt,o=$i(t);return r}function Zi(t){return function(e){e=Ds(e);var n=G(e)?tt(e):it,r=n?n[0]:e.charAt(0),i=n?Pi(n,1).join(""):e.slice(1);return r[t]()+i}}function Ki(t){return function(e){return g(Rc(cc(e).replace(Gn,"")),t,"")}}function $i(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=_f(t.prototype),r=t.apply(n,e);return ss(r)?r:n}}function Qi(t,e,n){function r(){for(var o=arguments.length,a=al(o),s=o,c=So(r);s--;)a[s]=arguments[s];var l=o<3&&a[0]!==c&&a[o-1]!==c?[]:q(a,c);if(o-=l.length,o<n)return co(t,e,eo,r.placeholder,it,a,l,it,it,n-o);var f=this&&this!==ur&&this instanceof r?i:t;return u(f,this,a)}var i=$i(t);return r}function Ji(t){return function(e,n,r){var i=fl(e);if(!Ku(e)){var o=Mo(n,3);e=Bs(e),n=function(t){return o(i[t],t,i)}}var a=t(e,n,r);return a>-1?i[o?e[a]:a]:it}}function to(t){return xo(function(e){var n=e.length,r=n,o=i.prototype.thru;for(t&&e.reverse();r--;){var a=e[r];if("function"!=typeof a)throw new hl(st);if(o&&!u&&"wrapper"==Eo(a))var u=new i([],!0)}for(r=u?r:n;++r<n;){a=e[r];var s=Eo(a),c="wrapper"==s?Lf(a):it;u=c&&jo(c[0])&&c[1]==(St|xt|bt|Mt)&&!c[4].length&&1==c[9]?u[Eo(c[0])].apply(u,c[3]):1==a.length&&jo(a)?u[s]():u.thru(a)}return function(){var t=arguments,r=t[0];if(u&&1==t.length&&wd(r))return u.plant(r).value();for(var i=0,o=n?e[i].apply(this,t):r;++i<n;)o=e[i].call(this,o);return o}})}function eo(t,e,n,r,i,o,a,u,s,c){function l(){for(var g=arguments.length,_=al(g),y=g;y--;)_[y]=arguments[y];if(h)var x=So(l),w=V(_,x);if(r&&(_=zi(_,r,i,h)),o&&(_=ki(_,o,a,h)),g-=w,h&&g<c){var b=q(_,x);return co(t,e,eo,l.placeholder,n,_,b,u,s,c-g)}var E=d?n:this,S=p?E[t]:t;return g=_.length,u?_=Jo(_,u):v&&g>1&&_.reverse(),f&&s<g&&(_.length=s),this&&this!==ur&&this instanceof l&&(S=m||$i(S)),S.apply(E,_)}var f=e&St,d=e&gt,p=e&_t,h=e&(xt|wt),v=e&Tt,m=p?it:$i(t);return l}function no(t,e){return function(n,r){return Pr(n,t,e(r),{})}}function ro(t,e){return function(n,r){var i;if(n===it&&r===it)return e;if(n!==it&&(i=n),r!==it){if(i===it)return r;"string"==typeof n||"string"==typeof r?(n=mi(n),r=mi(r)):(n=vi(n),r=vi(r)),i=t(n,r)}return i}}function io(t){return xo(function(e){return e=v(e,N(Mo())),oi(function(n){var r=this;return t(e,function(t){return u(t,r,n)})})})}function oo(t,e){e=e===it?" ":mi(e);var n=e.length;if(n<2)return n?ii(e,t):e;var r=ii(e,jl(t/J(e)));return G(e)?Pi(tt(r),0,t).join(""):r.slice(0,t)}function ao(t,e,n,r){function i(){for(var e=-1,s=arguments.length,c=-1,l=r.length,f=al(l+s),d=this&&this!==ur&&this instanceof i?a:t;++c<l;)f[c]=r[c];for(;s--;)f[c++]=arguments[++e];return u(d,o?n:this,f)}var o=e&gt,a=$i(t);return i}function uo(t){return function(e,n,r){return r&&"number"!=typeof r&&ko(e,n,r)&&(n=r=it),e=Ms(e),n===it?(n=e,e=0):n=Ms(n),r=r===it?e<n?1:-1:Ms(r),ri(e,n,r,t)}}function so(t){return function(e,n){return"string"==typeof e&&"string"==typeof n||(e=Ls(e),n=Ls(n)),t(e,n)}}function co(t,e,n,r,i,o,a,u,s,c){var l=e&xt,f=l?a:it,d=l?it:a,p=l?o:it,h=l?it:o;e|=l?bt:Et,e&=~(l?Et:bt),e&yt||(e&=~(gt|_t));var v=[t,e,i,p,f,h,d,u,s,c],m=n.apply(it,v);return jo(t)&&Of(m,v),m.placeholder=r,ta(m,t,e)}function lo(t){var e=ll[t];return function(t,n){if(t=Ls(t),n=null==n?0:Kl(Ts(n),292)){var r=(Ds(t)+"e").split("e"),i=e(r[0]+"e"+(+r[1]+n));return r=(Ds(i)+"e").split("e"),+(r[0]+"e"+(+r[1]-n))}return e(t)}}function fo(t){return function(e){var n=Df(e);return n==$t?X(e):n==ie?K(e):I(e,t(e))}}function po(t,e,n,r,i,o,a,u){var s=e&_t;if(!s&&"function"!=typeof t)throw new hl(st);var c=r?r.length:0;if(c||(e&=~(bt|Et),r=i=it),a=a===it?a:Zl(Ts(a),0),u=u===it?u:Ts(u),c-=i?i.length:0,e&Et){var l=r,f=i;r=i=it}var d=s?it:Lf(t),p=[t,e,n,r,i,l,f,o,a,u];if(d&&qo(p,d),t=p[0],e=p[1],n=p[2],r=p[3],i=p[4],u=p[9]=p[9]===it?s?0:t.length:Zl(p[9]-c,0),!u&&e&(xt|wt)&&(e&=~(xt|wt)),e&&e!=gt)h=e==xt||e==wt?Qi(t,e,u):e!=bt&&e!=(gt|bt)||i.length?eo.apply(it,p):ao(t,e,n,r);else var h=qi(t,e,n);var v=d?Ef:Of;return ta(v(h,p),t,e)}function ho(t,e,n,r){return t===it||Zu(t,gl[n])&&!xl.call(r,n)?e:t}function vo(t,e,n,r,i,o){return ss(t)&&ss(e)&&(o.set(e,t),Yr(t,e,it,vo,o),o.delete(e)),t}function mo(t){return gs(t)?it:t}function go(t,e,n,r,i,o){var a=n&vt,u=t.length,s=e.length;if(u!=s&&!(a&&s>u))return!1;var c=o.get(t);if(c&&o.get(e))return c==e;var l=-1,f=!0,d=n&mt?new _n:it;for(o.set(t,e),o.set(e,t);++l<u;){var p=t[l],h=e[l];if(r)var v=a?r(h,p,l,e,t,o):r(p,h,l,t,e,o);if(v!==it){if(v)continue;f=!1;break}if(d){if(!y(e,function(t,e){if(!H(d,e)&&(p===t||i(p,t,n,r,o)))return d.push(e)})){f=!1;break}}else if(p!==h&&!i(p,h,n,r,o)){f=!1;break}}return o.delete(t),o.delete(e),f}function _o(t,e,n,r,i,o,a){switch(n){case fe:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case le:return!(t.byteLength!=e.byteLength||!o(new Rl(t),new Rl(e)));case Wt:case Xt:case Qt:return Zu(+t,+e);case qt:return t.name==e.name&&t.message==e.message;case re:case oe:return t==e+"";case $t:var u=X;case ie:var s=r&vt;if(u||(u=Z),t.size!=e.size&&!s)return!1;var c=a.get(t);if(c)return c==e;r|=mt,a.set(t,e);var l=go(u(t),u(e),r,i,o,a);return a.delete(t),l;case ae:if(mf)return mf.call(t)==mf.call(e)}return!1}function yo(t,e,n,r,i,o){var a=n&vt,u=wo(t),s=u.length,c=wo(e),l=c.length;if(s!=l&&!a)return!1;for(var f=s;f--;){var d=u[f];if(!(a?d in e:xl.call(e,d)))return!1}var p=o.get(t);if(p&&o.get(e))return p==e;var h=!0;o.set(t,e),o.set(e,t);for(var v=a;++f<s;){d=u[f];var m=t[d],g=e[d];if(r)var _=a?r(g,m,d,e,t,o):r(m,g,d,t,e,o);if(!(_===it?m===g||i(m,g,n,r,o):_)){h=!1;break}v||(v="constructor"==d)}if(h&&!v){var y=t.constructor,x=e.constructor;y!=x&&"constructor"in t&&"constructor"in e&&!("function"==typeof y&&y instanceof y&&"function"==typeof x&&x instanceof x)&&(h=!1)}return o.delete(t),o.delete(e),h}function xo(t){return Nf($o(t,it,ga),t+"")}function wo(t){return cr(t,Bs,Rf)}function bo(t){return cr(t,Ws,Af)}function Eo(t){for(var e=t.name+"",n=cf[e],r=xl.call(cf,e)?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==t)return i.name}return e}function So(t){var e=xl.call(n,"placeholder")?n:t;return e.placeholder}function Mo(){var t=n.iteratee||Nc;return t=t===Nc?Vr:t,arguments.length?t(arguments[0],arguments[1]):t}function To(t,e){var n=t.__data__;return Fo(e)?n["string"==typeof e?"string":"hash"]:n.map}function Po(t){for(var e=Bs(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,Wo(i)]}return e}function Lo(t,e){var n=j(t,e);return Ur(n)?n:it}function Ro(t){var e=xl.call(t,Hl),n=t[Hl];try{t[Hl]=it;var r=!0}catch(t){}var i=El.call(t);return r&&(e?t[Hl]=n:delete t[Hl]),i}function Ao(t,e,n){for(var r=-1,i=n.length;++r<i;){var o=n[r],a=o.size;switch(o.type){case"drop":t+=a;break;case"dropRight":e-=a;break;case"take":e=Kl(e,t+a);break;case"takeRight":t=Zl(t,e-a)}}return{start:t,end:e}}function Do(t){var e=t.match(Fe);return e?e[1].split(je):[]}function Co(t,e,n){e=Ti(e,t);for(var r=-1,i=e.length,o=!1;++r<i;){var a=ra(e[r]);if(!(o=null!=t&&n(t,a)))break;t=t[a]}return o||++r!=i?o:(i=null==t?0:t.length,!!i&&us(i)&&zo(a,i)&&(wd(t)||xd(t)))}function Oo(t){var e=t.length,n=t.constructor(e);return e&&"string"==typeof t[0]&&xl.call(t,"index")&&(n.index=t.index,n.input=t.input),n}function Io(t){return"function"!=typeof t.constructor||Bo(t)?{}:_f(Dl(t))}function No(t,e,n,r){var i=t.constructor;switch(e){case le:return Ri(t);case Wt:case Xt:return new i(+t);case fe:return Ai(t,r);case de:case pe:case he:case ve:case me:case ge:case _e:case ye:case xe:return Ni(t,r);case $t:return Di(t,r,n);case Qt:case oe:return new i(t);case re:return Ci(t);case ie:return Oi(t,r,n);case ae:return Ii(t)}}function Uo(t,e){var n=e.length;if(!n)return t;var r=n-1;return e[r]=(n>1?"& ":"")+e[r],e=e.join(n>2?", ":" "),t.replace(Ve,"{\n/* [wrapped with "+e+"] */\n")}function Ho(t){return wd(t)||xd(t)||!!(Nl&&t&&t[Nl])}function zo(t,e){return e=null==e?Nt:e,!!e&&("number"==typeof t||$e.test(t))&&t>-1&&t%1==0&&t<e}function ko(t,e,n){if(!ss(n))return!1;var r=typeof e;return!!("number"==r?Ku(n)&&zo(e,n.length):"string"==r&&e in n)&&Zu(n[e],t)}function Vo(t,e){if(wd(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!xs(t))||(Ce.test(t)||!De.test(t)||null!=e&&t in fl(e))}function Fo(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}function jo(t){var e=Eo(t),r=n[e];if("function"!=typeof r||!(e in x.prototype))return!1;if(t===r)return!0;var i=Lf(r);return!!i&&t===i[0]}function Go(t){return!!bl&&bl in t}function Bo(t){var e=t&&t.constructor,n="function"==typeof e&&e.prototype||gl;return t===n}function Wo(t){return t===t&&!ss(t)}function Xo(t,e){return function(n){return null!=n&&(n[t]===e&&(e!==it||t in fl(n)))}}function Yo(t){var e=Nu(t,function(t){return n.size===lt&&n.clear(),t}),n=e.cache;return e}function qo(t,e){var n=t[1],r=e[1],i=n|r,o=i<(gt|_t|St),a=r==St&&n==xt||r==St&&n==Mt&&t[7].length<=e[8]||r==(St|Mt)&&e[7].length<=e[8]&&n==xt;if(!o&&!a)return t;r&gt&&(t[2]=e[2],i|=n&gt?0:yt);var u=e[3];if(u){var s=t[3];t[3]=s?zi(s,u,e[4]):u,t[4]=s?q(t[3],ft):e[4]}return u=e[5],u&&(s=t[5],t[5]=s?ki(s,u,e[6]):u,t[6]=s?q(t[5],ft):e[6]),u=e[7],u&&(t[7]=u),r&St&&(t[8]=null==t[8]?e[8]:Kl(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=i,t}function Zo(t){var e=[];if(null!=t)for(var n in fl(t))e.push(n);return e}function Ko(t){return El.call(t)}function $o(t,e,n){return e=Zl(e===it?t.length-1:e,0),function(){for(var r=arguments,i=-1,o=Zl(r.length-e,0),a=al(o);++i<o;)a[i]=r[e+i];i=-1;for(var s=al(e+1);++i<e;)s[i]=r[i];return s[e]=n(a),u(t,this,s)}}function Qo(t,e){return e.length<2?t:sr(t,li(e,0,-1))}function Jo(t,e){for(var n=t.length,r=Kl(e.length,n),i=Vi(t);r--;){var o=e[r];t[r]=zo(o,n)?i[o]:it}return t}function ta(t,e,n){var r=e+"";return Nf(t,Uo(r,oa(Do(r),n)))}function ea(t){var e=0,n=0;return function(){var r=$l(),i=At-(r-n);if(n=r,i>0){if(++e>=Rt)return arguments[0]}else e=0;return t.apply(it,arguments)}}function na(t,e){var n=-1,r=t.length,i=r-1;for(e=e===it?r:e;++n<e;){var o=ni(n,i),a=t[o];t[o]=t[n],t[n]=a}return t.length=e,t}function ra(t){if("string"==typeof t||xs(t))return t;var e=t+"";return"0"==e&&1/t==-It?"-0":e}function ia(t){if(null!=t){try{return yl.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function oa(t,e){return c(Ft,function(n){var r="_."+n[0];e&n[1]&&!p(t,r)&&t.push(r)}),t.sort()}function aa(t){if(t instanceof x)return t.clone();var e=new i(t.__wrapped__,t.__chain__);return e.__actions__=Vi(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}function ua(t,e,n){e=(n?ko(t,e,n):e===it)?1:Zl(Ts(e),0);var r=null==t?0:t.length;if(!r||e<1)return[];for(var i=0,o=0,a=al(jl(r/e));i<r;)a[o++]=li(t,i,i+=e);return a}function sa(t){for(var e=-1,n=null==t?0:t.length,r=0,i=[];++e<n;){var o=t[e];o&&(i[r++]=o)}return i}function ca(){var t=arguments.length;if(!t)return[];for(var e=al(t-1),n=arguments[0],r=t;r--;)e[r-1]=arguments[r];return m(wd(n)?Vi(n):[n],er(e,1))}function la(t,e,n){var r=null==t?0:t.length;return r?(e=n||e===it?1:Ts(e),li(t,e<0?0:e,r)):[]}function fa(t,e,n){var r=null==t?0:t.length;return r?(e=n||e===it?1:Ts(e),e=r-e,li(t,0,e<0?0:e)):[]}function da(t,e){return t&&t.length?xi(t,Mo(e,3),!0,!0):[]}function pa(t,e){return t&&t.length?xi(t,Mo(e,3),!0):[]}function ha(t,e,n,r){var i=null==t?0:t.length;return i?(n&&"number"!=typeof n&&ko(t,e,n)&&(n=0,r=i),Jn(t,e,n,r)):[]}function va(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:Ts(n);return i<0&&(i=Zl(r+i,0)),E(t,Mo(e,3),i)}function ma(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=r-1;return n!==it&&(i=Ts(n),i=n<0?Zl(r+i,0):Kl(i,r-1)),E(t,Mo(e,3),i,!0)}function ga(t){var e=null==t?0:t.length;return e?er(t,1):[]}function _a(t){var e=null==t?0:t.length;return e?er(t,It):[]}function ya(t,e){var n=null==t?0:t.length;return n?(e=e===it?1:Ts(e),er(t,e)):[]}function xa(t){for(var e=-1,n=null==t?0:t.length,r={};++e<n;){var i=t[e];r[i[0]]=i[1]}return r}function wa(t){return t&&t.length?t[0]:it}function ba(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:Ts(n);return i<0&&(i=Zl(r+i,0)),S(t,e,i)}function Ea(t){var e=null==t?0:t.length;return e?li(t,0,-1):[]}function Sa(t,e){return null==t?"":Yl.call(t,e)}function Ma(t){var e=null==t?0:t.length;return e?t[e-1]:it}function Ta(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=r;return n!==it&&(i=Ts(n),i=i<0?Zl(r+i,0):Kl(i,r-1)),e===e?Q(t,e,i):E(t,T,i,!0)}function Pa(t,e){return t&&t.length?Zr(t,Ts(e)):it}function La(t,e){return t&&t.length&&e&&e.length?ti(t,e):t}function Ra(t,e,n){return t&&t.length&&e&&e.length?ti(t,e,Mo(n,2)):t}function Aa(t,e,n){return t&&t.length&&e&&e.length?ti(t,e,it,n):t}function Da(t,e){var n=[];if(!t||!t.length)return n;var r=-1,i=[],o=t.length;for(e=Mo(e,3);++r<o;){var a=t[r];e(a,r,t)&&(n.push(a),i.push(r))}return ei(t,i),n}function Ca(t){return null==t?t:tf.call(t)}function Oa(t,e,n){var r=null==t?0:t.length;return r?(n&&"number"!=typeof n&&ko(t,e,n)?(e=0,n=r):(e=null==e?0:Ts(e),n=n===it?r:Ts(n)),li(t,e,n)):[]}function Ia(t,e){return di(t,e)}function Na(t,e,n){return pi(t,e,Mo(n,2))}function Ua(t,e){var n=null==t?0:t.length;if(n){var r=di(t,e);if(r<n&&Zu(t[r],e))return r}return-1}function Ha(t,e){return di(t,e,!0)}function za(t,e,n){return pi(t,e,Mo(n,2),!0)}function ka(t,e){var n=null==t?0:t.length;if(n){var r=di(t,e,!0)-1;if(Zu(t[r],e))return r}return-1}function Va(t){return t&&t.length?hi(t):[]}function Fa(t,e){return t&&t.length?hi(t,Mo(e,2)):[]}function ja(t){var e=null==t?0:t.length;return e?li(t,1,e):[]}function Ga(t,e,n){return t&&t.length?(e=n||e===it?1:Ts(e),li(t,0,e<0?0:e)):[]}function Ba(t,e,n){var r=null==t?0:t.length;return r?(e=n||e===it?1:Ts(e),e=r-e,li(t,e<0?0:e,r)):[]}function Wa(t,e){return t&&t.length?xi(t,Mo(e,3),!1,!0):[]}function Xa(t,e){return t&&t.length?xi(t,Mo(e,3)):[]}function Ya(t){return t&&t.length?gi(t):[]}function qa(t,e){return t&&t.length?gi(t,Mo(e,2)):[]}function Za(t,e){return e="function"==typeof e?e:it,t&&t.length?gi(t,it,e):[]}function Ka(t){if(!t||!t.length)return[];var e=0;return t=d(t,function(t){if($u(t))return e=Zl(t.length,e),!0}),O(e,function(e){return v(t,L(e))})}function $a(t,e){if(!t||!t.length)return[];var n=Ka(t);return null==e?n:v(n,function(t){return u(e,it,t)})}function Qa(t,e){return Ei(t||[],e||[],Cn)}function Ja(t,e){return Ei(t||[],e||[],si)}function tu(t){var e=n(t);return e.__chain__=!0,e}function eu(t,e){return e(t),t}function nu(t,e){return e(t)}function ru(){return tu(this)}function iu(){return new i(this.value(),this.__chain__)}function ou(){this.__values__===it&&(this.__values__=Ss(this.value()));var t=this.__index__>=this.__values__.length,e=t?it:this.__values__[this.__index__++];return{done:t,value:e}}function au(){return this}function uu(t){for(var e,n=this;n instanceof r;){var i=aa(n);i.__index__=0,i.__values__=it,e?o.__wrapped__=i:e=i;var o=i;n=n.__wrapped__}return o.__wrapped__=t,e}function su(){var t=this.__wrapped__;if(t instanceof x){var e=t;return this.__actions__.length&&(e=new x(this)),e=e.reverse(),e.__actions__.push({func:nu,args:[Ca],thisArg:it}),new i(e,this.__chain__)}return this.thru(Ca)}function cu(){return wi(this.__wrapped__,this.__actions__)}function lu(t,e,n){var r=wd(t)?f:Yn;return n&&ko(t,e,n)&&(e=it),r(t,Mo(e,3))}function fu(t,e){var n=wd(t)?d:tr;return n(t,Mo(e,3))}function du(t,e){return er(_u(t,e),1)}function pu(t,e){return er(_u(t,e),It)}function hu(t,e,n){return n=n===it?1:Ts(n),er(_u(t,e),n)}function vu(t,e){var n=wd(t)?c:yf;return n(t,Mo(e,3))}function mu(t,e){var n=wd(t)?l:xf;return n(t,Mo(e,3))}function gu(t,e,n,r){t=Ku(t)?t:rc(t),n=n&&!r?Ts(n):0;var i=t.length;return n<0&&(n=Zl(i+n,0)),ys(t)?n<=i&&t.indexOf(e,n)>-1:!!i&&S(t,e,n)>-1}function _u(t,e){var n=wd(t)?v:Br;return n(t,Mo(e,3))}function yu(t,e,n,r){return null==t?[]:(wd(e)||(e=null==e?[]:[e]),n=r?it:n,wd(n)||(n=null==n?[]:[n]),Kr(t,e,n))}function xu(t,e,n){var r=wd(t)?g:A,i=arguments.length<3;return r(t,Mo(e,4),n,i,yf)}function wu(t,e,n){var r=wd(t)?_:A,i=arguments.length<3;return r(t,Mo(e,4),n,i,xf)}function bu(t,e){var n=wd(t)?d:tr;return n(t,Uu(Mo(e,3)))}function Eu(t){var e=wd(t)?Ln:ai;return e(t)}function Su(t,e,n){e=(n?ko(t,e,n):e===it)?1:Ts(e);var r=wd(t)?Rn:ui;return r(t,e)}function Mu(t){var e=wd(t)?An:ci;return e(t)}function Tu(t){if(null==t)return 0;if(Ku(t))return ys(t)?J(t):t.length;var e=Df(t);return e==$t||e==ie?t.size:Fr(t).length}function Pu(t,e,n){var r=wd(t)?y:fi;return n&&ko(t,e,n)&&(e=it),r(t,Mo(e,3))}function Lu(t,e){if("function"!=typeof e)throw new hl(st);return t=Ts(t),function(){if(--t<1)return e.apply(this,arguments)}}function Ru(t,e,n){return e=n?it:e,e=t&&null==e?t.length:e,po(t,St,it,it,it,it,e)}function Au(t,e){var n;if("function"!=typeof e)throw new hl(st);return t=Ts(t),function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=it),n}}function Du(t,e,n){e=n?it:e;var r=po(t,xt,it,it,it,it,it,e);return r.placeholder=Du.placeholder,r}function Cu(t,e,n){e=n?it:e;var r=po(t,wt,it,it,it,it,it,e);return r.placeholder=Cu.placeholder,r}function Ou(t,e,n){function r(e){var n=d,r=p;return d=p=it,_=e,v=t.apply(r,n)}function i(t){return _=t,m=If(u,e),y?r(t):v}function o(t){var n=t-g,r=t-_,i=e-n;return x?Kl(i,h-r):i}function a(t){var n=t-g,r=t-_;return g===it||n>=e||n<0||x&&r>=h}function u(){var t=cd();return a(t)?s(t):void(m=If(u,o(t)))}function s(t){return m=it,w&&d?r(t):(d=p=it,v)}function c(){m!==it&&Tf(m),_=0,d=g=p=m=it}function l(){return m===it?v:s(cd())}function f(){var t=cd(),n=a(t);if(d=arguments,p=this,g=t,n){if(m===it)return i(g);if(x)return m=If(u,e),r(g)}return m===it&&(m=If(u,e)),v}var d,p,h,v,m,g,_=0,y=!1,x=!1,w=!0;if("function"!=typeof t)throw new hl(st);return e=Ls(e)||0,ss(n)&&(y=!!n.leading,x="maxWait"in n,h=x?Zl(Ls(n.maxWait)||0,e):h,w="trailing"in n?!!n.trailing:w),f.cancel=c,f.flush=l,f}function Iu(t){return po(t,Tt)}function Nu(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new hl(st);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=t.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(Nu.Cache||dn),n}function Uu(t){if("function"!=typeof t)throw new hl(st);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}function Hu(t){return Au(2,t)}function zu(t,e){if("function"!=typeof t)throw new hl(st);return e=e===it?e:Ts(e),oi(t,e)}function ku(t,e){if("function"!=typeof t)throw new hl(st);return e=null==e?0:Zl(Ts(e),0),oi(function(n){var r=n[e],i=Pi(n,0,e);return r&&m(i,r),u(t,this,i)})}function Vu(t,e,n){var r=!0,i=!0;if("function"!=typeof t)throw new hl(st);return ss(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),Ou(t,e,{leading:r,maxWait:e,trailing:i})}function Fu(t){return Ru(t,1)}function ju(t,e){return vd(Mi(e),t)}function Gu(){if(!arguments.length)return[];var t=arguments[0];return wd(t)?t:[t]}function Bu(t){return Vn(t,ht)}function Wu(t,e){return e="function"==typeof e?e:it,Vn(t,ht,e)}function Xu(t){return Vn(t,dt|ht)}function Yu(t,e){return e="function"==typeof e?e:it,Vn(t,dt|ht,e)}function qu(t,e){return null==e||jn(t,e,Bs(e))}function Zu(t,e){return t===e||t!==t&&e!==e}function Ku(t){return null!=t&&us(t.length)&&!os(t)}function $u(t){return cs(t)&&Ku(t)}function Qu(t){return t===!0||t===!1||cs(t)&&fr(t)==Wt}function Ju(t){return cs(t)&&1===t.nodeType&&!gs(t)}function ts(t){if(null==t)return!0;if(Ku(t)&&(wd(t)||"string"==typeof t||"function"==typeof t.splice||Ed(t)||Ld(t)||xd(t)))return!t.length;var e=Df(t);if(e==$t||e==ie)return!t.size;if(Bo(t))return!Fr(t).length;for(var n in t)if(xl.call(t,n))return!1;return!0}function es(t,e){return Cr(t,e)}function ns(t,e,n){n="function"==typeof n?n:it;var r=n?n(t,e):it;return r===it?Cr(t,e,it,n):!!r}function rs(t){if(!cs(t))return!1;var e=fr(t);return e==qt||e==Yt||"string"==typeof t.message&&"string"==typeof t.name&&!gs(t)}function is(t){return"number"==typeof t&&Xl(t)}function os(t){if(!ss(t))return!1;var e=fr(t);return e==Zt||e==Kt||e==Bt||e==ne}function as(t){return"number"==typeof t&&t==Ts(t)}function us(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=Nt}function ss(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function cs(t){return null!=t&&"object"==typeof t}function ls(t,e){return t===e||Nr(t,e,Po(e))}function fs(t,e,n){return n="function"==typeof n?n:it,Nr(t,e,Po(e),n)}function ds(t){return ms(t)&&t!=+t}function ps(t){if(Cf(t))throw new sl(ut);
return Ur(t)}function hs(t){return null===t}function vs(t){return null==t}function ms(t){return"number"==typeof t||cs(t)&&fr(t)==Qt}function gs(t){if(!cs(t)||fr(t)!=te)return!1;var e=Dl(t);if(null===e)return!0;var n=xl.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&yl.call(n)==Sl}function _s(t){return as(t)&&t>=-Nt&&t<=Nt}function ys(t){return"string"==typeof t||!wd(t)&&cs(t)&&fr(t)==oe}function xs(t){return"symbol"==typeof t||cs(t)&&fr(t)==ae}function ws(t){return t===it}function bs(t){return cs(t)&&Df(t)==se}function Es(t){return cs(t)&&fr(t)==ce}function Ss(t){if(!t)return[];if(Ku(t))return ys(t)?tt(t):Vi(t);if(Ul&&t[Ul])return W(t[Ul]());var e=Df(t),n=e==$t?X:e==ie?Z:rc;return n(t)}function Ms(t){if(!t)return 0===t?t:0;if(t=Ls(t),t===It||t===-It){var e=t<0?-1:1;return e*Ut}return t===t?t:0}function Ts(t){var e=Ms(t),n=e%1;return e===e?n?e-n:e:0}function Ps(t){return t?kn(Ts(t),0,zt):0}function Ls(t){if("number"==typeof t)return t;if(xs(t))return Ht;if(ss(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=ss(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(He,"");var n=qe.test(t);return n||Ke.test(t)?ir(t.slice(2),n?2:8):Ye.test(t)?Ht:+t}function Rs(t){return Fi(t,Ws(t))}function As(t){return t?kn(Ts(t),-Nt,Nt):0===t?t:0}function Ds(t){return null==t?"":mi(t)}function Cs(t,e){var n=_f(t);return null==e?n:Nn(n,e)}function Os(t,e){return b(t,Mo(e,3),nr)}function Is(t,e){return b(t,Mo(e,3),or)}function Ns(t,e){return null==t?t:wf(t,Mo(e,3),Ws)}function Us(t,e){return null==t?t:bf(t,Mo(e,3),Ws)}function Hs(t,e){return t&&nr(t,Mo(e,3))}function zs(t,e){return t&&or(t,Mo(e,3))}function ks(t){return null==t?[]:ar(t,Bs(t))}function Vs(t){return null==t?[]:ar(t,Ws(t))}function Fs(t,e,n){var r=null==t?it:sr(t,e);return r===it?n:r}function js(t,e){return null!=t&&Co(t,e,yr)}function Gs(t,e){return null!=t&&Co(t,e,Er)}function Bs(t){return Ku(t)?Pn(t):Fr(t)}function Ws(t){return Ku(t)?Pn(t,!0):jr(t)}function Xs(t,e){var n={};return e=Mo(e,3),nr(t,function(t,r,i){Hn(n,e(t,r,i),t)}),n}function Ys(t,e){var n={};return e=Mo(e,3),nr(t,function(t,r,i){Hn(n,r,e(t,r,i))}),n}function qs(t,e){return Zs(t,Uu(Mo(e)))}function Zs(t,e){if(null==t)return{};var n=v(bo(t),function(t){return[t]});return e=Mo(e),Qr(t,n,function(t,n){return e(t,n[0])})}function Ks(t,e,n){e=Ti(e,t);var r=-1,i=e.length;for(i||(i=1,t=it);++r<i;){var o=null==t?it:t[ra(e[r])];o===it&&(r=i,o=n),t=os(o)?o.call(t):o}return t}function $s(t,e,n){return null==t?t:si(t,e,n)}function Qs(t,e,n,r){return r="function"==typeof r?r:it,null==t?t:si(t,e,n,r)}function Js(t,e,n){var r=wd(t),i=r||Ed(t)||Ld(t);if(e=Mo(e,4),null==n){var o=t&&t.constructor;n=i?r?new o:[]:ss(t)&&os(o)?_f(Dl(t)):{}}return(i?c:nr)(t,function(t,r,i){return e(n,t,r,i)}),n}function tc(t,e){return null==t||_i(t,e)}function ec(t,e,n){return null==t?t:yi(t,e,Mi(n))}function nc(t,e,n,r){return r="function"==typeof r?r:it,null==t?t:yi(t,e,Mi(n),r)}function rc(t){return null==t?[]:U(t,Bs(t))}function ic(t){return null==t?[]:U(t,Ws(t))}function oc(t,e,n){return n===it&&(n=e,e=it),n!==it&&(n=Ls(n),n=n===n?n:0),e!==it&&(e=Ls(e),e=e===e?e:0),kn(Ls(t),e,n)}function ac(t,e,n){return e=Ms(e),n===it?(n=e,e=0):n=Ms(n),t=Ls(t),Mr(t,e,n)}function uc(t,e,n){if(n&&"boolean"!=typeof n&&ko(t,e,n)&&(e=n=it),n===it&&("boolean"==typeof e?(n=e,e=it):"boolean"==typeof t&&(n=t,t=it)),t===it&&e===it?(t=0,e=1):(t=Ms(t),e===it?(e=t,t=0):e=Ms(e)),t>e){var r=t;t=e,e=r}if(n||t%1||e%1){var i=Jl();return Kl(t+i*(e-t+rr("1e-"+((i+"").length-1))),e)}return ni(t,e)}function sc(t){return tp(Ds(t).toLowerCase())}function cc(t){return t=Ds(t),t&&t.replace(Qe,xr).replace(Bn,"")}function lc(t,e,n){t=Ds(t),e=mi(e);var r=t.length;n=n===it?r:kn(Ts(n),0,r);var i=n;return n-=e.length,n>=0&&t.slice(n,i)==e}function fc(t){return t=Ds(t),t&&Pe.test(t)?t.replace(Me,wr):t}function dc(t){return t=Ds(t),t&&Ue.test(t)?t.replace(Ne,"\\$&"):t}function pc(t,e,n){t=Ds(t),e=Ts(e);var r=e?J(t):0;if(!e||r>=e)return t;var i=(e-r)/2;return oo(Gl(i),n)+t+oo(jl(i),n)}function hc(t,e,n){t=Ds(t),e=Ts(e);var r=e?J(t):0;return e&&r<e?t+oo(e-r,n):t}function vc(t,e,n){t=Ds(t),e=Ts(e);var r=e?J(t):0;return e&&r<e?oo(e-r,n)+t:t}function mc(t,e,n){return n||null==e?e=0:e&&(e=+e),Ql(Ds(t).replace(ze,""),e||0)}function gc(t,e,n){return e=(n?ko(t,e,n):e===it)?1:Ts(e),ii(Ds(t),e)}function _c(){var t=arguments,e=Ds(t[0]);return t.length<3?e:e.replace(t[1],t[2])}function yc(t,e,n){return n&&"number"!=typeof n&&ko(t,e,n)&&(e=n=it),(n=n===it?zt:n>>>0)?(t=Ds(t),t&&("string"==typeof e||null!=e&&!Td(e))&&(e=mi(e),!e&&G(t))?Pi(tt(t),0,n):t.split(e,n)):[]}function xc(t,e,n){return t=Ds(t),n=null==n?0:kn(Ts(n),0,t.length),e=mi(e),t.slice(n,n+e.length)==e}function wc(t,e,r){var i=n.templateSettings;r&&ko(t,e,r)&&(e=it),t=Ds(t),e=Od({},e,i,ho);var o,a,u=Od({},e.imports,i.imports,ho),s=Bs(u),c=U(u,s),l=0,f=e.interpolate||Je,d="__p += '",p=dl((e.escape||Je).source+"|"+f.source+"|"+(f===Ae?We:Je).source+"|"+(e.evaluate||Je).source+"|$","g"),h="//# sourceURL="+("sourceURL"in e?e.sourceURL:"lodash.templateSources["+ ++Kn+"]")+"\n";t.replace(p,function(e,n,r,i,u,s){return r||(r=i),d+=t.slice(l,s).replace(tn,F),n&&(o=!0,d+="' +\n__e("+n+") +\n'"),u&&(a=!0,d+="';\n"+u+";\n__p += '"),r&&(d+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),l=s+e.length,e}),d+="';\n";var v=e.variable;v||(d="with (obj) {\n"+d+"\n}\n"),d=(a?d.replace(we,""):d).replace(be,"$1").replace(Ee,"$1;"),d="function("+(v||"obj")+") {\n"+(v?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+d+"return __p\n}";var m=ep(function(){return cl(s,h+"return "+d).apply(it,c)});if(m.source=d,rs(m))throw m;return m}function bc(t){return Ds(t).toLowerCase()}function Ec(t){return Ds(t).toUpperCase()}function Sc(t,e,n){if(t=Ds(t),t&&(n||e===it))return t.replace(He,"");if(!t||!(e=mi(e)))return t;var r=tt(t),i=tt(e),o=z(r,i),a=k(r,i)+1;return Pi(r,o,a).join("")}function Mc(t,e,n){if(t=Ds(t),t&&(n||e===it))return t.replace(ke,"");if(!t||!(e=mi(e)))return t;var r=tt(t),i=k(r,tt(e))+1;return Pi(r,0,i).join("")}function Tc(t,e,n){if(t=Ds(t),t&&(n||e===it))return t.replace(ze,"");if(!t||!(e=mi(e)))return t;var r=tt(t),i=z(r,tt(e));return Pi(r,i).join("")}function Pc(t,e){var n=Pt,r=Lt;if(ss(e)){var i="separator"in e?e.separator:i;n="length"in e?Ts(e.length):n,r="omission"in e?mi(e.omission):r}t=Ds(t);var o=t.length;if(G(t)){var a=tt(t);o=a.length}if(n>=o)return t;var u=n-J(r);if(u<1)return r;var s=a?Pi(a,0,u).join(""):t.slice(0,u);if(i===it)return s+r;if(a&&(u+=s.length-u),Td(i)){if(t.slice(u).search(i)){var c,l=s;for(i.global||(i=dl(i.source,Ds(Xe.exec(i))+"g")),i.lastIndex=0;c=i.exec(l);)var f=c.index;s=s.slice(0,f===it?u:f)}}else if(t.indexOf(mi(i),u)!=u){var d=s.lastIndexOf(i);d>-1&&(s=s.slice(0,d))}return s+r}function Lc(t){return t=Ds(t),t&&Te.test(t)?t.replace(Se,br):t}function Rc(t,e,n){return t=Ds(t),e=n?it:e,e===it?B(t)?rt(t):w(t):t.match(e)||[]}function Ac(t){var e=null==t?0:t.length,n=Mo();return t=e?v(t,function(t){if("function"!=typeof t[1])throw new hl(st);return[n(t[0]),t[1]]}):[],oi(function(n){for(var r=-1;++r<e;){var i=t[r];if(u(i[0],this,n))return u(i[1],this,n)}})}function Dc(t){return Fn(Vn(t,dt))}function Cc(t){return function(){return t}}function Oc(t,e){return null==t||t!==t?e:t}function Ic(t){return t}function Nc(t){return Vr("function"==typeof t?t:Vn(t,dt))}function Uc(t){return Wr(Vn(t,dt))}function Hc(t,e){return Xr(t,Vn(e,dt))}function zc(t,e,n){var r=Bs(e),i=ar(e,r);null!=n||ss(e)&&(i.length||!r.length)||(n=e,e=t,t=this,i=ar(e,Bs(e)));var o=!(ss(n)&&"chain"in n&&!n.chain),a=os(t);return c(i,function(n){var r=e[n];t[n]=r,a&&(t.prototype[n]=function(){var e=this.__chain__;if(o||e){var n=t(this.__wrapped__),i=n.__actions__=Vi(this.__actions__);return i.push({func:r,args:arguments,thisArg:t}),n.__chain__=e,n}return r.apply(t,m([this.value()],arguments))})}),t}function kc(){return ur._===this&&(ur._=Ml),this}function Vc(){}function Fc(t){return t=Ts(t),oi(function(e){return Zr(e,t)})}function jc(t){return Vo(t)?L(ra(t)):Jr(t)}function Gc(t){return function(e){return null==t?it:sr(t,e)}}function Bc(){return[]}function Wc(){return!1}function Xc(){return{}}function Yc(){return""}function qc(){return!0}function Zc(t,e){if(t=Ts(t),t<1||t>Nt)return[];var n=zt,r=Kl(t,zt);e=Mo(e),t-=zt;for(var i=O(r,e);++n<t;)e(n);return i}function Kc(t){return wd(t)?v(t,ra):xs(t)?[t]:Vi(Uf(Ds(t)))}function $c(t){var e=++wl;return Ds(t)+e}function Qc(t){return t&&t.length?qn(t,Ic,dr):it}function Jc(t,e){return t&&t.length?qn(t,Mo(e,2),dr):it}function tl(t){return P(t,Ic)}function el(t,e){return P(t,Mo(e,2))}function nl(t){return t&&t.length?qn(t,Ic,Gr):it}function rl(t,e){return t&&t.length?qn(t,Mo(e,2),Gr):it}function il(t){return t&&t.length?C(t,Ic):0}function ol(t,e){return t&&t.length?C(t,Mo(e,2)):0}e=null==e?ur:Sr.defaults(ur.Object(),e,Sr.pick(ur,Zn));var al=e.Array,ul=e.Date,sl=e.Error,cl=e.Function,ll=e.Math,fl=e.Object,dl=e.RegExp,pl=e.String,hl=e.TypeError,vl=al.prototype,ml=cl.prototype,gl=fl.prototype,_l=e["__core-js_shared__"],yl=ml.toString,xl=gl.hasOwnProperty,wl=0,bl=function(){var t=/[^.]+$/.exec(_l&&_l.keys&&_l.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),El=gl.toString,Sl=yl.call(fl),Ml=ur._,Tl=dl("^"+yl.call(xl).replace(Ne,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Pl=lr?e.Buffer:it,Ll=e.Symbol,Rl=e.Uint8Array,Al=Pl?Pl.allocUnsafe:it,Dl=Y(fl.getPrototypeOf,fl),Cl=fl.create,Ol=gl.propertyIsEnumerable,Il=vl.splice,Nl=Ll?Ll.isConcatSpreadable:it,Ul=Ll?Ll.iterator:it,Hl=Ll?Ll.toStringTag:it,zl=function(){try{var t=Lo(fl,"defineProperty");return t({},"",{}),t}catch(t){}}(),kl=e.clearTimeout!==ur.clearTimeout&&e.clearTimeout,Vl=ul&&ul.now!==ur.Date.now&&ul.now,Fl=e.setTimeout!==ur.setTimeout&&e.setTimeout,jl=ll.ceil,Gl=ll.floor,Bl=fl.getOwnPropertySymbols,Wl=Pl?Pl.isBuffer:it,Xl=e.isFinite,Yl=vl.join,ql=Y(fl.keys,fl),Zl=ll.max,Kl=ll.min,$l=ul.now,Ql=e.parseInt,Jl=ll.random,tf=vl.reverse,ef=Lo(e,"DataView"),nf=Lo(e,"Map"),rf=Lo(e,"Promise"),of=Lo(e,"Set"),af=Lo(e,"WeakMap"),uf=Lo(fl,"create"),sf=af&&new af,cf={},lf=ia(ef),ff=ia(nf),df=ia(rf),pf=ia(of),hf=ia(af),vf=Ll?Ll.prototype:it,mf=vf?vf.valueOf:it,gf=vf?vf.toString:it,_f=function(){function t(){}return function(e){if(!ss(e))return{};if(Cl)return Cl(e);t.prototype=e;var n=new t;return t.prototype=it,n}}();n.templateSettings={escape:Le,evaluate:Re,interpolate:Ae,variable:"",imports:{_:n}},n.prototype=r.prototype,n.prototype.constructor=n,i.prototype=_f(r.prototype),i.prototype.constructor=i,x.prototype=_f(r.prototype),x.prototype.constructor=x,nt.prototype.clear=Ge,nt.prototype.delete=en,nt.prototype.get=nn,nt.prototype.has=rn,nt.prototype.set=on,an.prototype.clear=un,an.prototype.delete=sn,an.prototype.get=cn,an.prototype.has=ln,an.prototype.set=fn,dn.prototype.clear=pn,dn.prototype.delete=hn,dn.prototype.get=vn,dn.prototype.has=mn,dn.prototype.set=gn,_n.prototype.add=_n.prototype.push=yn,_n.prototype.has=xn,wn.prototype.clear=bn,wn.prototype.delete=En,wn.prototype.get=Sn,wn.prototype.has=Mn,wn.prototype.set=Tn;var yf=Xi(nr),xf=Xi(or,!0),wf=Yi(),bf=Yi(!0),Ef=sf?function(t,e){return sf.set(t,e),t}:Ic,Sf=zl?function(t,e){return zl(t,"toString",{configurable:!0,enumerable:!1,value:Cc(e),writable:!0})}:Ic,Mf=oi,Tf=kl||function(t){return ur.clearTimeout(t)},Pf=of&&1/Z(new of([,-0]))[1]==It?function(t){return new of(t)}:Vc,Lf=sf?function(t){return sf.get(t)}:Vc,Rf=Bl?function(t){return null==t?[]:(t=fl(t),d(Bl(t),function(e){return Ol.call(t,e)}))}:Bc,Af=Bl?function(t){for(var e=[];t;)m(e,Rf(t)),t=Dl(t);return e}:Bc,Df=fr;(ef&&Df(new ef(new ArrayBuffer(1)))!=fe||nf&&Df(new nf)!=$t||rf&&Df(rf.resolve())!=ee||of&&Df(new of)!=ie||af&&Df(new af)!=se)&&(Df=function(t){var e=fr(t),n=e==te?t.constructor:it,r=n?ia(n):"";if(r)switch(r){case lf:return fe;case ff:return $t;case df:return ee;case pf:return ie;case hf:return se}return e});var Cf=_l?os:Wc,Of=ea(Ef),If=Fl||function(t,e){return ur.setTimeout(t,e)},Nf=ea(Sf),Uf=Yo(function(t){var e=[];return Oe.test(t)&&e.push(""),t.replace(Ie,function(t,n,r,i){e.push(r?i.replace(Be,"$1"):n||t)}),e}),Hf=oi(function(t,e){return $u(t)?Xn(t,er(e,1,$u,!0)):[]}),zf=oi(function(t,e){var n=Ma(e);return $u(n)&&(n=it),$u(t)?Xn(t,er(e,1,$u,!0),Mo(n,2)):[]}),kf=oi(function(t,e){var n=Ma(e);return $u(n)&&(n=it),$u(t)?Xn(t,er(e,1,$u,!0),it,n):[]}),Vf=oi(function(t){var e=v(t,Si);return e.length&&e[0]===t[0]?Tr(e):[]}),Ff=oi(function(t){var e=Ma(t),n=v(t,Si);return e===Ma(n)?e=it:n.pop(),n.length&&n[0]===t[0]?Tr(n,Mo(e,2)):[]}),jf=oi(function(t){var e=Ma(t),n=v(t,Si);return e="function"==typeof e?e:it,e&&n.pop(),n.length&&n[0]===t[0]?Tr(n,it,e):[]}),Gf=oi(La),Bf=xo(function(t,e){var n=null==t?0:t.length,r=zn(t,e);return ei(t,v(e,function(t){return zo(t,n)?+t:t}).sort(Ui)),r}),Wf=oi(function(t){return gi(er(t,1,$u,!0))}),Xf=oi(function(t){var e=Ma(t);return $u(e)&&(e=it),gi(er(t,1,$u,!0),Mo(e,2))}),Yf=oi(function(t){var e=Ma(t);return e="function"==typeof e?e:it,gi(er(t,1,$u,!0),it,e)}),qf=oi(function(t,e){return $u(t)?Xn(t,e):[]}),Zf=oi(function(t){return bi(d(t,$u))}),Kf=oi(function(t){var e=Ma(t);return $u(e)&&(e=it),bi(d(t,$u),Mo(e,2))}),$f=oi(function(t){var e=Ma(t);return e="function"==typeof e?e:it,bi(d(t,$u),it,e)}),Qf=oi(Ka),Jf=oi(function(t){var e=t.length,n=e>1?t[e-1]:it;return n="function"==typeof n?(t.pop(),n):it,$a(t,n)}),td=xo(function(t){var e=t.length,n=e?t[0]:0,r=this.__wrapped__,o=function(e){return zn(e,t)};return!(e>1||this.__actions__.length)&&r instanceof x&&zo(n)?(r=r.slice(n,+n+(e?1:0)),r.__actions__.push({func:nu,args:[o],thisArg:it}),new i(r,this.__chain__).thru(function(t){return e&&!t.length&&t.push(it),t})):this.thru(o)}),ed=Bi(function(t,e,n){xl.call(t,n)?++t[n]:Hn(t,n,1)}),nd=Ji(va),rd=Ji(ma),id=Bi(function(t,e,n){xl.call(t,n)?t[n].push(e):Hn(t,n,[e])}),od=oi(function(t,e,n){var r=-1,i="function"==typeof e,o=Ku(t)?al(t.length):[];return yf(t,function(t){o[++r]=i?u(e,t,n):Lr(t,e,n)}),o}),ad=Bi(function(t,e,n){Hn(t,n,e)}),ud=Bi(function(t,e,n){t[n?0:1].push(e)},function(){return[[],[]]}),sd=oi(function(t,e){if(null==t)return[];var n=e.length;return n>1&&ko(t,e[0],e[1])?e=[]:n>2&&ko(e[0],e[1],e[2])&&(e=[e[0]]),Kr(t,er(e,1),[])}),cd=Vl||function(){return ur.Date.now()},ld=oi(function(t,e,n){var r=gt;if(n.length){var i=q(n,So(ld));r|=bt}return po(t,r,e,n,i)}),fd=oi(function(t,e,n){var r=gt|_t;if(n.length){var i=q(n,So(fd));r|=bt}return po(e,r,t,n,i)}),dd=oi(function(t,e){return Wn(t,1,e)}),pd=oi(function(t,e,n){return Wn(t,Ls(e)||0,n)});Nu.Cache=dn;var hd=Mf(function(t,e){e=1==e.length&&wd(e[0])?v(e[0],N(Mo())):v(er(e,1),N(Mo()));var n=e.length;return oi(function(r){for(var i=-1,o=Kl(r.length,n);++i<o;)r[i]=e[i].call(this,r[i]);return u(t,this,r)})}),vd=oi(function(t,e){var n=q(e,So(vd));return po(t,bt,it,e,n)}),md=oi(function(t,e){var n=q(e,So(md));return po(t,Et,it,e,n)}),gd=xo(function(t,e){return po(t,Mt,it,it,it,e)}),_d=so(dr),yd=so(function(t,e){return t>=e}),xd=Rr(function(){return arguments}())?Rr:function(t){return cs(t)&&xl.call(t,"callee")&&!Ol.call(t,"callee")},wd=al.isArray,bd=pr?N(pr):Ar,Ed=Wl||Wc,Sd=hr?N(hr):Dr,Md=vr?N(vr):Ir,Td=mr?N(mr):Hr,Pd=gr?N(gr):zr,Ld=_r?N(_r):kr,Rd=so(Gr),Ad=so(function(t,e){return t<=e}),Dd=Wi(function(t,e){if(Bo(e)||Ku(e))return void Fi(e,Bs(e),t);for(var n in e)xl.call(e,n)&&Cn(t,n,e[n])}),Cd=Wi(function(t,e){Fi(e,Ws(e),t)}),Od=Wi(function(t,e,n,r){Fi(e,Ws(e),t,r)}),Id=Wi(function(t,e,n,r){Fi(e,Bs(e),t,r)}),Nd=xo(zn),Ud=oi(function(t){return t.push(it,ho),u(Od,it,t)}),Hd=oi(function(t){return t.push(it,vo),u(jd,it,t)}),zd=no(function(t,e,n){t[e]=n},Cc(Ic)),kd=no(function(t,e,n){xl.call(t,e)?t[e].push(n):t[e]=[n]},Mo),Vd=oi(Lr),Fd=Wi(function(t,e,n){Yr(t,e,n)}),jd=Wi(function(t,e,n,r){Yr(t,e,n,r)}),Gd=xo(function(t,e){var n={};if(null==t)return n;var r=!1;e=v(e,function(e){return e=Ti(e,t),r||(r=e.length>1),e}),Fi(t,bo(t),n),r&&(n=Vn(n,dt|pt|ht,mo));for(var i=e.length;i--;)_i(n,e[i]);return n}),Bd=xo(function(t,e){return null==t?{}:$r(t,e)}),Wd=fo(Bs),Xd=fo(Ws),Yd=Ki(function(t,e,n){return e=e.toLowerCase(),t+(n?sc(e):e)}),qd=Ki(function(t,e,n){return t+(n?"-":"")+e.toLowerCase()}),Zd=Ki(function(t,e,n){return t+(n?" ":"")+e.toLowerCase()}),Kd=Zi("toLowerCase"),$d=Ki(function(t,e,n){return t+(n?"_":"")+e.toLowerCase()}),Qd=Ki(function(t,e,n){return t+(n?" ":"")+tp(e)}),Jd=Ki(function(t,e,n){return t+(n?" ":"")+e.toUpperCase()}),tp=Zi("toUpperCase"),ep=oi(function(t,e){try{return u(t,it,e)}catch(t){return rs(t)?t:new sl(t)}}),np=xo(function(t,e){return c(e,function(e){e=ra(e),Hn(t,e,ld(t[e],t))}),t}),rp=to(),ip=to(!0),op=oi(function(t,e){return function(n){return Lr(n,t,e)}}),ap=oi(function(t,e){return function(n){return Lr(t,n,e)}}),up=io(v),sp=io(f),cp=io(y),lp=uo(),fp=uo(!0),dp=ro(function(t,e){return t+e},0),pp=lo("ceil"),hp=ro(function(t,e){return t/e},1),vp=lo("floor"),mp=ro(function(t,e){return t*e},1),gp=lo("round"),_p=ro(function(t,e){return t-e},0);return n.after=Lu,n.ary=Ru,n.assign=Dd,n.assignIn=Cd,n.assignInWith=Od,n.assignWith=Id,n.at=Nd,n.before=Au,n.bind=ld,n.bindAll=np,n.bindKey=fd,n.castArray=Gu,n.chain=tu,n.chunk=ua,n.compact=sa,n.concat=ca,n.cond=Ac,n.conforms=Dc,n.constant=Cc,n.countBy=ed,n.create=Cs,n.curry=Du,n.curryRight=Cu,n.debounce=Ou,n.defaults=Ud,n.defaultsDeep=Hd,n.defer=dd,n.delay=pd,n.difference=Hf,n.differenceBy=zf,n.differenceWith=kf,n.drop=la,n.dropRight=fa,n.dropRightWhile=da,n.dropWhile=pa,n.fill=ha,n.filter=fu,n.flatMap=du,n.flatMapDeep=pu,n.flatMapDepth=hu,n.flatten=ga,n.flattenDeep=_a,n.flattenDepth=ya,n.flip=Iu,n.flow=rp,n.flowRight=ip,n.fromPairs=xa,n.functions=ks,n.functionsIn=Vs,n.groupBy=id,n.initial=Ea,n.intersection=Vf,n.intersectionBy=Ff,n.intersectionWith=jf,n.invert=zd,n.invertBy=kd,n.invokeMap=od,n.iteratee=Nc,n.keyBy=ad,n.keys=Bs,n.keysIn=Ws,n.map=_u,n.mapKeys=Xs,n.mapValues=Ys,n.matches=Uc,n.matchesProperty=Hc,n.memoize=Nu,n.merge=Fd,n.mergeWith=jd,n.method=op,n.methodOf=ap,n.mixin=zc,n.negate=Uu,n.nthArg=Fc,n.omit=Gd,n.omitBy=qs,n.once=Hu,n.orderBy=yu,n.over=up,n.overArgs=hd,n.overEvery=sp,n.overSome=cp,n.partial=vd,n.partialRight=md,n.partition=ud,n.pick=Bd,n.pickBy=Zs,n.property=jc,n.propertyOf=Gc,n.pull=Gf,n.pullAll=La,n.pullAllBy=Ra,n.pullAllWith=Aa,n.pullAt=Bf,n.range=lp,n.rangeRight=fp,n.rearg=gd,n.reject=bu,n.remove=Da,n.rest=zu,n.reverse=Ca,n.sampleSize=Su,n.set=$s,n.setWith=Qs,n.shuffle=Mu,n.slice=Oa,n.sortBy=sd,n.sortedUniq=Va,n.sortedUniqBy=Fa,n.split=yc,n.spread=ku,n.tail=ja,n.take=Ga,n.takeRight=Ba,n.takeRightWhile=Wa,n.takeWhile=Xa,n.tap=eu,n.throttle=Vu,n.thru=nu,n.toArray=Ss,n.toPairs=Wd,n.toPairsIn=Xd,n.toPath=Kc,n.toPlainObject=Rs,n.transform=Js,n.unary=Fu,n.union=Wf,n.unionBy=Xf,n.unionWith=Yf,n.uniq=Ya,n.uniqBy=qa,n.uniqWith=Za,n.unset=tc,n.unzip=Ka,n.unzipWith=$a,n.update=ec,n.updateWith=nc,n.values=rc,n.valuesIn=ic,n.without=qf,n.words=Rc,n.wrap=ju,n.xor=Zf,n.xorBy=Kf,n.xorWith=$f,n.zip=Qf,n.zipObject=Qa,n.zipObjectDeep=Ja,n.zipWith=Jf,n.entries=Wd,n.entriesIn=Xd,n.extend=Cd,n.extendWith=Od,zc(n,n),n.add=dp,n.attempt=ep,n.camelCase=Yd,n.capitalize=sc,n.ceil=pp,n.clamp=oc,n.clone=Bu,n.cloneDeep=Xu,n.cloneDeepWith=Yu,n.cloneWith=Wu,n.conformsTo=qu,n.deburr=cc,n.defaultTo=Oc,n.divide=hp,n.endsWith=lc,n.eq=Zu,n.escape=fc,n.escapeRegExp=dc,n.every=lu,n.find=nd,n.findIndex=va,n.findKey=Os,n.findLast=rd,n.findLastIndex=ma,n.findLastKey=Is,n.floor=vp,n.forEach=vu,n.forEachRight=mu,n.forIn=Ns,n.forInRight=Us,n.forOwn=Hs,n.forOwnRight=zs,n.get=Fs,n.gt=_d,n.gte=yd,n.has=js,n.hasIn=Gs,n.head=wa,n.identity=Ic,n.includes=gu,n.indexOf=ba,n.inRange=ac,n.invoke=Vd,n.isArguments=xd,n.isArray=wd,n.isArrayBuffer=bd,n.isArrayLike=Ku,n.isArrayLikeObject=$u,n.isBoolean=Qu,n.isBuffer=Ed,n.isDate=Sd,n.isElement=Ju,n.isEmpty=ts,n.isEqual=es,n.isEqualWith=ns,n.isError=rs,n.isFinite=is,n.isFunction=os,n.isInteger=as,n.isLength=us,n.isMap=Md,n.isMatch=ls,n.isMatchWith=fs,n.isNaN=ds,n.isNative=ps,n.isNil=vs,n.isNull=hs,n.isNumber=ms,n.isObject=ss,n.isObjectLike=cs,n.isPlainObject=gs,n.isRegExp=Td,n.isSafeInteger=_s,n.isSet=Pd,n.isString=ys,n.isSymbol=xs,n.isTypedArray=Ld,n.isUndefined=ws,n.isWeakMap=bs,n.isWeakSet=Es,n.join=Sa,n.kebabCase=qd,n.last=Ma,n.lastIndexOf=Ta,n.lowerCase=Zd,n.lowerFirst=Kd,n.lt=Rd,n.lte=Ad,n.max=Qc,n.maxBy=Jc,n.mean=tl,n.meanBy=el,n.min=nl,n.minBy=rl,n.stubArray=Bc,n.stubFalse=Wc,n.stubObject=Xc,n.stubString=Yc,n.stubTrue=qc,n.multiply=mp,n.nth=Pa,n.noConflict=kc,n.noop=Vc,n.now=cd,n.pad=pc,n.padEnd=hc,n.padStart=vc,n.parseInt=mc,n.random=uc,n.reduce=xu,n.reduceRight=wu,n.repeat=gc,n.replace=_c,n.result=Ks,n.round=gp,n.runInContext=t,n.sample=Eu,n.size=Tu,n.snakeCase=$d,n.some=Pu,n.sortedIndex=Ia,n.sortedIndexBy=Na,n.sortedIndexOf=Ua,n.sortedLastIndex=Ha,n.sortedLastIndexBy=za,n.sortedLastIndexOf=ka,n.startCase=Qd,n.startsWith=xc,n.subtract=_p,n.sum=il,n.sumBy=ol,n.template=wc,n.times=Zc,n.toFinite=Ms,n.toInteger=Ts,n.toLength=Ps,n.toLower=bc,n.toNumber=Ls,n.toSafeInteger=As,n.toString=Ds,n.toUpper=Ec,n.trim=Sc,n.trimEnd=Mc,n.trimStart=Tc,n.truncate=Pc,n.unescape=Lc,n.uniqueId=$c,n.upperCase=Jd,n.upperFirst=tp,n.each=vu,n.eachRight=mu,n.first=wa,zc(n,function(){var t={};return nr(n,function(e,r){xl.call(n.prototype,r)||(t[r]=e)}),t}(),{chain:!1}),n.VERSION=ot,c(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){n[t].placeholder=n}),c(["drop","take"],function(t,e){x.prototype[t]=function(n){n=n===it?1:Zl(Ts(n),0);var r=this.__filtered__&&!e?new x(this):this.clone();return r.__filtered__?r.__takeCount__=Kl(n,r.__takeCount__):r.__views__.push({size:Kl(n,zt),type:t+(r.__dir__<0?"Right":"")}),r},x.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}}),c(["filter","map","takeWhile"],function(t,e){var n=e+1,r=n==Dt||n==Ot;x.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:Mo(t,3),type:n}),e.__filtered__=e.__filtered__||r,e}}),c(["head","last"],function(t,e){var n="take"+(e?"Right":"");x.prototype[t]=function(){return this[n](1).value()[0]}}),c(["initial","tail"],function(t,e){var n="drop"+(e?"":"Right");x.prototype[t]=function(){return this.__filtered__?new x(this):this[n](1)}}),x.prototype.compact=function(){return this.filter(Ic)},x.prototype.find=function(t){return this.filter(t).head()},x.prototype.findLast=function(t){return this.reverse().find(t)},x.prototype.invokeMap=oi(function(t,e){return"function"==typeof t?new x(this):this.map(function(n){return Lr(n,t,e)})}),x.prototype.reject=function(t){return this.filter(Uu(Mo(t)))},x.prototype.slice=function(t,e){t=Ts(t);var n=this;return n.__filtered__&&(t>0||e<0)?new x(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),e!==it&&(e=Ts(e),n=e<0?n.dropRight(-e):n.take(e-t)),n)},x.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},x.prototype.toArray=function(){return this.take(zt)},nr(x.prototype,function(t,e){var r=/^(?:filter|find|map|reject)|While$/.test(e),o=/^(?:head|last)$/.test(e),a=n[o?"take"+("last"==e?"Right":""):e],u=o||/^find/.test(e);a&&(n.prototype[e]=function(){var e=this.__wrapped__,s=o?[1]:arguments,c=e instanceof x,l=s[0],f=c||wd(e),d=function(t){var e=a.apply(n,m([t],s));return o&&p?e[0]:e};f&&r&&"function"==typeof l&&1!=l.length&&(c=f=!1);var p=this.__chain__,h=!!this.__actions__.length,v=u&&!p,g=c&&!h;if(!u&&f){e=g?e:new x(this);var _=t.apply(e,s);return _.__actions__.push({func:nu,args:[d],thisArg:it}),new i(_,p)}return v&&g?t.apply(this,s):(_=this.thru(d),v?o?_.value()[0]:_.value():_)})}),c(["pop","push","shift","sort","splice","unshift"],function(t){var e=vl[t],r=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",i=/^(?:pop|shift)$/.test(t);n.prototype[t]=function(){var t=arguments;if(i&&!this.__chain__){var n=this.value();return e.apply(wd(n)?n:[],t)}return this[r](function(n){return e.apply(wd(n)?n:[],t)})}}),nr(x.prototype,function(t,e){var r=n[e];if(r){var i=r.name+"",o=cf[i]||(cf[i]=[]);o.push({name:e,func:r})}}),cf[eo(it,_t).name]=[{name:"wrapper",func:it}],x.prototype.clone=R,x.prototype.reverse=$,x.prototype.value=et,n.prototype.at=td,n.prototype.chain=ru,n.prototype.commit=iu,n.prototype.next=ou,n.prototype.plant=uu,n.prototype.reverse=su,n.prototype.toJSON=n.prototype.valueOf=n.prototype.value=cu,n.prototype.first=n.prototype.head,Ul&&(n.prototype[Ul]=au),n},Sr=Er();ur._=Sr,r=function(){return Sr}.call(e,n,e,i),!(r!==it&&(i.exports=r))}).call(this)}).call(e,function(){return this}(),n(26)(t))},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children=[],t.webpackPolyfill=1),t}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=n(3),u=r(a);window.THREE=window.THREE||THREE,n(28);var s=function(){function t(e,n){i(this,t),this.camera=e,this.domElement=n,this.orbitControls=new THREE.OrbitControls(e,n),this.orbitControls.enableDamping=!0,this.orbitControls.minDistance=u.default.controls.minDistance,this.orbitControls.maxDistance=u.default.controls.maxDistance,this.orbitControls.rotateSpeed=u.default.controls.rotateSpeed,this.orbitControls.enabled=!0,this.resetCameraOrbit()}return o(t,[{key:"resetCameraOrbit",value:function(){this.camera.position.fromArray(u.default.camera.cameraPos),this.camera.lookAt(new THREE.Vector3(0,0,0)),this.camera.near=u.default.camera.near,this.camera.far=u.default.camera.far,this.camera.updateProjectionMatrix()}},{key:"update",value:function(t){this.orbitControls.update(t)}},{key:"dispose",value:function(){this.orbitControls.dispose()}}]),t}();e.default=s},function(t,e){THREE.OrbitControls=function(t,e){function n(){return 2*Math.PI/60/60*O.autoRotateSpeed}function r(){return Math.pow(.95,O.zoomSpeed)}function i(t){F.theta-=t}function o(t){F.phi-=t}function a(t){O.object instanceof THREE.PerspectiveCamera?j/=t:O.object instanceof THREE.OrthographicCamera?(O.object.zoom=Math.max(O.minZoom,Math.min(O.maxZoom,O.object.zoom*t)),O.object.updateProjectionMatrix(),B=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),O.enableZoom=!1)}function u(t){O.object instanceof THREE.PerspectiveCamera?j*=t:O.object instanceof THREE.OrthographicCamera?(O.object.zoom=Math.max(O.minZoom,Math.min(O.maxZoom,O.object.zoom/t)),O.object.updateProjectionMatrix(),B=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),O.enableZoom=!1)}function s(t){W.set(t.clientX,t.clientY)}function c(t){$.set(t.clientX,t.clientY)}function l(t){q.set(t.clientX,t.clientY)}function f(t){X.set(t.clientX,t.clientY),Y.subVectors(X,W);var e=O.domElement===document?O.domElement.body:O.domElement;i(2*Math.PI*Y.x/e.clientWidth*O.rotateSpeed),o(2*Math.PI*Y.y/e.clientHeight*O.rotateSpeed),W.copy(X),O.update()}function d(t){Q.set(t.clientX,t.clientY),J.subVectors(Q,$),J.y>0?a(r()):J.y<0&&u(r()),$.copy(Q),O.update()}function p(t){Z.set(t.clientX,t.clientY),K.subVectors(Z,q),nt(K.x,K.y),q.copy(Z),O.update()}function h(t){}function v(t){t.deltaY<0?u(r()):t.deltaY>0&&a(r()),O.update()}function m(t){switch(t.keyCode){case O.keys.UP:nt(0,O.keyPanSpeed),O.update();break;case O.keys.BOTTOM:nt(0,-O.keyPanSpeed),O.update();break;case O.keys.LEFT:nt(O.keyPanSpeed,0),O.update();break;case O.keys.RIGHT:nt(-O.keyPanSpeed,0),O.update()}}function g(t){W.set(t.touches[0].pageX,t.touches[0].pageY)}function _(t){var e=t.touches[0].pageX-t.touches[1].pageX,n=t.touches[0].pageY-t.touches[1].pageY,r=Math.sqrt(e*e+n*n);$.set(0,r)}function y(t){q.set(t.touches[0].pageX,t.touches[0].pageY)}function x(t){X.set(t.touches[0].pageX,t.touches[0].pageY),Y.subVectors(X,W);var e=O.domElement===document?O.domElement.body:O.domElement;i(2*Math.PI*Y.x/e.clientWidth*O.rotateSpeed),o(2*Math.PI*Y.y/e.clientHeight*O.rotateSpeed),W.copy(X),O.update()}function w(t){var e=t.touches[0].pageX-t.touches[1].pageX,n=t.touches[0].pageY-t.touches[1].pageY,i=Math.sqrt(e*e+n*n);Q.set(0,i),J.subVectors(Q,$),J.y>0?u(r()):J.y<0&&a(r()),$.copy(Q),O.update()}function b(t){Z.set(t.touches[0].pageX,t.touches[0].pageY),K.subVectors(Z,q),nt(K.x,K.y),q.copy(Z),O.update()}function E(t){}function S(t){if(O.enabled!==!1){if(t.preventDefault(),t.button===O.mouseButtons.ORBIT){if(O.enableRotate===!1)return;s(t),z=H.ROTATE}else if(t.button===O.mouseButtons.ZOOM){if(O.enableZoom===!1)return;c(t),z=H.DOLLY}else if(t.button===O.mouseButtons.PAN){if(O.enablePan===!1)return;l(t),z=H.PAN}z!==H.NONE&&(document.addEventListener("mousemove",M,!1),document.addEventListener("mouseup",T,!1),O.dispatchEvent(N))}}function M(t){if(O.enabled!==!1)if(t.preventDefault(),z===H.ROTATE){if(O.enableRotate===!1)return;f(t)}else if(z===H.DOLLY){if(O.enableZoom===!1)return;d(t)}else if(z===H.PAN){if(O.enablePan===!1)return;p(t)}}function T(t){O.enabled!==!1&&(h(t),document.removeEventListener("mousemove",M,!1),document.removeEventListener("mouseup",T,!1),O.dispatchEvent(U),z=H.NONE)}function P(t){O.enabled===!1||O.enableZoom===!1||z!==H.NONE&&z!==H.ROTATE||(t.preventDefault(),t.stopPropagation(),v(t),O.dispatchEvent(N),O.dispatchEvent(U))}function L(t){O.enabled!==!1&&O.enableKeys!==!1&&O.enablePan!==!1&&m(t)}function R(t){if(O.enabled!==!1){switch(t.touches.length){case 1:if(O.enableRotate===!1)return;g(t),z=H.TOUCH_ROTATE;break;case 2:if(O.enableZoom===!1)return;_(t),z=H.TOUCH_DOLLY;break;case 3:if(O.enablePan===!1)return;y(t),z=H.TOUCH_PAN;break;default:z=H.NONE}z!==H.NONE&&O.dispatchEvent(N)}}function A(t){if(O.enabled!==!1)switch(t.preventDefault(),t.stopPropagation(),t.touches.length){case 1:if(O.enableRotate===!1)return;if(z!==H.TOUCH_ROTATE)return;x(t);break;case 2:if(O.enableZoom===!1)return;if(z!==H.TOUCH_DOLLY)return;w(t);break;case 3:if(O.enablePan===!1)return;if(z!==H.TOUCH_PAN)return;b(t);break;default:z=H.NONE}}function D(t){O.enabled!==!1&&(E(t),O.dispatchEvent(U),z=H.NONE)}function C(t){t.preventDefault()}this.object=t,this.domElement=void 0!==e?e:document,this.enabled=!0,this.target=new THREE.Vector3,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-(1/0),this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.25,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.enableKeys=!0,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={ORBIT:THREE.MOUSE.LEFT,ZOOM:THREE.MOUSE.MIDDLE,PAN:THREE.MOUSE.RIGHT},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=function(){return V.phi},this.getAzimuthalAngle=function(){return V.theta},this.reset=function(){O.target.copy(O.target0),O.object.position.copy(O.position0),O.object.zoom=O.zoom0,O.object.updateProjectionMatrix(),O.dispatchEvent(I),O.update(),z=H.NONE},this.update=function(){var e=new THREE.Vector3,r=(new THREE.Quaternion).setFromUnitVectors(t.up,new THREE.Vector3(0,1,0)),o=r.clone().inverse(),a=new THREE.Vector3,u=new THREE.Quaternion;return function(){var t=O.object.position;return e.copy(t).sub(O.target),e.applyQuaternion(r),V.setFromVector3(e),O.autoRotate&&z===H.NONE&&i(n()),V.theta+=F.theta,V.phi+=F.phi,V.theta=Math.max(O.minAzimuthAngle,Math.min(O.maxAzimuthAngle,V.theta)),V.phi=Math.max(O.minPolarAngle,Math.min(O.maxPolarAngle,V.phi)),V.makeSafe(),V.radius*=j,V.radius=Math.max(O.minDistance,Math.min(O.maxDistance,V.radius)),O.target.add(G),e.setFromSpherical(V),e.applyQuaternion(o),t.copy(O.target).add(e),O.object.lookAt(O.target),O.enableDamping===!0?(F.theta*=1-O.dampingFactor,F.phi*=1-O.dampingFactor):F.set(0,0,0),
j=1,G.set(0,0,0),!!(B||a.distanceToSquared(O.object.position)>k||8*(1-u.dot(O.object.quaternion))>k)&&(O.dispatchEvent(I),a.copy(O.object.position),u.copy(O.object.quaternion),B=!1,!0)}}(),this.dispose=function(){O.domElement.removeEventListener("contextmenu",C,!1),O.domElement.removeEventListener("mousedown",S,!1),O.domElement.removeEventListener("wheel",P,!1),O.domElement.removeEventListener("touchstart",R,!1),O.domElement.removeEventListener("touchend",D,!1),O.domElement.removeEventListener("touchmove",A,!1),document.removeEventListener("mousemove",M,!1),document.removeEventListener("mouseup",T,!1),window.removeEventListener("keydown",L,!1)};var O=this,I={type:"change"},N={type:"start"},U={type:"end"},H={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_DOLLY:4,TOUCH_PAN:5},z=H.NONE,k=1e-6,V=new THREE.Spherical,F=new THREE.Spherical,j=1,G=new THREE.Vector3,B=!1,W=new THREE.Vector2,X=new THREE.Vector2,Y=new THREE.Vector2,q=new THREE.Vector2,Z=new THREE.Vector2,K=new THREE.Vector2,$=new THREE.Vector2,Q=new THREE.Vector2,J=new THREE.Vector2,tt=function(){var t=new THREE.Vector3;return function(e,n){t.setFromMatrixColumn(n,0),t.multiplyScalar(-e),G.add(t)}}(),et=function(){var t=new THREE.Vector3;return function(e,n){t.setFromMatrixColumn(n,1),t.multiplyScalar(e),G.add(t)}}(),nt=function(){var t=new THREE.Vector3;return function(e,n){var r=O.domElement===document?O.domElement.body:O.domElement;if(O.object instanceof THREE.PerspectiveCamera){var i=O.object.position;t.copy(i).sub(O.target);var o=t.length();o*=Math.tan(O.object.fov/2*Math.PI/180),tt(2*e*o/r.clientHeight,O.object.matrix),et(2*n*o/r.clientHeight,O.object.matrix)}else O.object instanceof THREE.OrthographicCamera?(tt(e*(O.object.right-O.object.left)/O.object.zoom/r.clientWidth,O.object.matrix),et(n*(O.object.top-O.object.bottom)/O.object.zoom/r.clientHeight,O.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),O.enablePan=!1)}}();O.domElement.addEventListener("contextmenu",C,!1),O.domElement.addEventListener("mousedown",S,!1),O.domElement.addEventListener("wheel",P,!1),O.domElement.addEventListener("touchstart",R,!1),O.domElement.addEventListener("touchend",D,!1),O.domElement.addEventListener("touchmove",A,!1),window.addEventListener("keydown",L,!1),this.update()},THREE.OrbitControls.prototype=Object.create(THREE.EventDispatcher.prototype),THREE.OrbitControls.prototype.constructor=THREE.OrbitControls,Object.defineProperties(THREE.OrbitControls.prototype,{center:{get:function(){return console.warn("THREE.OrbitControls: .center has been renamed to .target"),this.target}},noZoom:{get:function(){return console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),!this.enableZoom},set:function(t){console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),this.enableZoom=!t}},noRotate:{get:function(){return console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),!this.enableRotate},set:function(t){console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),this.enableRotate=!t}},noPan:{get:function(){return console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),!this.enablePan},set:function(t){console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),this.enablePan=!t}},noKeys:{get:function(){return console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),!this.enableKeys},set:function(t){console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),this.enableKeys=!t}},staticMoving:{get:function(){return console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),!this.enableDamping},set:function(t){console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),this.enableDamping=!t}},dynamicDampingFactor:{get:function(){return console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor},set:function(t){console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor=t}}})},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=n(30),u=r(a),s=n(31),c=r(s),l=n(3),f=r(l),d={value:0},p=function(){function t(e){i(this,t);var n=e.material.uniforms;n.time=d,n.swayFrequency=f.default.grass.swayFrequency,n.swayAmplitude=f.default.grass.swayAmplitude,n.atlasSize={value:2},n.vertexSwayAmplitude=f.default.grass.vertexSwayAmplitude,n.vertexSwayAmplitudeNormal=f.default.grass.vertexSwayAmplitudeNormal;var r=new THREE.RawShaderMaterial({uniforms:n,vertexShader:u.default,fragmentShader:c.default,side:THREE.DoubleSide,transparent:!0});r.name="grass_instanced_custom",e.material=r}return o(t,[{key:"update",value:function(t){d.value=t}}]),t}();e.default=p},function(t,e){t.exports="precision highp float;\nprecision mediump int;\n\nattribute vec3 position;\nattribute vec3 normal;\nattribute vec2 uv;\n\nattribute vec4 transform1;\nattribute vec4 transform2;\nattribute vec4 transform3;\n\nuniform mat4 projectionMatrix;\nuniform mat4 viewMatrix;\n\nuniform float vertexSwayAmplitude;\nuniform float vertexSwayAmplitudeNormal;\n\nuniform float swayFrequency;\nuniform float swayAmplitude;\n\nuniform float time;\nuniform float atlasSize;\n\nvarying vec2 vUv;\nvarying vec3 vViewPosition;\n\nvarying vec2 vTexOffset;\n\nvarying float vSway;\n\nmat4 transpose(in highp mat4 inMatrix) {\n    highp vec4 i0 = inMatrix[0];\n    highp vec4 i1 = inMatrix[1];\n    highp vec4 i2 = inMatrix[2];\n    highp vec4 i3 = inMatrix[3];\n\n    highp mat4 outMatrix = mat4(\n         vec4(i0.x, i1.x, i2.x, i3.x),\n         vec4(i0.y, i1.y, i2.y, i3.y),\n         vec4(i0.z, i1.z, i2.z, i3.z),\n         vec4(i0.w, i1.w, i2.w, i3.w)\n         );\n\n    return outMatrix;\n}\n\nvoid main() {\n    vec4 tr1 = transform1;\n    vec4 tr2 = transform2;\n    vec4 tr3 = transform3;\n    vec4 tr4 = vec4(0.0, 0.0, 0.0, 1.0);\n\n    vec3 objectNormal = mat3(\n        vec3(transform1.x, transform2.x, transform3.x),\n        vec3(transform1.y, transform2.y, transform3.y),\n        vec3(transform1.z, transform2.z, transform3.z)\n    ) * vec3( normal );\n\n    float seed = (transform1.w + transform3.w) * transform1.x * transform3.z * 12345.678;\n\n    vSway = sin(swayFrequency * time + seed) * uv.y * uv.y;\n    float swayN = sin(time + seed * 0.246) * uv.y;\n\n    // vertex sway\n    tr1.w += objectNormal.x * vertexSwayAmplitudeNormal * swayN - objectNormal.z * vertexSwayAmplitude * vSway;\n    tr3.w += objectNormal.z * vertexSwayAmplitudeNormal * swayN + objectNormal.x * vertexSwayAmplitude * vSway;\n\n    mat4 modelMatrix = transpose(mat4(tr1, tr2, tr3, tr4));\n    mat4 modelViewMatrix = viewMatrix * modelMatrix;\n\n    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\n    gl_Position = projectionMatrix * mvPosition;\n\n    vec4 worldPosition = modelMatrix * vec4( position, 1.0 );\n\n    float texSeed = mod(transform1.w * transform3.w * 123456.456, atlasSize * atlasSize);\n\n    vTexOffset = vec2(\n        floor(texSeed / atlasSize),\n        floor(mod(texSeed, atlasSize))\n    ) / atlasSize;\n\n    vSway *= swayAmplitude;\n\n    vViewPosition = - mvPosition.xyz;\n    vUv = uv / atlasSize + vTexOffset;\n}\n"},function(t,e){t.exports="precision highp float;\nprecision mediump int;\n\nuniform sampler2D map;\nuniform float time;\n\nuniform float atlasSize;\n\nvarying vec3 vViewPosition;\nvarying vec2 vUv;\n\nvarying vec2 vTexOffset;\n\nvarying float vSway;\n\nvoid main() {\n    vec2 cUv = (vUv - vTexOffset) * atlasSize; // [0, 1]\n\n    float transformedX = clamp(vSway + cUv.x, 0., 1.) / atlasSize + vTexOffset.x; // clamp could be removed if texture is fine\n    vec4 col = texture2D(map, vec2(transformedX , vUv.y));\n    if (col.a < 0.1) discard; // attenuate with vViewPosition.z if dependence on range is needed\n    gl_FragColor = vec4(col.rgb, 1.);\n}\n"},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=n(3),u=r(a),s=n(33),c=n(34);n(35);var l={value:0},f=function(){function t(e){i(this,t),THREE.BufferGeometryUtils.computeTangents(e.geometry),u.default.water.normalMap.value=u.default.water.normalMaps[0];var n={normalMap:u.default.water.normalMap,time:l,lightDir:{value:new THREE.Vector3(1,1,1)},lightColor:{value:new THREE.Color(16777215)},opacity:u.default.water.opacity,speed:u.default.water.speed,scale:u.default.water.scale,detail1:u.default.water.detail1,detail2:u.default.water.detail2,detail3:u.default.water.detail3};u.default.water.normalMaps.forEach(function(t){t.wrapS=THREE.RepeatWrapping,t.wrapT=THREE.RepeatWrapping});var r=new THREE.RawShaderMaterial({vertexShader:s,fragmentShader:c,uniforms:n,transparent:!0});r.name="water_custom",e.material=r}return o(t,[{key:"update",value:function(t){l.value=t}}]),t}();e.default=f},function(t,e){t.exports="precision highp float;\n\nattribute vec3 position;\nattribute vec4 tangent;\nattribute vec3 normal;\n\nuniform mat4 modelMatrix;\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform mat3 normalMatrix;\nuniform vec3 cameraPosition;\n\nuniform float scale;\n\nvarying vec2 vUv;\nvarying vec3 vEyeSurfaceLocal;\n\nvoid main() {\n    vec3 worldPos = (modelMatrix * vec4(position, 1.0)).xyz;\n\n    vec3 n = normalize(normalMatrix * normal);\n    vec3 t = normalize(normalMatrix * tangent.xyz);\n    vec3 b = cross(n, t) * tangent.w; // tangent.w is expected to be +-1 for orientation\n\n    vEyeSurfaceLocal = (worldPos - cameraPosition) * mat3(t, b, n); // reverse mult order: mat3 is transposed\n    vUv = worldPos.zx * scale;\n\n    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n}\n"},function(t,e){t.exports="precision highp float;\n\nuniform float time;\nuniform sampler2D normalMap;\nuniform vec3 lightDir;\nuniform vec3 lightColor;\n\nuniform float opacity;\nuniform float speed;\nuniform float scale;\nuniform float detail1;\nuniform float detail2;\nuniform float detail3;\n\nvarying vec2 vUv;\nvarying vec3 vEyeSurfaceLocal;\n\nconst vec3 color = vec3(0.3, 0.4, 0.5);\nconst vec3 cLightReflDir = vec3(0.02, 0.9992, 0.02);\nconst float constSpecPow = 2.;\nconst float specPow = 64.;\n\nvec3 getWaterNormal(sampler2D map, vec2 uv) {\n    float t = time * speed * 0.01;\n\n    // 2 lookups should be enough with proper tuning\n    vec4 tex1 = texture2D(map, uv*2. + vec2(6., 3.)*t);\n    vec4 tex2 = texture2D(map, uv*1.5 + vec2(5., -4.)*t);\n    vec4 tex3 = texture2D(map, uv + vec2(-1.8, 1.6)*t);\n\n    vec3 wave = vec3(tex1 * detail1 + tex2 * detail2 + tex3 * detail3);\n    wave.z *= 0.25;\n\n    return normalize(wave);\n}\n\nvoid main() {\n    vec3 normal = getWaterNormal(normalMap, vUv);\n\n    vec3 lightRefl = normalize(reflect(normalize(lightDir), normal));\n\n    float constSpecTerm = max(0.0, dot(normal, cLightReflDir));\n    float specTerm = max(0.0, dot(normalize(vEyeSurfaceLocal), lightRefl));\n\n    float specular1 = ((pow(constSpecTerm, constSpecPow) - .5) * 1.5 + .5) * .15;\n    float specular2 = pow(specTerm, specPow) * .2;\n\n    gl_FragColor = vec4(min(color + lightColor * (specular1 + specular2), 1.0), opacity);\n}\n"},function(t,e){THREE.BufferGeometryUtils={computeTangents:function(t){function e(t,e,n){h.fromArray(a,3*t),v.fromArray(a,3*e),m.fromArray(a,3*n),g.fromArray(s,2*t),_.fromArray(s,2*e),y.fromArray(s,2*n);var r=v.x-h.x,i=m.x-h.x,o=v.y-h.y,u=m.y-h.y,c=v.z-h.z,l=m.z-h.z,p=_.x-g.x,b=y.x-g.x,E=_.y-g.y,S=y.y-g.y,M=1/(p*S-b*E);x.set((S*r-E*i)*M,(S*o-E*u)*M,(S*c-E*l)*M),w.set((p*i-b*r)*M,(p*u-b*o)*M,(p*l-b*c)*M),f[t].add(x),f[e].add(x),f[n].add(x),d[t].add(w),d[e].add(w),d[n].add(w)}function n(t){N.fromArray(u,3*t),U.copy(N),D=f[t],O.copy(D),O.sub(N.multiplyScalar(N.dot(D))).normalize(),I.crossVectors(U,D),C=I.dot(d[t]),A=C<0?-1:1,l[4*t]=O.x,l[4*t+1]=O.y,l[4*t+2]=O.z,l[4*t+3]=A}var r=t.index,i=t.attributes;if(null===r||void 0===i.position||void 0===i.normal||void 0===i.uv)return void console.warn("THREE.BufferGeometry: Missing required attributes (index, position, normal or uv) in BufferGeometry.computeTangents()");var o=r.array,a=i.position.array,u=i.normal.array,s=i.uv.array,c=a.length/3;void 0===i.tangent&&t.addAttribute("tangent",new THREE.BufferAttribute(new Float32Array(4*c),4));for(var l=i.tangent.array,f=[],d=[],p=0;p<c;p++)f[p]=new THREE.Vector3,d[p]=new THREE.Vector3;var h=new THREE.Vector3,v=new THREE.Vector3,m=new THREE.Vector3,g=new THREE.Vector2,_=new THREE.Vector2,y=new THREE.Vector2,x=new THREE.Vector3,w=new THREE.Vector3,b=t.groups;0===b.length&&(b=[{start:0,count:o.length}]);for(var E=0,S=b.length;E<S;++E)for(var M=b[E],T=M.start,P=M.count,L=T,R=T+P;L<R;L+=3)e(o[L+0],o[L+1],o[L+2]);for(var A,D,C,O=new THREE.Vector3,I=new THREE.Vector3,N=new THREE.Vector3,U=new THREE.Vector3,E=0,S=b.length;E<S;++E)for(var M=b[E],T=M.start,P=M.count,L=T,R=T+P;L<R;L+=3)n(o[L+0]),n(o[L+1]),n(o[L+2])}}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=n(3),u=r(a),s=n(37),c=r(s),l={altTex:!1},f=function(){function t(e){var n=this;i(this,t),this.statsUi=new c.default(e);var r=new dat.GUI({width:300}),o=r.addFolder("Grass");o.add(u.default.grass.swayFrequency,"value").min(0).max(10).step(.05).name("Frequency"),o.add(u.default.grass.swayAmplitude,"value").min(0).max(2).step(.05).name("Amplitude"),o.add(u.default.grass.vertexSwayAmplitude,"value").min(0).max(2).step(.05).name("VertAmp"),o.add(u.default.grass.vertexSwayAmplitudeNormal,"value").min(0).max(2).step(.05).name("VertAmp Normal");var a=r.addFolder("Water");a.add(l,"altTex").name("Another Texture").onChange(function(){n.changeWaterTex()}),a.add(u.default.water.opacity,"value").min(0).max(1).step(.05).name("Opacity"),a.add(u.default.water.speed,"value").min(0).max(15).step(.05).name("Speed"),a.add(u.default.water.scale,"value").min(0).max(2).step(.05).name("Scale"),a.add(u.default.water.detail1,"value").min(0).max(1).step(.05).name("Detail1"),a.add(u.default.water.detail2,"value").min(0).max(1).step(.05).name("Detail2"),a.add(u.default.water.detail3,"value").min(0).max(1).step(.05).name("Detail3"),r.open(),o.open(),a.open()}return o(t,[{key:"changeWaterTex",value:function(){var t=l.altTex?1:0;u.default.water.normalMap.value=u.default.water.normalMaps[t]}},{key:"update",value:function(){this.statsUi&&this.statsUi.update()}}]),t}();e.default=f},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=n(38),a=[["drawcalls","render","calls",0],["programs","programs","length",0],["geometries","memory","geometries",0],["textures","memory","textures",0],["faces","render","faces",0]],u=null,s=null,c=function(){function t(e){r(this,t),this.rInfo=e.info,this.stats=new o;var n=this.createRenderInfoDiv(),i=this.createRenderInfoTableDiv();n.appendChild(i),this.stats.domElement.appendChild(n),document.body.appendChild(this.stats.domElement)}return i(t,[{key:"update",value:function(){this.updateRenderInfo(),this.stats.update()}},{key:"updateRenderInfo",value:function(){for(u=0;u<a.length;u++)s=this.rInfo[a[u][1]][a[u][2]],s!==a[u][3]&&(a[u][3]=s,a[u][4].nodeValue=s)}},{key:"createRenderInfoDiv",value:function(){var t=document.createElement("div");return t.id="render-info",t.style.width="80px",t.style.backgroundColor="rgb(0, 0, 34)",t.style.color="rgb(0, 255, 255)",t.style.fontSize="11px",t.style.fontFamily="Helvetica, Arial, sans-serif",t}},{key:"createRenderInfoTableDiv",value:function(){var t=document.createElement("TABLE"),e=document.createElement("TBODY");t.appendChild(e);var n=void 0,r=void 0,i=void 0;for(u=0;u<a.length;u++)n=document.createElement("TR"),e.appendChild(n),r=document.createElement("TD"),r.width=35,r.style.maxWidth="35px",r.appendChild(document.createTextNode(a[u][0])),n.appendChild(r),r=document.createElement("TD"),r.width=35,r.style.textAlign="right",r.style.float="right",i=document.createTextNode(a[u][3]),a[u].push(i),r.appendChild(i),n.appendChild(r);return t}}]),t}();e.default=c},function(t,e,n){var r=function(){var t=Date.now(),e=t,n=0,r=1/0,i=0,o=0,a=1/0,u=0,s=0,c=0,l=document.createElement("div");l.id="stats",l.addEventListener("mousedown",function(t){t.preventDefault(),_(++c%2)},!1),l.style.cssText="width:80px;opacity:0.9;cursor:pointer";var f=document.createElement("div");f.id="fps",f.style.cssText="padding:0 0 3px 3px;text-align:left;background-color:#002",l.appendChild(f);var d=document.createElement("div");d.id="fpsText",d.style.cssText="color:#0ff;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px",d.innerHTML="FPS",f.appendChild(d);var p=document.createElement("div");for(p.id="fpsGraph",p.style.cssText="position:relative;width:74px;height:30px;background-color:#0ff",f.appendChild(p);p.children.length<74;){var h=document.createElement("span");h.style.cssText="width:1px;height:30px;float:left;background-color:#113",p.appendChild(h)}var v=document.createElement("div");v.id="ms",v.style.cssText="padding:0 0 3px 3px;text-align:left;background-color:#020;display:none",l.appendChild(v);var m=document.createElement("div");m.id="msText",m.style.cssText="color:#0f0;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px",m.innerHTML="MS",v.appendChild(m);var g=document.createElement("div");for(g.id="msGraph",g.style.cssText="position:relative;width:74px;height:30px;background-color:#0f0",v.appendChild(g);g.children.length<74;){var h=document.createElement("span");h.style.cssText="width:1px;height:30px;float:left;background-color:#131",g.appendChild(h)}var _=function(t){switch(c=t){case 0:f.style.display="block",v.style.display="none";break;case 1:f.style.display="none",v.style.display="block"}},y=function(t,e){var n=t.appendChild(t.firstChild);n.style.height=e+"px"};return{REVISION:12,domElement:l,setMode:_,begin:function(){t=Date.now()},end:function(){var c=Date.now();return n=c-t,r=Math.min(r,n),i=Math.max(i,n),m.textContent=n+" MS ("+r+"-"+i+")",y(g,Math.min(30,30-n/200*30)),s++,c>e+1e3&&(o=Math.round(1e3*s/(c-e)),a=Math.min(a,o),u=Math.max(u,o),d.textContent=o+" FPS ("+a+"-"+u+")",y(p,Math.min(30,30-o/100*30)),e=c,s=0),c},update:function(){t=this.end()}}};t.exports=r},function(t,e){"use strict";t.exports=function(){if(window.WebGLRenderingContext){for(var t=document.createElement("canvas"),e=["webgl","experimental-webgl","moz-webgl"],n=!1,r=0;r<e.length;r++)try{if(n=t.getContext(e[r]),n&&"function"==typeof n.getParameter)return!0}catch(t){console.log("Unable to initialize WebGL. Your browser may not support it.")}return!1}return!1}}]);